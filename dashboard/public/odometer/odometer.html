<html>
<head>
  <style>
    #odoAndSliderContainer td {
      padding: 3px;
    }

    #odoDivBin {
      background: #a00;
    }

    #odoDivDec {
      background: #0a0;
    }

    #odoDivHex {
      background: #00a;
    }

    #odoDivArb {
      background: #a0a;
    }

    #diyOdo {
      width: 30px;
    }
  </style>
  <script src="/odometer/cdo-odometer.js"></script>
  <link rel="stylesheet" href="/odometer/cdo-odometer.css">

  <script type="text/javascript">
    var myBinOdo, myDecOdo, myHexOdo, myArbOdo;
    var allOdos = [];
    var odoVal = 0;

    var timer;
    var tickValue = 0.01;
    var odoDiv;

    $(document).ready(function() {

      odoDivBin = document.getElementById("odoDivBin");
      odoDivDec = document.getElementById("odoDivDec");
      odoDivHex = document.getElementById("odoDivHex");
      odoDivArb = document.getElementById("odoDivArb");

      myBinOdo = new Odometer({parent: odoDivBin, digits: 10, radix: 2});
      myDecOdo = new Odometer({parent: odoDivDec, digits: 10, radix: 10});
      myHexOdo = new Odometer({parent: odoDivHex, digits: 10, radix: 16});
      myArbOdo = new Odometer({parent: odoDivArb, digits: 10, radix: 25});

      allOdos.push(myBinOdo);
      allOdos.push(myDecOdo);
      allOdos.push(myHexOdo);
      allOdos.push(myArbOdo);

      setAllOdos(odoVal);
    });

    var isMouseDown = false;
    document.onmousedown = function() {
      isMouseDown = true
    };
    document.onmouseup = function() {
      isMouseDown = false
    };

    function setOdoFromSlider() {
      var val = parseFloat(document.getElementById("odoValSlider").value);
      if (isMouseDown) {
        setAllOdos(val);
      }
    }

    function setAllOdos(val) {
      odoVal = val; //setGlobal for incrementing
      for (var i in allOdos) {
        allOdos[i].set(val);
      }

      setOdoSlider(odoVal);
      setOdoNumberInput(odoVal);
    }

    function pauseOdo() {
      if (timer) {
        clearInterval(timer);
        timer = null;
      }
    }

    function startOdo() {
      if (timer == null) {
        timer = setInterval(update, 20);
      }
    }

    function resetOdo() {
      pauseOdo();
      odoVal = 0;
      for (var i in allOdos) { //hack to force proper resetting
        allOdos[i].set(0);
      }
      setAllOdos(odoVal);
    }

    function update() {
      odoVal += tickValue;
      setAllOdos(odoVal);
    }

    function setSpeed() {
      var obj = document.getElementById("speedSlider");
      if (obj.value === obj.max) {
        console.debug("max");
        tickValue = 1;
      }
      else {
        tickValue = parseFloat(obj.value);
      }
    }

    function setArbOdo(val) {
      myArbOdo.changeRadix(parseInt(val));
    }

    function setOdoSlider(val) {
      var obj = document.getElementById("odoValSlider");
      obj.value = Math.min(val, parseInt(obj.max));
    }

    function setOdoNumberInput(val) {
      var obj = document.getElementById("odoNumberInput");
      obj.value = Math.floor(val);
    }

    function increment() {
      odoVal = Math.floor(odoVal) + 1;
      setAllOdos(odoVal);
    }

    function decrement() {
      odoVal = Math.ceil(odoVal) - 1;
      setAllOdos(odoVal);
    }
  </script>

</head>
<body>

<div id="bubble">
  <p>Use the widget controls below to watch odometers with various number
  bases. Binary, Decimal and Hexadecimal are the most common number systems to see in
  computer science.<p>
  <p>Practice with them here. Set a value. Predict what the number one up, or one
  down will be.</p>
</div>

<button onClick="startOdo()">Start</button>
<button onClick="pauseOdo()">Pause</button>
<button onClick="resetOdo()">Reset</button>
<br>
Slow <input type=range min=0.005 max=0.15 step=0.005 oninput="setSpeed()"  id="speedSlider" value=0.01> Fast<br>
<button onClick="increment()">Increment</button>
<button onClick="decrement()">Decrement</button>

<table id="odoAndSliderContainer">
  <tr>
    <td valign=middle>
      <!----- all odometers table...needs to be able to resize dynamically -->
      <table>
        <tr id="rowBin">
          <td>Binary:</td>
          <td>
            <div id="odoDivBin"></div>
          </td>
        </tr>
        <tr id="rowDec">
          <td>Decimal:</td>
          <td>
            <div id="odoDivDec"></div>

          </td>
        </tr>
        <tr id="rowHex">
          <td>Hexadecimal:</td>
          <td>
            <div id="odoDivHex"></div>
          </td>
        </tr>
        <tr id="rowArb">
          <td>Custom Base: <input type=number id="diyOdo"
                     title="Enter any number base here 2-36.  NOTE: base 36 is chars 0-Z"
                     min=2 max=36 width=1 value=25
                     onChange="setArbOdo(parseInt(this.value))"></td>
          <td>
            <div id="odoDivArb"></div>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<div id="numberScroller">
  <input
      title="The slider maxes out at 1023, but you can enter any number in the text box below."
      type=range min=0 max=1023 step=0.1
      onClick="setAllOdos(parseFloat(this.value))"
      onMouseMove="setOdoFromSlider()" id="odoValSlider" value=0>
  <br>
  Value: <input type=number style="width:75px"
         onChange="setAllOdos(parseFloat(this.value))"
         id="odoNumberInput">
</div>

</body>
</html>
