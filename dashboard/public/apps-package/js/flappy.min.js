require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/flappy/main.js":[function(a,b,c){(function(b){"use strict";var c=a("../appMain");window.Flappy=a("./flappy"),"undefined"!=typeof b&&(b.Flappy=window.Flappy);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.flappyMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Flappy,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","./blocks":"/home/ubuntu/staging/apps/build/js/flappy/blocks.js","./flappy":"/home/ubuntu/staging/apps/build/js/flappy/flappy.js","./levels":"/home/ubuntu/staging/apps/build/js/flappy/levels.js","./skins":"/home/ubuntu/staging/apps/build/js/flappy/skins.js"}],"/home/ubuntu/staging/apps/build/js/flappy/skins.js":[function(a,b,c){"use strict";var d=a("../skins"),e={flappy:{}};c.load=function(a,b){var c=d.load(a,b),f=e[c.id];return c.scifi={background:c.assetUrl("background_scifi.png"),avatar:c.assetUrl("avatar_scifi.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_scifi.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_scifi_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_scifi.png"),ground:c.assetUrl("ground_scifi.png"),ground_thumb:c.assetUrl("ground_scifi_thumb.png")},c.underwater={background:c.assetUrl("background_underwater.png"),avatar:c.assetUrl("avatar_underwater.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_underwater.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_underwater_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_underwater.png"),ground:c.assetUrl("ground_underwater.png"),ground_thumb:c.assetUrl("ground_underwater_thumb.png")},c.cave={background:c.assetUrl("background_cave.png"),avatar:c.assetUrl("avatar_cave.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_cave.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_cave_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_cave.png"),ground:c.assetUrl("ground_cave.png"),ground_thumb:c.assetUrl("ground_cave_thumb.png")},c.santa={background:c.assetUrl("background_santa.png"),avatar:c.assetUrl("santa.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_santa.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_santa_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_santa.png"),ground:c.assetUrl("ground_santa.png"),ground_thumb:c.assetUrl("ground_santa_thumb.png")},c.night={background:c.assetUrl("background_night.png")},c.redbird={avatar:c.assetUrl("avatar_redbird.png")},c.laser={obstacle_bottom:c.assetUrl("obstacle_bottom_laser.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_laser_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_laser.png")},c.lava={ground:c.assetUrl("ground_lava.png"),ground_thumb:c.assetUrl("ground_lava_thumb.png")},c.shark={avatar:c.assetUrl("shark.png")},c.easter={avatar:c.assetUrl("easterbunny.png")},c.batman={avatar:c.assetUrl("batman.png")},c.submarine={avatar:c.assetUrl("submarine.png")},c.unicorn={avatar:c.assetUrl("unicorn.png")},c.fairy={avatar:c.assetUrl("fairy.png")},c.superman={avatar:c.assetUrl("superman.png")},c.turkey={avatar:c.assetUrl("turkey.png")},c.ground=c.assetUrl("ground.png"),c.ground_thumb=c.assetUrl("ground_thumb.png"),c.obstacle_top=c.assetUrl("obstacle_top.png"),c.obstacle_bottom=c.assetUrl("obstacle_bottom.png"),c.obstacle_bottom_thumb=c.assetUrl("obstacle_bottom_thumb.png"),c.instructions=c.assetUrl("instructions.png"),c.clickrun=c.assetUrl("clickrun.png"),c.getready=c.assetUrl("getready.png"),c.gameover=c.assetUrl("gameover.png"),c.flapIcon=c.assetUrl("flap-bird.png"),c.crashIcon=c.assetUrl("when-crash.png"),c.collideObstacleIcon=c.assetUrl("when-obstacle.png"),c.collideGroundIcon=c.assetUrl("when-crash.png"),c.enterObstacleIcon=c.assetUrl("when-pass.png"),c.tiles=c.assetUrl("tiles.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.obstacle=c.assetUrl("obstacle.png"),c.obstacleScale=f.obstacleScale||1,c.largerObstacleAnimationTiles=c.assetUrl(f.largerObstacleAnimationTiles),c.hittingWallAnimation=c.assetUrl(f.hittingWallAnimation),c.approachingGoalAnimation=c.assetUrl(f.approachingGoalAnimation),c.obstacleSound=[c.assetUrl("obstacle.mp3"),c.assetUrl("obstacle.ogg")],c.wallSound=[c.assetUrl("wall.mp3"),c.assetUrl("wall.ogg")],c.winGoalSound=[c.assetUrl("win_goal.mp3"),c.assetUrl("win_goal.ogg")],c.wall0Sound=[c.assetUrl("wall0.mp3"),c.assetUrl("wall0.ogg")],c.dieSound=[c.assetUrl("sfx_die.mp3"),c.assetUrl("sfx_die.ogg")],c.hitSound=[c.assetUrl("sfx_hit.mp3"),c.assetUrl("sfx_hit.ogg")],c.pointSound=[c.assetUrl("sfx_point.mp3"),c.assetUrl("sfx_point.ogg")],c.swooshingSound=[c.assetUrl("sfx_swooshing.mp3"),c.assetUrl("sfx_swooshing.ogg")],c.wingSound=[c.assetUrl("sfx_wing.mp3"),c.assetUrl("sfx_wing.ogg")],c.jetSound=[c.assetUrl("jet.mp3"),c.assetUrl("jet.ogg")],c.crashSound=[c.assetUrl("crash.mp3"),c.assetUrl("crash.ogg")],c.jingleSound=[c.assetUrl("jingle.mp3"),c.assetUrl("jingle.ogg")],c.laserSound=[c.assetUrl("laser.mp3"),c.assetUrl("laser.ogg")],c.splashSound=[c.assetUrl("splash.mp3"),c.assetUrl("splash.ogg")],c.graph=f.graph,c.background=c.assetUrl("background.png"),c}},{"../skins":"/home/ubuntu/staging/apps/build/js/skins.js"}],"/home/ubuntu/staging/apps/build/js/flappy/levels.js":[function(a,b,c){"use strict";var d=a("./constants"),e=a("./locale"),f=a("../block_utils").createToolbox,g=a("../utils"),h='<block type="flappy_flap"></block>',i='<block type="flappy_flap_height"></block>',j='<block type="flappy_endGame"></block>',k='<block type="flappy_playSound"></block>',l='<block type="flappy_incrementPlayerScore"></block>',m='<block type="flappy_setSpeed"></block>',n='<block type="flappy_setBackground"></block>',o='<block type="flappy_setGapHeight"></block>',p='<block type="flappy_setPlayer"></block>',q='<block type="flappy_setObstacle"></block>',r='<block type="flappy_setGround"></block>',s='<block type="flappy_setGravity"></block>',t='<block type="flappy_setScore"></block>',u=d.AVATAR_HEIGHT,v=d.AVATAR_WIDTH,w=(d.AVATAR_Y_OFFSET,function(a,b){return'<block type="'+a+'" deletable="false">'+(b?"<next>"+b+"</next>":"")+"</block>"}),x=function(a,b){return'<block type="'+a+'" deletable="false" movable="false">'+(b?"<next>"+b+"</next>":"")+"</block>"};b.exports={1:{requiredBlocks:[[{test:"flap",type:"flappy_flap"}]],obstacles:!1,ground:!1,score:!1,freePlay:!1,goal:{startX:100,startY:0,successCondition:function(){return Flappy.avatarY<=40},failureCondition:function(){return Flappy.avatarY>Flappy.MAZE_HEIGHT}},scale:{snapRadius:2},toolbox:f(h+k),startBlocks:w("flappy_whenClick"),appSpecificFailError:e.flappySpecificFail()},2:{requiredBlocks:[[{test:"endGame",type:"flappy_endGame"}]],obstacles:!1,ground:!0,score:!1,freePlay:!1,goal:{startX:100,startY:324,successCondition:function(){return 322===Flappy.avatarY&&110===Flappy.avatarX},failureCondition:function(){var a=Flappy.avatarY+u,b=Flappy.MAZE_HEIGHT-Flappy.GROUND_HEIGHT;return a>=b&&Flappy.gameState===Flappy.GameStates.ACTIVE}},scale:{snapRadius:2},toolbox:f(h+j+k),startBlocks:w("flappy_whenClick",h)+w("flappy_whenCollideGround")},3:{requiredBlocks:[[{test:"setSpeed",type:"flappy_setSpeed"}]],obstacles:!1,ground:!0,score:!1,freePlay:!1,goal:{startX:345,startY:0,moving:!0,successCondition:function(){var a={x:(Flappy.avatarX+v)/2,y:(Flappy.avatarY+u)/2},b={x:(Flappy.goalX+Flappy.GOAL_SIZE)/2,y:(Flappy.goalY+Flappy.GOAL_SIZE)/2},c={x:Math.abs(a.x-b.x),y:Math.abs(a.y-b.y)};return c.x<15&&c.y<15},failureCondition:function(){return Flappy.activeTicks()>=120&&0===Flappy.SPEED}},scale:{snapRadius:2},toolbox:f(h+k+m),startBlocks:w("flappy_whenClick",h)+w("when_run")},4:{requiredBlocks:[[{test:"endGame",type:"flappy_endGame"}]],obstacles:!0,ground:!0,score:!1,freePlay:!1,goal:{startX:572,startY:324,moving:!0,successCondition:function(){return Flappy.obstacles[0].hitAvatar&&Flappy.gameState===Flappy.GameStates.OVER},failureCondition:function(){var a=Flappy.obstacles[0].x+Flappy.OBSTACLE_WIDTH;return a<Flappy.avatarX}},scale:{snapRadius:2},toolbox:f(h+j+k+m),startBlocks:w("flappy_whenClick",h)+w("when_run",m)+w("flappy_whenCollideObstacle")},5:{requiredBlocks:[[{test:"incrementPlayerScore",type:"flappy_incrementPlayerScore"}]],defaultFlap:"SMALL",obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>0},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&0===Flappy.playerScore}},scale:{snapRadius:2},toolbox:f(h+j+l+k+m),startBlocks:w("flappy_whenClick",h)+w("flappy_whenEnterObstacle")+w("when_run",m)},6:{requiredBlocks:[[{test:"flap",type:"flappy_flap_height"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>0},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){b.containsAvatar()&&(a=!0)}),a&&0===Flappy.playerScore}},scale:{snapRadius:2},toolbox:f(i+j+l+k+m),startBlocks:w("flappy_whenClick")+w("flappy_whenEnterObstacle",l)+w("when_run",m)},7:{requiredBlocks:[[{test:"setBackground",type:"flappy_setBackground"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:f(i+j+l+k+m+n),startBlocks:w("flappy_whenClick",i)+w("flappy_whenCollideGround",j)+w("flappy_whenCollideObstacle",j)+w("flappy_whenEnterObstacle",l)+w("when_run",m)},8:{requiredBlocks:[[{test:function(a){return("flappy_setBackground"===a.type||"flappy_setPlayer"===a.type)&&"random"===a.getTitleValue("VALUE")},type:"flappy_setBackground",titles:{VALUE:"random"}}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:f(i+j+l+k+m+n+p),startBlocks:w("flappy_whenClick",i)+w("flappy_whenCollideGround",j)+w("flappy_whenCollideObstacle",j)+w("flappy_whenEnterObstacle",l)+w("when_run",m)},9:{requiredBlocks:[[{test:function(a){return"flappy_setScore"===a.type},type:"flappy_setScore"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:f(i+j+l+k+m+n+p+t),startBlocks:w("flappy_whenClick",i)+w("flappy_whenCollideGround",j)+w("flappy_whenCollideObstacle")+w("flappy_whenEnterObstacle",l)+w("when_run",m)},11:{shareable:!0,requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,scale:{snapRadius:2},toolbox:f(i+k+l+j+m+n+p+q+r+o+s+t),startBlocks:w("flappy_whenClick")+w("flappy_whenCollideGround")+w("flappy_whenCollideObstacle")+w("flappy_whenEnterObstacle")+w("when_run")},k1:{requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,isK1:!0,scale:{snapRadius:2},toolbox:f(h+j+n+p+q+r+k+i+m+l+o+s+t),startBlocks:w("flappy_whenClick")+w("flappy_whenCollideGround")+w("flappy_whenCollideObstacle")+w("flappy_whenEnterObstacle")+w("when_run")}},b.exports.k1_1={isK1:!0,grayOutUndeletableBlocks:!0,requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,scale:{snapRadius:2},toolbox:"",startBlocks:x("flappy_whenClick",x("flappy_flap"))+x("flappy_whenCollideGround",x("flappy_endGame"))+x("flappy_whenCollideObstacle",x("flappy_endGame"))+x("flappy_whenEnterObstacle",x("flappy_incrementPlayerScore"))+x("when_run",x("flappy_setSpeed"))},b.exports.k1_2=g.extend(b.exports[1],{isK1:!0}),b.exports.k1_3=g.extend(b.exports[2],{isK1:!0}),b.exports.k1_4=g.extend(b.exports[3],{isK1:!0}),b.exports.k1_5=g.extend(b.exports[4],{isK1:!0}),b.exports.k1_6=g.extend(b.exports[5],{isK1:!0}),b.exports.k1_7={isK1:!0,requiredBlocks:[[{test:"incrementPlayerScore",type:"flappy_incrementPlayerScore"}]],defaultFlap:"SMALL",obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>1},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore<=1}},scale:{snapRadius:2},toolbox:f(h+j+l+k+m),startBlocks:w("flappy_whenClick",h)+w("flappy_whenEnterObstacle")+w("when_run",m)},b.exports.k1_8=g.extend(b.exports[7],{isK1:!0,toolbox:f(h+j+l+k+m+n),startBlocks:w("flappy_whenClick",h)+w("flappy_whenCollideGround",j)+w("flappy_whenCollideObstacle",j)+w("flappy_whenEnterObstacle",l)+w("when_run",m)}),b.exports.k1_9={isK1:!0,requiredBlocks:[[{test:"setPlayer",type:"flappy_setPlayer"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:f(h+j+l+k+m+n+p),startBlocks:w("flappy_whenClick",h)+w("flappy_whenCollideGround",j)+w("flappy_whenCollideObstacle",j)+w("flappy_whenEnterObstacle",l)+w("when_run",m)}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./constants":"/home/ubuntu/staging/apps/build/js/flappy/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/flappy/locale.js"}],"/home/ubuntu/staging/apps/build/js/flappy/flappy.js":[function(a,b,c){"use strict";var d=a("../StudioApp").singleton,e=a("../locale"),f=a("./locale"),g=(a("../skins"),a("../codegen")),h=a("./api"),i=a("../templates/AppView.jsx"),j=a("../templates/codeWorkspace.html.ejs"),k=a("../templates/visualizationColumn.html.ejs"),l=a("../dom"),m=a("./constants"),n=a("../utils"),o=a("../dropletUtils"),p=d.ResultType,q=d.TestResults,r=b.exports;r.GameStates={WAITING:0,ACTIVE:1,ENDING:2,OVER:3},r.gameState=r.GameStates.WAITING,r.clickPending=!1,r.avatarVelocity=0;var s,t;r.obstacles=[];var u;d.setCheckForEmptyBlocks(!0);var v=function(){var a=r.MIN_OBSTACLE_HEIGHT,b=r.MAZE_HEIGHT-r.GROUND_HEIGHT-r.MIN_OBSTACLE_HEIGHT-r.GAP_SIZE;return Math.floor(Math.random()*(b-a)+a)};r.scale={snapRadius:1,stepSpeed:33};var w={text:f.shareFlappyTwitter(),hashtag:"FlappyCode"},x=m.AVATAR_HEIGHT,y=m.AVATAR_WIDTH,z=(m.AVATAR_Y_OFFSET,function(){u=n.valueOr(s.infoText,!0),u||(r.gameState=r.GameStates.ACTIVE);for(var a in s.scale)r.scale[a]=s.scale[a];r.MARKER_HEIGHT=43,r.MARKER_WIDTH=50,r.MAZE_WIDTH=400,r.MAZE_HEIGHT=400,r.GROUND_WIDTH=400,r.GROUND_HEIGHT=48,r.GOAL_SIZE=55,r.OBSTACLE_WIDTH=52,r.OBSTACLE_HEIGHT=320,r.MIN_OBSTACLE_HEIGHT=48,r.setGapHeight(h.GapHeight.NORMAL),r.OBSTACLE_SPACING=250;var b=2*r.MAZE_WIDTH/r.OBSTACLE_SPACING;s.obstacles||(b=0);for(var c=function(a){this.x=a,this.gapStart=v(),this.hitAvatar=!1},d=function(){var a=r.avatarX+y,b=r.avatarY+x,c=this.x+r.OBSTACLE_WIDTH,d=this.gapStart+r.GAP_SIZE;return a>this.x&&c>a&&r.avatarY>this.gapStart&&d>b},e=0;b>e;e++)r.obstacles.push({x:1.5*r.MAZE_WIDTH+e*r.OBSTACLE_SPACING,gapStart:v(),hitAvatar:!1,reset:c,containsAvatar:d})}),A=function(){var a,b,c=document.getElementById("svgFlappy");c.setAttribute("width",r.MAZE_WIDTH),c.setAttribute("height",r.MAZE_HEIGHT);var d=document.getElementById("visualizationColumn");if(d.style.width=r.MAZE_WIDTH+"px",t.background&&(b=document.createElementNS(Blockly.SVG_NS,"image"),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.background),b.setAttribute("id","background"),b.setAttribute("height",r.MAZE_HEIGHT),b.setAttribute("width",r.MAZE_WIDTH),b.setAttribute("x",0),b.setAttribute("y",0),c.appendChild(b)),r.obstacles.forEach(function(a,b){var d=document.createElementNS(Blockly.SVG_NS,"image");d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.obstacle_top),d.setAttribute("id","obstacle_top"+b),d.setAttribute("height",r.OBSTACLE_HEIGHT),d.setAttribute("width",r.OBSTACLE_WIDTH),c.appendChild(d);var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.obstacle_bottom),e.setAttribute("id","obstacle_bottom"+b),e.setAttribute("height",r.OBSTACLE_HEIGHT),e.setAttribute("width",r.OBSTACLE_WIDTH),c.appendChild(e)}),s.ground)for(a=0;a<r.MAZE_WIDTH/r.GROUND_WIDTH+1;a++){var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.ground),e.setAttribute("id","ground"+a),e.setAttribute("height",r.GROUND_HEIGHT),e.setAttribute("width",r.GROUND_WIDTH),e.setAttribute("x",0),e.setAttribute("y",r.MAZE_HEIGHT-r.GROUND_HEIGHT),c.appendChild(e)}if(s.goal&&s.goal.startX){var f=document.createElementNS(Blockly.SVG_NS,"image");f.setAttribute("id","goal"),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goal),f.setAttribute("height",r.GOAL_SIZE),f.setAttribute("width",r.GOAL_SIZE),f.setAttribute("x",s.goal.startX),f.setAttribute("y",s.goal.startY),c.appendChild(f)}var g=document.createElementNS(Blockly.SVG_NS,"clipPath");g.setAttribute("id","avatArclipPath");var h=document.createElementNS(Blockly.SVG_NS,"rect");h.setAttribute("id","avatArclipRect"),h.setAttribute("width",r.MAZE_WIDTH),h.setAttribute("height",r.MAZE_HEIGHT-r.GROUND_HEIGHT),g.appendChild(h),c.appendChild(g);var i=document.createElementNS(Blockly.SVG_NS,"image");i.setAttribute("id","avatar"),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.avatar),i.setAttribute("height",x),i.setAttribute("width",y),s.ground&&i.setAttribute("clip-path","url(#avatArclipPath)"),c.appendChild(i);var j=document.createElementNS(Blockly.SVG_NS,"image");j.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.instructions),j.setAttribute("id","instructions"),j.setAttribute("height",50),j.setAttribute("width",159),j.setAttribute("x",110),j.setAttribute("y",170),j.setAttribute("visibility","hidden"),c.appendChild(j);var k=document.createElementNS(Blockly.SVG_NS,"image");k.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.getready),k.setAttribute("id","getready"),k.setAttribute("height",50),k.setAttribute("width",183),k.setAttribute("x",108),k.setAttribute("y",80),k.setAttribute("visibility","hidden"),c.appendChild(k);var l=document.createElementNS(Blockly.SVG_NS,"image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.clickrun),l.setAttribute("id","clickrun"),l.setAttribute("height",41),l.setAttribute("width",273),l.setAttribute("x",64),l.setAttribute("y",200),l.setAttribute("visibility","visibile"),c.appendChild(l);var m=document.createElementNS(Blockly.SVG_NS,"image");m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.gameover),m.setAttribute("id","gameover"),m.setAttribute("height",41),m.setAttribute("width",192),m.setAttribute("x",104),m.setAttribute("y",80),m.setAttribute("visibility","hidden"),c.appendChild(m);var n=document.createElementNS(Blockly.SVG_NS,"text");n.setAttribute("id","score"),n.setAttribute("class","flappy-score"),n.setAttribute("x",r.MAZE_WIDTH/2),n.setAttribute("y",60),n.appendChild(document.createTextNode("0")),n.setAttribute("visibility","hidden"),c.appendChild(n);var o=document.createElementNS(Blockly.SVG_NS,"rect");o.setAttribute("width",r.MAZE_WIDTH),o.setAttribute("height",r.MAZE_HEIGHT),o.setAttribute("fill-opacity",0),o.addEventListener("touchstart",function(a){r.onMouseDown(a),a.preventDefault()}),o.addEventListener("mousedown",function(a){r.onMouseDown(a)}),c.appendChild(o)};r.calcDistance=function(a,b){return Math.sqrt(a*a+b*b)};var B=function(a){var b=r.avatarX+y>=a.x&&r.avatarX<=a.x+r.OBSTACLE_WIDTH;return b&&(r.avatarY<=a.gapStart||r.avatarY+x>=a.gapStart+r.GAP_SIZE)?!0:!1};r.activeTicks=function(){return r.firstActiveTick<0?0:r.tickCount-r.firstActiveTick},r.callUserGeneratedCode=function(a){try{a.call(r,d,h)}catch(b){console&&console.log(b)}},r.onTick=function(){var a,b;if(r.firstActiveTick<0&&r.gameState===r.GameStates.ACTIVE&&(r.firstActiveTick=r.tickCount),r.tickCount++,1===r.tickCount&&r.callUserGeneratedCode(r.whenRunButton),r.clickPending&&r.gameState<=r.GameStates.ACTIVE&&(r.callUserGeneratedCode(r.whenClick),r.clickPending=!1),a=r.avatarY+x<r.MAZE_HEIGHT-r.GROUND_HEIGHT,r.gameState===r.GameStates.ACTIVE){r.avatarVelocity+=r.gravity,r.avatarY=r.avatarY+r.avatarVelocity;var c=s.ground?r.MAZE_HEIGHT-r.GROUND_HEIGHT-x+1:1.5*r.MAZE_HEIGHT;r.avatarY=Math.min(r.avatarY,c),r.avatarY=Math.max(r.avatarY,r.MAZE_HEIGHT*-.5),r.obstacles.forEach(function(a,b){var c=a.x>r.avatarX+y;a.x-=r.SPEED;var e=a.x>r.avatarX+y;if(c&&!e&&r.avatarY>a.gapStart&&r.avatarY+x<a.gapStart+r.GAP_SIZE&&r.callUserGeneratedCode(r.whenEnterObstacle),!a.hitAvatar&&B(a)){a.hitAvatar=!0;try{r.whenCollideObstacle(d,h)}catch(f){}}var g=r.obstacles.length,i=(b-1+g)%g;a.x+r.OBSTACLE_WIDTH<0&&a.reset(r.obstacles[i].x+r.OBSTACLE_SPACING)}),b=r.avatarY+x<r.MAZE_HEIGHT-r.GROUND_HEIGHT,a&&!b&&r.callUserGeneratedCode(r.whenCollideGround),s.goal&&s.goal.moving&&(r.goalX-=r.SPEED,r.goalX+r.GOAL_SIZE<0&&(r.goalX=r.MAZE_WIDTH+r.GOAL_SIZE))}if(r.gameState===r.GameStates.ENDING){r.avatarY+=10;var e=r.MAZE_HEIGHT-r.GROUND_HEIGHT-y+4;r.avatarY>=e&&(r.avatarY=e,r.gameState=r.GameStates.OVER,r.gameOverTick=r.tickCount),document.getElementById("avatar").setAttribute("transform","translate("+y+", 0) rotate(90, "+r.avatarX+", "+r.avatarY+")"),u&&document.getElementById("gameover").setAttribute("visibility","visibile")}r.displayAvatar(r.avatarX,r.avatarY),r.displayObstacles(),r.gameState<=r.GameStates.ACTIVE&&(r.displayGround(r.tickCount),r.displayGoal()),E()&&r.onPuzzleComplete()},r.onMouseDown=function(a){if(r.intervalId){if(r.clickPending=!0,r.gameState===r.GameStates.WAITING)r.gameState=r.GameStates.ACTIVE;else if(r.gameState===r.GameStates.OVER&&r.gameOverTick+10<r.tickCount){var b=document.getElementById("resetButton");b&&b.click()}document.getElementById("instructions").setAttribute("visibility","hidden"),document.getElementById("getready").setAttribute("visibility","hidden")}else r.gameState===r.GameStates.WAITING&&r.runButtonClick()},r.init=function(b){d.reset=this.reset.bind(this),d.runButtonClick=this.runButtonClick.bind(this),r.clearEventHandlersKillTickLoop(),t=b.skin,s=b.level,b.grayOutUndeletableBlocks=s.grayOutUndeletableBlocks,z(),b.loadAudio=function(){d.loadAudio(t.winSound,"win"),d.loadAudio(t.startSound,"start"),d.loadAudio(t.failureSound,"failure"),d.loadAudio(t.obstacleSound,"obstacle"),d.loadAudio(t.dieSound,"sfx_die"),d.loadAudio(t.hitSound,"sfx_hit"),d.loadAudio(t.pointSound,"sfx_point"),d.loadAudio(t.swooshingSound,"sfx_swooshing"),d.loadAudio(t.wingSound,"sfx_wing"),d.loadAudio(t.winGoalSound,"winGoal"),d.loadAudio(t.jetSound,"jet"),d.loadAudio(t.jingleSound,"jingle"),d.loadAudio(t.crashSound,"crash"),d.loadAudio(t.laserSound,"laser"),d.loadAudio(t.splashSound,"splash"),d.loadAudio(t.wallSound,"wall"),d.loadAudio(t.wall0Sound,"wall0")},b.afterInject=function(){Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=r.scale.snapRadius,A()},b.trashcan=!1,b.twitter=w,b.makeYourOwn=b.share,b.makeString=e.makeYourOwnFlappy(),b.makeUrl="http://code.org/flappy",b.makeImage=d.assetUrl("media/flappy_promo.png"),b.enableShowCode=!1,b.enableShowBlockCount=!1,s.isK1&&(m.WORKSPACE_ROW_HEIGHT*=1.5);var c=m.WORKSPACE_BUFFER,f=c+m.WORKSPACE_COL_WIDTH,g=m.WORKSPACE_BUFFER,h=g+m.WORKSPACE_ROW_HEIGHT,n=h+m.WORKSPACE_ROW_HEIGHT;b.blockArrangement={flappy_whenClick:{x:c,y:g},when_run:{x:c,y:g},flappy_whenCollideGround:{x:f,y:g},flappy_whenCollideObstacle:{x:f,y:h},flappy_whenEnterObstacle:{x:f,y:n}},-1===s.startBlocks.indexOf("whenCollide")&&(b.blockArrangement.flappy_whenEnterObstacle={x:f,y:g}),-1!==s.startBlocks.indexOf("when_run")&&(b.blockArrangement.flappy_whenClick.y=h);var o=function(){return j({assetUrl:d.assetUrl,data:{localeDirection:d.localeDirection(),blockUsed:void 0,idealBlockNumber:void 0,editCode:s.editCode,blockCounterClass:"block-counter-default",readonlyWorkspace:b.readonlyWorkspace}})},p=function(){return k({assetUrl:d.assetUrl,data:{visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:d.assetUrl,shareable:s.shareable})}})},q=function(){d.init(b);var a=document.getElementById("rightButton");l.addClickTouchEvent(a,r.onPuzzleComplete)};ReactDOM.render(React.createElement(i,{assetUrl:d.assetUrl,isEmbedView:!!b.embed,isShareView:!!b.share,renderCodeWorkspace:o,renderVisualizationColumn:p,onMount:q}),document.getElementById(b.containerId))},r.clearEventHandlersKillTickLoop=function(){r.whenClick=null,r.whenCollideGround=null,r.whenCollideObstacle=null,r.whenEnterObstacle=null,r.whenRunButton=null,r.intervalId&&window.clearInterval(r.intervalId),r.intervalId=0},r.reset=function(a){r.clearEventHandlersKillTickLoop(),r.gameState=r.GameStates.WAITING,r.playerScore=0,r.avatarVelocity=0,r.obstacles.forEach(function(a,b){a.reset(1.5*r.MAZE_WIDTH+b*r.OBSTACLE_SPACING)}),r.SPEED=0,r.FLAP_VELOCITY=-11,r.setBackground("flappy"),r.setObstacle("flappy"),r.setPlayer("flappy"),r.setGround("flappy"),r.setGapHeight(h.GapHeight.NORMAL),r.gravity=h.Gravity.NORMAL,r.avatarX=110,r.avatarY=150,s.goal&&s.goal.startX&&(r.goalX=s.goal.startX,r.goalY=s.goal.startY),document.getElementById("avatar").setAttribute("transform",""),document.getElementById("score").setAttribute("visibility","hidden"),document.getElementById("instructions").setAttribute("visibility","hidden"),document.getElementById("clickrun").setAttribute("visibility","visible"),document.getElementById("getready").setAttribute("visibility","hidden"),document.getElementById("gameover").setAttribute("visibility","hidden"),r.displayAvatar(r.avatarX,r.avatarY),r.displayObstacles(),r.displayGround(0),r.displayGoal();document.getElementById("svgFlappy")},r.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),document.getElementById("clickrun").setAttribute("visibility","hidden"),document.getElementById("instructions").setAttribute("visibility","visible"),document.getElementById("getready").setAttribute("visibility","visible"),d.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),d.attempts++,r.execute(),s.freePlay){var c=document.getElementById("right-button-cell");c.className="right-button-cell-enabled"}s.score&&(document.getElementById("score").setAttribute("visibility","visible"),r.displayScore())};var C=function(){r.waitingForReport||d.displayFeedback({app:"flappy",skin:t.id,feedbackType:r.testResults,response:r.response,level:s,showingSharing:s.freePlay&&s.shareable,twitter:w,appStrings:{reinfFeedbackMsg:f.reinfFeedbackMsg(),sharingText:f.shareGame()}})};r.onReportComplete=function(a){r.response=a,r.waitingForReport=!1,d.onReportComplete(a),C()},r.execute=function(){var a;r.result=p.UNSET,r.testResults=q.NO_TESTS_RUN,r.waitingForReport=!1,r.response=null,s.editCode&&(a=o.generateCodeAliases(null,"Flappy"),a+=d.editor.getValue());var b=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenClick"),c=g.functionFromCode(b,{StudioApp:d,Flappy:h}),e=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenCollideGround"),f=g.functionFromCode(e,{StudioApp:d,Flappy:h}),i=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenEnterObstacle"),j=g.functionFromCode(i,{StudioApp:d,Flappy:h}),k=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenCollideObstacle"),l=g.functionFromCode(k,{StudioApp:d,Flappy:h}),m=Blockly.Generator.blockSpaceToCode("JavaScript","when_run"),n=g.functionFromCode(m,{StudioApp:d,Flappy:h});d.playAudio("start"),r.whenClick=c,r.whenCollideGround=f,r.whenEnterObstacle=j,r.whenCollideObstacle=l,r.whenRunButton=n,r.tickCount=0,r.firstActiveTick=-1,r.gameOverTick=0,r.intervalId&&window.clearInterval(r.intervalId),r.intervalId=window.setInterval(r.onTick,r.scale.stepSpeed)},r.onPuzzleComplete=function(){s.freePlay&&(r.result=p.SUCCESS),r.clearEventHandlersKillTickLoop();var a=r.result==p.SUCCESS;s.freePlay?r.testResults=q.FREE_PLAY:r.testResults=d.getTestResults(a),"1"!==s.id||r.testResults!==q.TOO_FEW_BLOCKS_FAIL&&r.testResults!==q.LEVEL_INCOMPLETE_FAIL||(r.testResults=q.APP_SPECIFIC_FAIL),r.testResults>=q.FREE_PLAY?d.playAudio("win"):d.playAudio("failure"),s.editCode&&(r.testResults=a?q.ALL_PASS:q.TOO_FEW_BLOCKS_FAIL);var b=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),c=Blockly.Xml.domToText(b);r.waitingForReport=!0,d.report({app:"flappy",level:s.id,result:r.result===p.SUCCESS,testResult:r.testResults,program:encodeURIComponent(c),onComplete:r.onReportComplete})},r.displayAvatar=function(a,b){var c=document.getElementById("avatar");c.setAttribute("x",a),c.setAttribute("y",b)},r.displayGoal=function(){if(r.goalX){var a=document.getElementById("goal");a.setAttribute("x",r.goalX),a.setAttribute("y",r.goalY)}},r.displayGround=function(a){if(s.ground){var b=a*r.SPEED;b%=r.GROUND_WIDTH;for(var c=0;c<r.MAZE_WIDTH/r.GROUND_WIDTH+1;c++){var d=document.getElementById("ground"+c);d.setAttribute("x",-b+c*r.GROUND_WIDTH),d.setAttribute("y",r.MAZE_HEIGHT-r.GROUND_HEIGHT)}}},r.displayObstacles=function(){for(var a=0;a<r.obstacles.length;a++){var b=r.obstacles[a],c=document.getElementById("obstacle_top"+a);c.setAttribute("x",b.x),c.setAttribute("y",b.gapStart-r.OBSTACLE_HEIGHT);var d=document.getElementById("obstacle_bottom"+a);d.setAttribute("x",b.x),d.setAttribute("y",b.gapStart+r.GAP_SIZE)}},r.displayScore=function(){var a=document.getElementById("score");a.textContent=r.playerScore},r.flap=function(a){var b=s.defaultFlap||"NORMAL";r.avatarVelocity=a||h.FlapHeight[b]},r.setGapHeight=function(a){var b=r.MAZE_HEIGHT-r.MIN_OBSTACLE_HEIGHT-r.OBSTACLE_HEIGHT;b>a&&(a=b),r.GAP_SIZE=a};var D=function(a){return"flappy"===a?t:t[a]};r.setBackground=function(a){var b=document.getElementById("background");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D(a).background)},r.setPlayer=function(a){var b=document.getElementById("avatar");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D(a).avatar)},r.setObstacle=function(a){var b;r.obstacles.forEach(function(c,d){b=document.getElementById("obstacle_top"+d),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D(a).obstacle_top),b=document.getElementById("obstacle_bottom"+d),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D(a).obstacle_bottom)})},r.setGround=function(a){if(s.ground){var b,c;for(c=0;c<r.MAZE_WIDTH/r.GROUND_WIDTH+1;c++)b=document.getElementById("ground"+c),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D(a).ground)}};var E=function(){return s.goal&&s.goal.successCondition&&s.goal.successCondition()?(r.result=p.SUCCESS,!0):s.goal&&s.goal.failureCondition&&s.goal.failureCondition()?(r.result=p.FAILURE,!0):!1}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../templates/AppView.jsx":"/home/ubuntu/staging/apps/build/js/templates/AppView.jsx","../templates/codeWorkspace.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/codeWorkspace.html.ejs","../templates/visualizationColumn.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/visualizationColumn.html.ejs","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./api":"/home/ubuntu/staging/apps/build/js/flappy/api.js","./constants":"/home/ubuntu/staging/apps/build/js/flappy/constants.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/flappy/controls.html.ejs","./locale":"/home/ubuntu/staging/apps/build/js/flappy/locale.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/flappy/visualization.html.ejs"
}],"/home/ubuntu/staging/apps/build/js/flappy/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgFlappy">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/flappy/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n\n<div id="right-button-cell">\n  <button id="rightButton" class="share">\n    <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n  </button>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/flappy/constants.js":[function(a,b,c){"use strict";b.exports={WORKSPACE_BUFFER:20,WORKSPACE_COL_WIDTH:210,WORKSPACE_ROW_HEIGHT:120,AVATAR_HEIGHT:24,AVATAR_WIDTH:34,AVATAR_Y_OFFSET:0}},{}],"/home/ubuntu/staging/apps/build/js/flappy/blocks.js":[function(a,b,c){"use strict";var d=a("./locale"),e=a("../locale"),f=(a("../block_utils"),a("../utils")),g=f.getLodash(),h=a("../StudioApp").singleton,i='"flappy"',j="random",k=function(a,b){var c=a.getTitleValue("VALUE");if(c===j){var d=g(a.VALUES).map(function(a){return a[1]}).reject(function(a){return a===j});c="Flappy.random(["+d+"])"}return"Flappy."+b+"('block_id_"+a.id+"', "+c+");\n"};c.install=function(a,b){function c(a){a!==j&&h.playAudio(f.stripQuotes(a))}var g=b.skin,l=b.isK1,m=a.Generator.get("JavaScript");a.JavaScript=m,a.Blocks.flappy_whenClick={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.clickIcon)):this.appendDummyInput().appendTitle(d.whenClick()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenClickTooltip())}},m.flappy_whenClick=function(){return"\n"},a.Blocks.flappy_whenCollideGround={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.collideGroundIcon)):this.appendDummyInput().appendTitle(d.whenCollideGround()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenCollideGroundTooltip())}},m.flappy_whenCollideGround=function(){return"\n"},a.Blocks.flappy_whenCollideObstacle={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.collideObstacleIcon)):this.appendDummyInput().appendTitle(d.whenCollideObstacle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenCollideObstacleTooltip())}},m.flappy_whenCollideObstacle=function(){return"\n"},a.Blocks.flappy_whenEnterObstacle={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.enterObstacleIcon)):this.appendDummyInput().appendTitle(d.whenEnterObstacle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenEnterObstacleTooltip())}},m.flappy_whenEnterObstacle=function(){return"\n"},a.Blocks.flappy_flap={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(d.flap()).appendTitle(new a.FieldImage(g.flapIcon)):this.appendDummyInput().appendTitle(d.flap()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.flapTooltip())}},m.flappy_flap=function(a){return"Flappy.flap('block_id_"+this.id+"');\n"},a.Blocks.flappy_flap_height={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.flapTooltip())}},a.Blocks.flappy_flap_height.VALUES=[[d.flapRandom(),j],[d.flapVerySmall(),"Flappy.FlapHeight.VERY_SMALL"],[d.flapSmall(),"Flappy.FlapHeight.SMALL"],[d.flapNormal(),"Flappy.FlapHeight.NORMAL"],[d.flapLarge(),"Flappy.FlapHeight.LARGE"],[d.flapVeryLarge(),"Flappy.FlapHeight.VERY_LARGE"]],m.flappy_flap_height=function(a){return k(this,"flap")},a.Blocks.flappy_playSound=Object.defineProperties({WING_FLAP_SOUND:'"sfx_wing"',helpUrl:"",init:function(){this.VALUES=l?this.k1SoundChoices:this.soundChoices;var b=new a.FieldDropdown(this.VALUES,c);b.setValue(this.WING_FLAP_SOUND),l?this.appendDummyInput().appendTitle(e.play()).appendTitle(new a.FieldImage(g.soundIcon)).appendTitle(b,"VALUE"):this.appendDummyInput().appendTitle(b,"VALUE"),this.setHSV(184,1,.74),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.playSoundTooltip())}},{k1SoundChoices:{get:function(){return[[d.soundRandom(),j],[d.soundBounce(),'"wall"'],[d.soundCrunch(),'"wall0"'],[d.soundDie(),'"sfx_die"'],[d.soundHit(),'"sfx_hit"'],[d.soundPoint(),'"sfx_point"'],[d.soundSwoosh(),'"sfx_swooshing"'],[d.soundWing(),this.WING_FLAP_SOUND],[d.soundJet(),'"jet"'],[d.soundCrash(),'"crash"'],[d.soundJingle(),'"jingle"'],[d.soundSplash(),'"splash"'],[d.soundLaser(),'"laser"']]},configurable:!0,enumerable:!0},soundChoices:{get:function(){return[[d.playSoundRandom(),j],[d.playSoundBounce(),'"wall"'],[d.playSoundCrunch(),'"wall0"'],[d.playSoundDie(),'"sfx_die"'],[d.playSoundHit(),'"sfx_hit"'],[d.playSoundPoint(),'"sfx_point"'],[d.playSoundSwoosh(),'"sfx_swooshing"'],[d.playSoundWing(),this.WING_FLAP_SOUND],[d.playSoundJet(),'"jet"'],[d.playSoundCrash(),'"crash"'],[d.playSoundJingle(),'"jingle"'],[d.playSoundSplash(),'"splash"'],[d.playSoundLaser(),'"laser"']]},configurable:!0,enumerable:!0}}),m.flappy_playSound=function(){return k(this,"playSound")},a.Blocks.flappy_incrementPlayerScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(e.score()).appendTitle(new a.FieldImage(g.scoreCard)):this.appendDummyInput().appendTitle(d.incrementPlayerScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementPlayerScoreTooltip())}},m.flappy_incrementPlayerScore=function(){return"Flappy.incrementPlayerScore('block_id_"+this.id+"');\n"},a.Blocks.flappy_endGame={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(e.end()).appendTitle(new a.FieldImage(g.endIcon)):this.appendDummyInput().appendTitle(d.endGame()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.endGameTooltip())}},m.flappy_endGame=function(){return"Flappy.endGame('block_id_"+this.id+"');\n"},a.Blocks.flappy_setSpeed={helpUrl:"",init:function(){if(this.setHSV(312,.32,.62),l){var b=new a.FieldImageDropdown(this.K1_VALUES,63,33);b.setValue(this.K1_VALUES[1][1]),this.appendDummyInput().appendTitle(d.setSpeed()).appendTitle(b,"VALUE")}else{var c=new a.FieldDropdown(this.VALUES);c.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(c,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setSpeedTooltip())}},a.Blocks.flappy_setSpeed.K1_VALUES=[[g.speedSlow,"Flappy.LevelSpeed.SLOW"],[g.speedMedium,"Flappy.LevelSpeed.NORMAL"],[g.speedFast,"Flappy.LevelSpeed.FAST"]],a.Blocks.flappy_setSpeed.VALUES=[[d.speedRandom(),j],[d.speedVerySlow(),"Flappy.LevelSpeed.VERY_SLOW"],[d.speedSlow(),"Flappy.LevelSpeed.SLOW"],[d.speedNormal(),"Flappy.LevelSpeed.NORMAL"],[d.speedFast(),"Flappy.LevelSpeed.FAST"],[d.speedVeryFast(),"Flappy.LevelSpeed.VERY_FAST"]],m.flappy_setSpeed=function(){return k(this,"setSpeed")},a.Blocks.flappy_setGapHeight={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGapHeightTooltip())}},a.Blocks.flappy_setGapHeight.VALUES=[[d.setGapRandom(),j],[d.setGapVerySmall(),"Flappy.GapHeight.VERY_SMALL"],[d.setGapSmall(),"Flappy.GapHeight.SMALL"],[d.setGapNormal(),"Flappy.GapHeight.NORMAL"],[d.setGapLarge(),"Flappy.GapHeight.LARGE"],[d.setGapVeryLarge(),"Flappy.GapHeight.VERY_LARGE"]],m.flappy_setGapHeight=function(){return k(this,"setGapHeight")},a.Blocks.flappy_setBackground={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setBackground()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBackgroundTooltip())}},a.Blocks.flappy_setBackground.VALUES=[[d.setBackgroundRandom(),j],[d.setBackgroundFlappy(),i],[d.setBackgroundNight(),'"night"'],[d.setBackgroundSciFi(),'"scifi"'],[d.setBackgroundUnderwater(),'"underwater"'],[d.setBackgroundCave(),'"cave"'],[d.setBackgroundSanta(),'"santa"']],a.Blocks.flappy_setBackground.K1_CHOICES=[[g.background,i],[g.night.background,'"night"'],[g.scifi.background,'"scifi"'],[g.underwater.background,'"underwater"'],[g.cave.background,'"cave"'],[g.santa.background,'"santa"'],[g.randomPurpleIcon,j]],m.flappy_setBackground=function(){return k(this,"setBackground")},a.Blocks.flappy_setPlayer={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setPlayer()),b=new a.FieldImageDropdown(this.K1_CHOICES,34,24),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPlayerTooltip())}},a.Blocks.flappy_setPlayer.VALUES=[[d.setPlayerRandom(),j],[d.setPlayerFlappy(),i],[d.setPlayerRedBird(),'"redbird"'],[d.setPlayerSciFi(),'"scifi"'],[d.setPlayerUnderwater(),'"underwater"'],[d.setPlayerSanta(),'"santa"'],[d.setPlayerCave(),'"cave"'],[d.setPlayerShark(),'"shark"'],[d.setPlayerEaster(),'"easter"'],[d.setPlayerBatman(),'"batman"'],[d.setPlayerSubmarine(),'"submarine"'],[d.setPlayerUnicorn(),'"unicorn"'],[d.setPlayerFairy(),'"fairy"'],[d.setPlayerSuperman(),'"superman"'],[d.setPlayerTurkey(),'"turkey"']],a.Blocks.flappy_setPlayer.K1_CHOICES=[[g.avatar,i],[g.redbird.avatar,'"redbird"'],[g.scifi.avatar,'"scifi"'],[g.underwater.avatar,'"underwater"'],[g.santa.avatar,'"santa"'],[g.cave.avatar,'"cave"'],[g.shark.avatar,'"shark"'],[g.easter.avatar,'"easter"'],[g.batman.avatar,'"batman"'],[g.submarine.avatar,'"submarine"'],[g.unicorn.avatar,'"unicorn"'],[g.fairy.avatar,'"fairy"'],[g.superman.avatar,'"superman"'],[g.turkey.avatar,'"turkey"'],[g.randomPurpleIcon,j]],m.flappy_setPlayer=function(){return k(this,"setPlayer")},a.Blocks.flappy_setObstacle={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setObstacle()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setObstacleTooltip())}},a.Blocks.flappy_setObstacle.VALUES=[[d.setObstacleRandom(),j],[d.setObstacleFlappy(),i],[d.setObstacleSciFi(),'"scifi"'],[d.setObstacleUnderwater(),'"underwater"'],[d.setObstacleCave(),'"cave"'],[d.setObstacleSanta(),'"santa"'],[d.setObstacleLaser(),'"laser"']],a.Blocks.flappy_setObstacle.K1_CHOICES=[[g.obstacle_bottom_thumb,i],[g.scifi.obstacle_bottom_thumb,'"scifi"'],[g.underwater.obstacle_bottom_thumb,'"underwater"'],[g.cave.obstacle_bottom_thumb,'"cave"'],[g.santa.obstacle_bottom_thumb,'"santa"'],[g.laser.obstacle_bottom_thumb,'"laser"'],[g.randomPurpleIcon,j]],m.flappy_setObstacle=function(){return k(this,"setObstacle")},a.Blocks.flappy_setGround={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setGround()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGroundTooltip())}},a.Blocks.flappy_setGround.VALUES=[[d.setGroundRandom(),j],[d.setGroundFlappy(),i],[d.setGroundSciFi(),'"scifi"'],[d.setGroundUnderwater(),'"underwater"'],[d.setGroundCave(),'"cave"'],[d.setGroundSanta(),'"santa"'],[d.setGroundLava(),'"lava"']],a.Blocks.flappy_setGround.K1_CHOICES=[[g.ground_thumb,i],[g.scifi.ground_thumb,'"scifi"'],[g.underwater.ground_thumb,'"underwater"'],[g.cave.ground_thumb,'"cave"'],[g.santa.ground_thumb,'"santa"'],[g.lava.ground_thumb,'"lava"'],[g.randomPurpleIcon,j]],m.flappy_setGround=function(){return k(this,"setGround")},a.Blocks.flappy_setGravity={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGravityTooltip())}},a.Blocks.flappy_setGravity.VALUES=[[d.setGravityRandom(),j],[d.setGravityVeryLow(),"Flappy.Gravity.VERY_LOW"],[d.setGravityLow(),"Flappy.Gravity.LOW"],[d.setGravityNormal(),"Flappy.Gravity.NORMAL"],[d.setGravityHigh(),"Flappy.Gravity.HIGH"],[d.setGravityVeryHigh(),"Flappy.Gravity.VERY_HIGH"]],m.flappy_setGravity=function(){return k(this,"setGravity")},a.Blocks.flappy_setScore={init:function(){this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(d.setScore()).appendTitle(new a.FieldTextInput("0",a.FieldTextInput.numberValidator),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setScoreTooltip())}},m.flappy_setScore=function(){var a=window.parseInt(this.getTitleValue("VALUE"),10);return"Flappy.setScore('block_id_"+this.id+"', "+a+");\n"},delete a.Blocks.procedures_defreturn,delete a.Blocks.procedures_ifreturn}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./locale":"/home/ubuntu/staging/apps/build/js/flappy/locale.js"}],"/home/ubuntu/staging/apps/build/js/flappy/locale.js":[function(a,b,c){"use strict";b.exports=window.blockly.flappy_locale},{}],"/home/ubuntu/staging/apps/build/js/flappy/api.js":[function(a,b,c){"use strict";var d=a("../StudioApp").singleton;c.FlapHeight={VERY_SMALL:-6,SMALL:-8,NORMAL:-11,LARGE:-13,VERY_LARGE:-15},c.LevelSpeed={VERY_SLOW:1,SLOW:3,NORMAL:4,FAST:6,VERY_FAST:8},c.GapHeight={VERY_SMALL:65,SMALL:75,NORMAL:100,LARGE:125,VERY_LARGE:150},c.Gravity={VERY_LOW:.5,LOW:.75,NORMAL:1,HIGH:1.25,VERY_HIGH:1.5},c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setScore=function(a,b){d.highlight(a),Flappy.playerScore=b,Flappy.displayScore()},c.setGravity=function(a,b){d.highlight(a),Flappy.gravity=b},c.setGround=function(a,b){d.highlight(a),Flappy.setGround(b)},c.setObstacle=function(a,b){d.highlight(a),Flappy.setObstacle(b)},c.setPlayer=function(a,b){d.highlight(a),Flappy.setPlayer(b)},c.setGapHeight=function(a,b){d.highlight(a),Flappy.setGapHeight(b)},c.setBackground=function(a,b){d.highlight(a),Flappy.setBackground(b)},c.setSpeed=function(a,b){d.highlight(a),Flappy.SPEED=b},c.playSound=function(a,b){d.highlight(a),d.playAudio(b)},c.flap=function(a,b){d.highlight(a),Flappy.flap(b)},c.endGame=function(a){d.highlight(a),Flappy.gameState=Flappy.GameStates.ENDING},c.incrementPlayerScore=function(a){d.highlight(a),Flappy.playerScore++,Flappy.displayScore()}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js"}]},{},["/home/ubuntu/staging/apps/build/js/flappy/main.js"]);