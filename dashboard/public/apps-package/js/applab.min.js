require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({20:[function(a){(function(b){var c=a("../appMain");window.Applab=a("./applab"),"undefined"!=typeof b&&(b.Applab=window.Applab);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.applabMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Applab,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":5,"./applab":11,"./blocks":12,"./levels":19,"./skins":22}],22:[function(a,b,c){var d=a("../skins"),e={applab:{}};c.load=function(a,b){{var c=d.load(a,b);e[c.id]}return c}},{"../skins":206}],19:[function(a,b){var c=a("../../locale/current/applab"),d=a("../utils"),e=a("../block_utils"),f=e.createToolbox,g=e.blockOfType,h=e.createCategory,i=b.exports={};i.simple={requiredBlocks:[],scale:{snapRadius:2},freePlay:!0,toolbox:f('<block type="applab_container" inline="true">         <value name="ID"><block type="text"><title name="TEXT">id</title></block></value>         <value name="HTML"><block type="text"><title name="TEXT">html</title></block></value></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},i.custom={sliderSpeed:.95,codeFunctions:{onEvent:null,button:null,textInput:null,textLabel:null,dropdown:null,getText:null,setText:null,checkbox:null,radioButton:null,getChecked:null,setChecked:null,image:null,getImageURL:null,setImageURL:null,playSound:null,showElement:null,hideElement:null,deleteElement:null,setPosition:null,write:null,getXPosition:null,getYPosition:null,createCanvas:null,setActiveCanvas:null,line:null,circle:null,rect:null,setStrokeWidth:null,setStrokeColor:null,setFillColor:null,drawImage:null,getImageData:null,putImageData:null,clearCanvas:null,getRed:null,getGreen:null,getBlue:null,getAlpha:null,setRed:null,setGreen:null,setBlue:null,setAlpha:null,setRGB:null,startWebRequest:null,setKeyValue:null,getKeyValue:null,createRecord:null,readRecords:null,updateRecord:null,deleteRecord:null,getUserId:null,moveForward:null,moveBackward:null,move:null,moveTo:null,dot:null,turnRight:null,turnLeft:null,turnTo:null,arcRight:null,arcLeft:null,getX:null,getY:null,getDirection:null,penUp:null,penDown:null,penWidth:null,penColor:null,show:null,hide:null,speed:null,forLoop_i_0_4:null,ifBlock:null,ifElseBlock:null,whileBlock:null,setTimeout:null,clearTimeout:null,setInterval:null,clearInterval:null,getTime:null,addOperator:null,subtractOperator:null,multiplyOperator:null,divideOperator:null,equalityOperator:null,inequalityOperator:null,greaterThanOperator:null,lessThanOperator:null,andOperator:null,orOperator:null,notOperator:null,randomNumber_max:null,randomNumber_min_max:null,mathRound:null,mathAbs:null,mathMax:null,mathMin:null,declareAssign_x:null,assign_x:null,declareAssign_x_array_1_4:null,declareAssign_x_prompt:null,"console.log":null,functionParams_none:null,functionParams_n:null,callMyFunction:null,callMyFunction_n:null,"return":null}},i.ec_simple=d.extend(i.custom,{freePlay:!0,editCode:!0,appWidth:320,appHeight:480}),i.full_sandbox={scrollbars:!0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,freePlay:!0,toolbox:f(h(c.catActions(),'<block type="applab_createHtmlBlock" inline="true">           <value name="ID"><block type="text"><title name="TEXT">id</title></block></value>           <value name="HTML"><block type="text"><title name="TEXT">html</title></block></value></block>')+h(c.catControl(),g("controls_whileUntil")+'<block type="controls_for">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                           <value name="BY">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block>'+g("controls_flow_statements"))+h(c.catLogic(),g("controls_if")+g("logic_compare")+g("logic_operation")+g("logic_negate")+g("logic_boolean"))+h(c.catMath(),g("math_number")+'<block type="math_change">                           <value name="DELTA">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block><block type="math_random_int">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">100</title>                             </block>                           </value>                         </block>'+g("math_arithmetic"))+h(c.catText(),g("text")+g("text_join")+'<block type="text_append">                           <value name="TEXT">                             <block type="text"></block>                           </value>                         </block>')+h(c.catVariables(),"","VARIABLE")+h(c.catProcedures(),"","PROCEDURE")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'}},{"../../locale/current/applab":254,"../block_utils":27,"../utils":252}],11:[function(a,b){"use strict";function c(){Y.timeoutFailureTick=A.timeoutFailureTick||1/0,Y.minWorkspaceHeight=A.minWorkspaceHeight,Y.softButtons_=A.softButtons||{},Y.appWidth=A.appWidth||fb,Y.appHeight=A.appHeight||gb;for(var a in A.scale)Y.scale[a]=A.scale[a]}function d(a,b,c){if(2===a.length)for(var d=b.length-1,e=0;d>=e;e++){if(-1!==a.item(1).indexOf("(min-height: "+(b[e]+1)+"px)")){a.mediaText=0===e?a.item(0)+", screen and (min-height: "+(c[e]+1)+"px)":a.item(0)+", screen and (min-height: "+(c[e]+1)+"px) and (max-height: "+c[e-1]+"px)";break}if(a.item(1)==="screen and (max-height: "+b[d]+"px)"){a.mediaText=a.item(0)+", screen and (max-height: "+c[d]+"px)";break}}}function e(a){var b=1,c=[1,.875,.75,.625,.5],e=c.slice(0);if(eb!==Y.appWidth){b=eb/Y.appWidth;for(var f=0;f<e.length;f++)e[f]*=b}for(var g=Y.appHeight*b,h=[600,550,500,450],i=h.slice(0),j=0;j<i.length;j++)i[j]+=a.offsetTop+(g-gb)*c[j];for(var k=document.styleSheets,l=0;l<k.length;l++)if(k[l].href&&-1!==k[l].href.indexOf("applab.css")){for(var m=k[l].cssRules||k[l].rules,n=0,o=0,p=1+e.length,q=0;q<m.length&&p>n;q++){var r=m[q].cssRules||m[q].rules;if("div#visualization"===m[q].selectorText)m[q].style.cssText="height: "+g+"px; width: "+eb+"px;",n++;else if(m[q].media&&r){d(m[q].media,h,i);for(var s=0,t=e[o],u=0;u<r.length&&8>s;u++)"div#visualization.responsive"===r[u].selectorText?(r[u].style.cssText="max-height: "+Y.appHeight*t+"px; max-width: "+Y.appWidth*t+"px;",s++):"div#visualizationColumn.responsive"===r[u].selectorText?(r[u].style.cssText="max-width: "+Y.appWidth*t+"px;",s++):"div#visualizationColumn.responsive.with_padding"===r[u].selectorText?(r[u].style.cssText="max-width: "+(Y.appWidth*t+2)+"px;",s++):"div#codeWorkspace"===r[u].selectorText?(r[u].style.cssText="left: "+Y.appWidth*t+"px;",s++):"div#visualizationResizeBar"===r[u].selectorText?(r[u].style.cssText="left: "+Y.appWidth*t+"px;",s++):"html[dir='rtl'] div#codeWorkspace"===r[u].selectorText?(r[u].style.cssText="right: "+Y.appWidth*t+"px;",s++):"html[dir='rtl'] div#visualizationResizeBar"===r[u].selectorText?(r[u].style.cssText="right: "+Y.appWidth*t+"px;",s++):"div#visualization.responsive > *"===r[u].selectorText&&(r[u].style.cssText="-webkit-transform: scale("+t+");-ms-transform: scale("+t+");transform: scale("+t+");",s++);s&&(o++,n++)}}break}return e}function f(a){return 300*Math.pow(1-a,2)}function g(){var a=Y.scale.stepSpeed;return Y.speedSlider&&(a=f(Y.speedSlider.getValue())),a}function h(){window.setTimeout(Y.onTick,g())}function i(a){console.log&&console.log(a);var b=document.getElementById("debug-output");b&&(b.textContent.length>0?b.textContent+="\n"+a:b.textContent=a,b.scrollTop=b.scrollHeight)}function j(a,b,c){var d=b+": ";void 0!==c&&(d+="Line: "+c+": "),d+=a,i(d),void 0!==c&&V.addRuntimeAnnotation(b,c,a)}function k(a){switch(typeof a){case"string":case"number":case"boolean":case"undefined":return!0;case"object":return null===a;default:return!1}}function l(a,b,c,d,e,f){var g="validated_type_"+c;if("undefined"==typeof a[g]){var h;if("color"===e){if(h="string"==typeof d){var i=new U(d);h=i.ok}}else"uistring"===e?h="string"==typeof d||"number"==typeof d||"boolean"==typeof d:"function"===e?h="object"==typeof d&&"function"===d.type:"number"===e?h="number"==typeof d||"string"==typeof d&&!isNaN(d):"primitive"===e?(h=k(d),h||(e="string, number, boolean, undefined or null")):h=typeof d===e;if(h=h||f===ib&&"undefined"==typeof d,!h){var l=1+F.getNearestUserCodeLine(Y.interpreter,Y.cumulativeLength,Y.userCodeStartOffset,Y.userCodeLength),m=b+"() "+c+" parameter value ("+d+") is not a "+e+".";j(m,bb.WARNING,l)}a[g]=h}}function m(a,b,c,d,e,f,g){var h="validated_type_"+c,i="validated_range_"+c;if(l(a,b,c,d,e),a[h]&&"undefined"==typeof a[i]){var k="undefined"==typeof f||d>=f;if(k&&(k="undefined"==typeof g||g>=d),!k){var m=1+F.getNearestUserCodeLine(Y.interpreter,Y.cumulativeLength,Y.userCodeStartOffset,Y.userCodeLength),n=b+"() "+c+" parameter value ("+d+") is not in the expected range.";j(n,bb.WARNING,m)}a[i]=k}}function n(a,b){var c="validated_active_canvas";if(!a||"undefined"==typeof a[c]){var d=Boolean(Y.activeCanvas);if(!d){var e=1+F.getNearestUserCodeLine(Y.interpreter,Y.cumulativeLength,Y.userCodeStartOffset,Y.userCodeLength),f=b+"() called without an active canvas. Call createCanvas() first.";j(f,bb.WARNING,e)}a&&(a[c]=d)}}function o(a,b,c,d,e,f){var g="validated_type_"+d,h="validated_id_"+d;if(l(b,c,d,e,"string"),b[g]&&"undefined"==typeof b[h]){var i=document.getElementById(e),k=Boolean(i&&a.contains(i)),m=k==f;if(!m){var n=1+F.getNearestUserCodeLine(Y.interpreter,Y.cumulativeLength,Y.userCodeStartOffset,Y.userCodeLength),o=c+"() "+d+" parameter refers to an id ("+e+") which "+(k?"already exists.":"does not exist.");j(o,bb.WARNING,n)}b[h]=m}}function p(a){if(a.keyCode==Q.ENTER){var b=a.target.textContent;if(a.target.textContent="",i("> "+b),Y.interpreter){var c=Y.interpreter.getScope(),d=new window.Interpreter(b);d.populateScope_(d.ast,c),d.stateStack=[{node:d.ast,scope:c,thisExpression:c}];try{d.run(),i("< "+String(d.value))}catch(e){i("< "+String(e))}}else i("< (not running)")}}function q(a,b){if(D.editor.currentlyUsingBlocks){var c={color:"#FFFF22"};D.editor.clearLineMarks(),D.editor.markLine(a,c)}else{var d=D.editor.aceEditor.getSelection(),e=d.getRange();e.start.row=a,e.start.col=b,e.end.row=a,e.end.col=b+1,d.setSelectionRange(e)}}function r(a,b){!b&&a instanceof SyntaxError&&(b=a.loc.line-Y.userCodeLineOffset,q(b-1,a.loc.column)),!b&&Y.interpreter&&(b=1+F.getNearestUserCodeLine(Y.interpreter,Y.cumulativeLength,Y.userCodeStartOffset,Y.userCodeLength)),j(String(a),bb.ERROR,b),Y.executionError=a,Y.onPuzzleComplete()}function s(){try{Y.interpreter.step()}catch(a){return a}}function t(a,b,c){for(var d=0;d<M.blocks.length;d++){var e=M.blocks[d];if(e.dontMarshal){var f=c[e.func],g=F.makeNativeMemberFunction({interpreter:a,nativeFunc:f,nativeParentObj:c,dontMarshal:!0});a.setProperty(b,e.func,a.createNativeFunction(g))}}}function u(){var a=document.getElementById("turtleCanvas");if(!a){Y.createCanvas({elementId:"turtleCanvas",turtleCanvas:!0}),a=document.getElementById("turtleCanvas"),Y.turtle.visible=!0;var b=document.getElementById("divApplab"),c=document.createElement("img");c.src=D.assetUrl("media/applab/723-location-arrow-toolbar-48px-centered.png"),c.id="turtleImage",v(c),c.ondragstart=function(){return!1},b.appendChild(c)}return a.getContext("2d")}function v(a){a||(a=document.getElementById("turtleImage")),a.style.left=Y.turtle.x-qb/2+"px",a.style.top=Y.turtle.y-rb/2+"px";var b=Y.turtle.heading+sb,c="rotate("+b+"deg)";a.style.transform=c,a.style.msTransform=c,a.style.webkitTransform=c}function w(a){u();var b=document.getElementById("turtleImage");b.style.visibility=a?"visible":"hidden"}function x(){var a=arguments[0],b=x.cache;return b[a]&&b.hasOwnProperty(a)||(b[a]=x.parse(a)),x.format.call(null,b[a],arguments)}function y(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function z(a,b){return Array(b+1).join(a)}a("./acemode/mode-javascript_codeorg");var A,B,C,D=a("../StudioApp").singleton,E=(a("../../locale/current/common"),a("../../locale/current/applab")),F=(a("../skins"),a("../codegen")),G=a("./api"),H=a("./dontMarshalApi"),I=(a("./blocks"),a("../templates/page.html.ejs")),J=a("../dom"),K=(a("../xml").parseElement,a("../utils")),L=a("../dropletUtils"),M=a("./dropletConfig"),N=a("../slider"),O=a("./appStorage"),P=a("../constants"),Q=P.KeyCodes,R=K.getLodash(),S=K.getHammer(),T=a("../timeoutList"),U=a("./rgbcolor.js"),V=a("./acemode/annotationList"),W=D.ResultType,X=D.TestResults,Y=b.exports;D.setCheckForEmptyBlocks(!0);var Z=1e4;Y.scale={snapRadius:1,stepSpeed:0};var _={text:E.shareApplabTwitter(),hashtag:"ApplabCode"},ab={RUN:0,IN:1,OVER:2,OUT:3},bb={WARNING:"WARNING",ERROR:"ERROR"},cb=70,db=400,eb=400,fb=400,gb=400,hb=function(){var a=document.getElementById("divApplab");a.style.width=Y.appWidth+"px",a.style.height=Y.appHeight+"px"},ib=!0;Y.getCode=function(){return D.editor.getValue()},Y.getHtml=function(){return Y.levelHtml},Y.onTick=function(){Y.running&&(Y.tickCount++,h(),Y.interpreter?Y.executeInterpreter():Y.executeNativeJS(),tb()&&Y.onPuzzleComplete())},Y.executeNativeJS=function(){if(1===Y.tickCount)try{Y.whenRunFunc(D,G,Y.Globals)}catch(a){}},Y.executeInterpreter=function(a){Y.runUntilCallbackReturn=a,a&&delete Y.lastCallbackRetVal,Y.seenEmptyGetCallbackDuringExecution=!1,Y.seenReturnFromCallbackDuringExecution=!1;var b=Y.paused&&Y.nextStep===ab.IN&&1===Y.tickCount,c=0===g();if(Y.paused)switch(Y.nextStep){case ab.RUN:return;case ab.OUT:if(Y.interpreter&&"undefined"==typeof Y.stepOutToStackDepth){Y.stepOutToStackDepth=0;for(var d=Y.maxValidCallExpressionDepth;d>0;d--)if(Y.callExpressionSeenAtDepth[d]){Y.stepOutToStackDepth=d;break}}}for(var e,f,h=!1,i=!1,j=!1,k=D.editor.aceEditor.getSession(),l=0;Z>l||j;l++){c=0===g();var m=D.hideSource||c&&!Y.paused?F.getUserCodeLine:F.selectCurrentCode;if(i&&!j||h&&!j&&!c||Y.seenEmptyGetCallbackDuringExecution||a&&Y.seenReturnFromCallbackDuringExecution)break;if(f=m(Y.interpreter,Y.cumulativeLength,Y.userCodeStartOffset,Y.userCodeLength,D.editor),e=-1!==f,e&&!j&&(b||f!==Y.stoppedAtBreakpointRow&&F.isAceBreakpointRow(k,f)))Y.paused?(Y.nextStep=ab.RUN,Y.updatePauseUIState()):Y.onPauseContinueButton(),Y.stoppedAtBreakpointRow=f,Y.stoppedAtBreakpointStackDepth=Y.interpreter.stateStack.length,i=!0,j=F.isNextStepSafeWhileUnwinding(Y.interpreter);else{e&&f!==Y.stoppedAtBreakpointRow&&Y.interpreter.stateStack.length<=Y.stoppedAtBreakpointStackDepth&&(delete Y.stoppedAtBreakpointRow,delete Y.stoppedAtBreakpointStackDepth),e&&j&&(Y.stoppedAtBreakpointRow=f,Y.stoppedAtBreakpointStackDepth=Y.interpreter.stateStack.length);var n=s();if(n)return void r(n,e?f+1:void 0);h=h||e&&Y.interpreter.stateStack[0]&&Y.interpreter.stateStack[0].done;for(var o=Y.interpreter.stateStack.length,p=o+1;p<=Y.maxValidCallExpressionDepth;p++)Y.callExpressionSeenAtDepth[p]=!1;if(Y.maxValidCallExpressionDepth=o,e&&"CallExpression"===Y.interpreter.stateStack[0].node.type&&(Y.callExpressionSeenAtDepth[o]=!0),Y.paused){if(e&&"CallExpression"===Y.interpreter.stateStack[0].node.type&&"undefined"==typeof Y.firstCallStackDepthThisStep&&(Y.firstCallStackDepthThisStep=o),h=h||e&&"BlockStatement"===Y.interpreter.stateStack[0].node.type,!h&&e&&Y.nextStep===ab.IN&&o>Y.firstCallStackDepthThisStep&&(i=!0),h||i){var q=j;j=F.isNextStepSafeWhileUnwinding(Y.interpreter),q&&!j&&(f=m(Y.interpreter,Y.cumulativeLength,Y.userCodeStartOffset,Y.userCodeLength,D.editor),e=-1!==f,e||(j=!0))}if((i||h)&&!j)if(Y.nextStep===ab.OUT&&o>Y.stepOutToStackDepth);else if(!(Y.nextStep===ab.OVER&&"undefined"!=typeof Y.firstCallStackDepthThisStep&&o>Y.firstCallStackDepthThisStep)){Y.nextStep=ab.RUN,Y.updatePauseUIState(),e&&(Y.stoppedAtBreakpointRow=f,Y.stoppedAtBreakpointStackDepth=o),delete Y.stepOutToStackDepth,delete Y.firstCallStackDepthThisStep,document.getElementById("spinner").style.visibility="hidden";break}}}}i&&c&&F.selectCurrentCode(Y.interpreter,Y.cumulativeLength,Y.userCodeStartOffset,Y.userCodeLength,D.editor)},Y.initReadonly=function(a){B=a.skin,A=a.level,c(),D.initReadonly(a)},Y.init=function(b){Y.clearEventHandlersKillTickLoop(),B=b.skin,A=b.level,C={applabUserId:b.applabUserId,isAdmin:b.isAdmin===!0},c(),D.hideSource&&(b.level.sliderSpeed=1),J.isMobile()&&b.hideSource&&(eb=Y.appWidth),Y.vizScaleFactors=e(document.getElementById(b.containerId));var d=!b.hideSource&&b.level.editCode,f=!b.hideSource&&b.level.editCode,g=!b.hideSource&&b.level.editCode,h=a("./controls.html.ejs")({assetUrl:D.assetUrl,showSlider:d,finishButton:!0}),i=a("./extraControlRows.html.ejs")({assetUrl:D.assetUrl,debugButtons:f,debugConsole:g}),j=a("./designProperties.html.ejs")({tagName:null}),k=a("./designModeBox.html.ejs")({designProperties:j});b.html=I({assetUrl:D.assetUrl,data:{localeDirection:D.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:h,extraControlRows:i,blockUsed:void 0,idealBlockNumber:void 0,editCode:A.editCode,blockCounterClass:"block-counter-default",pinWorkspaceToBottom:!0,hasDesignMode:C.isAdmin,designModeBox:k}}),b.loadAudio=function(){D.loadAudio(B.winSound,"win"),D.loadAudio(B.failureSound,"failure")},b.afterInject=function(){D.isUsingBlockly()&&(Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=Y.scale.snapRadius),hb()},b.afterEditorReady=function(){var a=D.editor.aceEditor;a&&a.on("guttermousedown",function(a){var b=a.domEvent.target;if(-1!=b.className.indexOf("ace_gutter-cell")){var c=a.getDocumentPosition().row,d=a.editor.session.getBreakpoints();d[c]?a.editor.session.clearBreakpoint(c):a.editor.session.setBreakpoint(c),a.stop()}}),D.share&&window.setTimeout(D.runButtonClick.bind(D),0)},b.twitter=_,b.makeYourOwn=!1,b.varsInGlobals=!0,b.noButtonsBelowOnMobileShare=!0,b.dropletConfig=M,b.pinWorkspaceToBottom=!0,b.vizAspectRatio=Y.appWidth/Y.appHeight,b.nativeVizWidth=Y.appWidth,b.mobileNoPaddingShareWidth=b.level.appWidth,Y.levelHtml=A.levelHtml||"",D.init(b);var l=document.getElementById("visualization"),m=document.getElementById("visualizationColumn");if(b.noPadding||(l.className+=" with_padding",m.className+=" with_padding"),(b.embed||b.hideSource)&&(l.style.width=Y.appWidth+"px",l.style.height=Y.appHeight+"px",m.style.maxWidth=l.offsetWidth+"px"),A.editCode){var n=document.getElementById("applab-slider");n&&(Y.speedSlider=new N(10,35,130,n),b.level.sliderSpeed&&Y.speedSlider.setValue(b.level.sliderSpeed));var o=document.getElementById("debug-input");o&&o.addEventListener("keydown",p)}var q=document.getElementById("debugResizeBar");q&&(q.addEventListener("mousedown",Y.onMouseDownDebugResizeBar),document.body.addEventListener("mouseup",Y.onMouseUpDebugResizeBar));var r=document.getElementById("finishButton");if(J.addClickTouchEvent(r,Y.onPuzzleComplete),A.editCode){var s=document.getElementById("pauseButton"),t=document.getElementById("continueButton"),u=document.getElementById("stepInButton"),v=document.getElementById("stepOverButton"),w=document.getElementById("stepOutButton");s&&t&&u&&v&&w&&(J.addClickTouchEvent(s,Y.onPauseContinueButton),J.addClickTouchEvent(t,Y.onPauseContinueButton),J.addClickTouchEvent(u,Y.onStepInButton),J.addClickTouchEvent(v,Y.onStepOverButton),J.addClickTouchEvent(w,Y.onStepOutButton));var x=document.getElementById("viewDataButton");if(x){var y=D.runButtonClickWrapper.bind(D,Y.onViewData),z=R.debounce(y,250,!0);J.addClickTouchEvent(x,z)}var E=document.getElementById("designModeButton");E&&J.addClickTouchEvent(E,Y.onDesignModeButton);var F=document.getElementById("codeModeButton");F&&J.addClickTouchEvent(F,Y.onCodeModeButton);var G=document.getElementById("designModeClear");if(G&&J.addClickTouchEvent(G,Y.onDesignModeClear),window.$){$(".new-design-element").draggable({containment:"#codeApp",helper:"clone",appendTo:"#codeApp",revert:"invalid",zIndex:2,start:function(){D.resetButtonClick()}});var H=eb/Y.appWidth,K=20;$("#visualization").droppable({accept:".new-design-element",drop:function(a,b){var c=b.draggable[0].dataset.elementType,d=b.position.left/H;d=Math.round(d-d%K);var e=b.position.top/H;e=Math.round(e-e%K),Y.createElement(c,d,e)}})}}},Y.onMouseDownDebugResizeBar=function(a){"debugResizeBar"===a.srcElement.id&&(Y.draggingDebugResizeBar=!0,document.body.addEventListener("mousemove",Y.onMouseMoveDebugResizeBar),a.preventDefault())},Y.onMouseMoveDebugResizeBar=function(a){var b=document.getElementById("debugResizeBar"),c=document.getElementById("codeApp"),d=document.getElementById("codeTextbox"),e=document.getElementById("debug-area"),f=b.getBoundingClientRect(),g=parseInt(window.getComputedStyle(c).bottom,10)-f.height/2,h=Math.max(cb,Math.min(db,window.innerHeight-a.pageY-g));d.style.bottom=h+"px",e.style.height=h+"px",d.style.minHeight="calc(50% - 21px)",e.style.maxHeight="calc(50% - 21px)",K.fireResizeEvent()},Y.onMouseUpDebugResizeBar=function(){Y.draggingDebugResizeBar&&(document.body.removeEventListener("mousemove",Y.onMouseMoveDebugResizeBar),Y.draggingDebugResizeBar=!1)};var jb={BUTTON:"button",LABEL:"label",INPUT:"input"};Y.ElementType=jb,Y.nextElementIdMap={},Y.getUnusedElementId=function(a){for(var b=$("#divApplab"),c=Y.nextElementIdMap[a]||1;0!==b.find("#"+a+c).length;)c++;return Y.nextElementIdMap[a]=c+1,a+c},Y.createElement=function(a,b,c){var d=document.createElement(a);switch(a){case jb.BUTTON:d.appendChild(document.createTextNode("Button")),d.style.margin=0;break;case jb.LABEL:d.appendChild(document.createTextNode("text")),d.style.margin="10px";break;case jb.INPUT:d.style.margin="10px";break;default:throw"unrecognized element type "+a}d.id=Y.getUnusedElementId(a),d.style.position="absolute",d.style.left=b+"px",d.style.top=c+"px";var e=document.getElementById("divApplab");e.appendChild(d),Y.makeDraggable($(d)),Y.levelHtml=Y.serializeToLevelHtml()},Y.makeDraggable=function(a){var b=20;a.draggable({cancel:!1,drag:function(a,c){var d=Y.getVizScaleFactor(),e=c.position.left-c.originalPosition.left,f=(c.originalPosition.left+e)/d,g=c.position.top-c.originalPosition.top,h=(c.originalPosition.top+g)/d,i=$("#divApplab"),j=i.width()-c.helper.outerWidth(!0),k=i.height()-c.helper.outerHeight(!0);f=Math.min(f,j),f=Math.max(f,0),h=Math.min(h,k),h=Math.max(h,0),f-=f%b,h-=h%b,c.position.left=f,c.position.top=h},stop:function(){Y.levelHtml=Y.serializeToLevelHtml()}})},Y.getVizScaleFactor=function(){var a=$("body").width(),b=[1150,1100,1050,1e3,0];if(b.length!==Y.vizScaleFactors.length)throw"Wrong number of elements in Applab.vizScaleFactors "+Y.vizScaleFactors;for(var c=0;c<b.length;c++)if(a>b[c])return Y.vizScaleFactors[c];throw"Unexpected body width: "+a},Y.onDivApplabClick=function(a){!window.$||$("#designModeButton").is(":visible")||$("#resetButton").is(":visible")||(a.preventDefault(),Y.editElementProperties(a.target))},Y.editElementProperties=function(b){var c=b.tagName.toLowerCase();if(!Y.isValidElementType(c))return void Y.clearProperties();var d=document.getElementById("design-properties");d.innerHTML=a("./designProperties.html.ejs")({tagName:c,props:{id:b.id,left:b.style.left,top:b.style.top,width:b.style.width,height:b.style.height,text:$(b).text()}});var e=document.getElementById("savePropertiesButton"),f=Y.onSavePropertiesButton.bind(this,b);e&&J.addClickTouchEvent(e,f);var g=document.getElementById("deletePropertiesButton"),h=Y.onDeletePropertiesButton.bind(this,b);g&&J.addClickTouchEvent(g,h)},Y.clearProperties=function(){var b=document.getElementById("design-properties");b.innerHTML=a("./designProperties.html.ejs")({tagName:null})},Y.isValidElementType=function(a){for(var b in Y.ElementType)if(a===Y.ElementType[b])return!0;return!1},Y.onSavePropertiesButton=function(a){a.id=document.getElementById("design-property-id").value,a.style.left=document.getElementById("design-property-left").value,a.style.top=document.getElementById("design-property-top").value,a.style.width=document.getElementById("design-property-width").value,a.style.height=document.getElementById("design-property-height").value,$(a).text(document.getElementById("design-property-text").value),Y.levelHtml=Y.serializeToLevelHtml()},Y.onDeletePropertiesButton=function(a){a.parentNode.removeChild(a),Y.levelHtml=Y.serializeToLevelHtml(),Y.clearProperties()},Y.serializeToLevelHtml=function(){var a=new XMLSerializer,b=document.getElementById("divApplab"),c=b.cloneNode(!0);return $(c).find("*").removeAttr("class"),a.serializeToString(c)},Y.parseFromLevelHtml=function(a,b){if(Y.levelHtml){var c=$.parseHTML(Y.levelHtml),d=$(c).children();d.appendTo(a),b&&Y.makeDraggable(d)}},Y.clearEventHandlersKillTickLoop=function(){Y.whenRunFunc=null,Y.running=!1,Y.tickCount=0;var a=document.getElementById("spinner");a&&(a.style.visibility="hidden");var b=document.getElementById("pauseButton"),c=document.getElementById("continueButton"),d=document.getElementById("stepInButton"),e=document.getElementById("stepOverButton"),f=document.getElementById("stepOutButton");b&&c&&d&&e&&f&&(b.style.display="inline-block",b.disabled=!0,c.style.display="none",d.disabled=!0,e.disabled=!0,f.disabled=!0)},D.reset=function(){var a;Y.clearEventHandlersKillTickLoop();var b=0;for(a=0;a<Y.softButtons_.length;a++)document.getElementById(Y.softButtons_[a]).style.display="inline",b++;if(b){var c=document.getElementById("soft-buttons");c.className="soft-buttons-"+b}delete Y.activeCanvas,Y.turtle={},Y.turtle.heading=0,Y.turtle.x=Y.appWidth/2,Y.turtle.y=Y.appHeight/2,T.clearTimeouts(),T.clearIntervals();for(var d=document.getElementById("divApplab");d.firstChild;)d.removeChild(d.firstChild);var e=d.cloneNode(!0);d.parentNode.replaceChild(e,d);var f=window.$&&$("#codeModeButton").is(":visible");if(Y.parseFromLevelHtml(e,f),e.addEventListener("click",Y.onDivApplabClick),A.goal&&(A.goal.successState={}),A.editCode){Y.paused=!1,Y.nextStep=ab.RUN,delete Y.stepOutToStackDepth,delete Y.firstCallStackDepthThisStep,delete Y.stoppedAtBreakpointRow,delete Y.stoppedAtBreakpointStackDepth,Y.maxValidCallExpressionDepth=0,Y.callExpressionSeenAtDepth=[];var g=document.getElementById("pauseButton"),h=document.getElementById("continueButton"),i=document.getElementById("stepInButton"),j=document.getElementById("stepOverButton"),k=document.getElementById("stepOutButton");g&&h&&i&&j&&k&&(g.style.display="inline-block",g.disabled=!0,h.style.display="none",i.disabled=!1,j.disabled=!0,k.disabled=!0);var l=document.getElementById("spinner");l&&(l.style.visibility="hidden");var m=document.getElementById("debug-output");m&&(m.value="");var n=document.getElementById("debug-input");n&&(n.textContent="")}Y.Globals={},Y.eventQueue=[],Y.executionError=null,Y.interpreter=null},D.runButtonClickWrapper=function(a){dashboard.currentApp&&dashboard.currentApp.id?(window.$&&$(window).trigger("run_button_pressed"),a()):window.$?$(window).trigger("run_button_pressed",a):a()},D.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),D.toggleRunReset("reset"),D.isUsingBlockly()&&Blockly.mainBlockSpace.traceOn(!0),D.reset(!1),D.attempts++,Y.execute(),A.freePlay&&!D.hideSource){var c=document.getElementById("share-cell");c.className="share-cell-enabled";var d=document.getElementById("design-cell");d&&(d.className="design-cell-enabled")}};var kb=function(){Y.waitingForReport||D.displayFeedback({app:"applab",skin:B.id,feedbackType:Y.testResults,response:Y.response,level:A,showingSharing:A.freePlay,feedbackImage:Y.feedbackImage,twitter:_,saveToGalleryUrl:A.freePlay&&Y.response&&Y.response.save_to_gallery_url,appStrings:{reinfFeedbackMsg:E.reinfFeedbackMsg(),sharingText:E.shareGame()}})};Y.onReportComplete=function(a){Y.response=a,Y.waitingForReport=!1,kb()};var lb=function(a){var b=Blockly.Generator.blockSpaceToCode("JavaScript",a);try{F.evalWith(b,{studioApp:D,Applab:G,Globals:Y.Globals})}catch(c){}},mb=function(){var a=Y.eventQueue.shift();return"undefined"==typeof a&&(Y.seenEmptyGetCallbackDuringExecution=!0),a},nb=function(a){0===Y.eventQueue.length&&(Y.seenReturnFromCallbackDuringExecution=!0,Y.lastCallbackRetVal=a),Y.runUntilCallbackReturn||"undefined"==typeof Y.lastCallbackRetVal||(i("Function passed to onEvent() has taken too long - the return value was ignored."),0!==g()&&i("  (try moving the speed slider to its maximum value)"))},ob={};ob.log=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=F.marshalInterpreterToNative(Y.interpreter,arguments[b]);var c="",d=a[0];if("string"==typeof d||d instanceof String)c=wb(d,a.slice(1));else for(b=0;b<a.length;b++)c+=a[b].toString(),b<a.length-1&&(c+="\n");i(c)};var pb={};pb.parse=function(a){return JSON.parse(a)},pb.stringify=function(a){return JSON.stringify(a)},Y.execute=function(){Y.result=W.UNSET,Y.testResults=X.NO_TESTS_RUN,Y.waitingForReport=!1,Y.response=null;D.reset(!1);var a;if(A.editCode){a=L.generateCodeAliases(M,"Applab"),Y.userCodeStartOffset=a.length,Y.userCodeLineOffset=a.split("\n").length-1,a+=D.editor.getValue(),Y.userCodeLength=a.length-Y.userCodeStartOffset,a+="\nwhile (true) { var obj = getCallback(); if (obj) { var ret = obj.fn.apply(null, obj.arguments ? obj.arguments : null);setCallbackRetVal(ret); }}";var b=D.editor.aceEditor.getSession();V.attachToSession(b),Y.cumulativeLength=F.aceCalculateCumulativeLength(b)}else{lb("procedures_defreturn"),lb("procedures_defnoreturn");for(var c=Blockly.mainBlockSpace.getTopBlocks(),d=0;c[d];d++){var e=c[d];if("when_run"===e.type){a=Blockly.Generator.blocksToCode("JavaScript",[e]);break}}}if(a)if(A.editCode){var f=function(a,b){F.initJSInterpreter(a,b,{Applab:G,console:ob,JSON:pb}),t(a,b,H);var c=F.makeNativeMemberFunction({interpreter:a,nativeFunc:mb,maxDepth:5});a.setProperty(b,"getCallback",a.createNativeFunction(c)),c=F.makeNativeMemberFunction({interpreter:a,nativeFunc:nb}),a.setProperty(b,"setCallbackRetVal",a.createNativeFunction(c))};try{Y.interpreter=new window.Interpreter(a,f)}catch(g){r(g)}}else Y.whenRunFunc=F.functionFromCode(a,{StudioApp:D,Applab:G,Globals:Y.Globals});if(A.editCode){var i=document.getElementById("pauseButton"),j=document.getElementById("continueButton"),k=document.getElementById("stepInButton"),l=document.getElementById("stepOverButton"),m=document.getElementById("stepOutButton");i&&j&&k&&l&&m&&(i.style.display="inline-block",i.disabled=!1,j.style.display="none",k.disabled=!0,l.disabled=!0,m.disabled=!0);var n=document.getElementById("spinner");n&&(n.style.visibility="visible")}var o=document.getElementById("divApplab");o.focus(),Y.running=!0,h()},Y.onPauseContinueButton=function(){if(Y.running){Y.paused&&Y.nextStep===ab.RUN?Y.paused=!1:(Y.paused=!0,Y.nextStep=ab.RUN),Y.updatePauseUIState();var a=document.getElementById("stepInButton"),b=document.getElementById("stepOverButton"),c=document.getElementById("stepOutButton");a.disabled=!Y.paused,b.disabled=!Y.paused,c.disabled=!Y.paused}},Y.updatePauseUIState=function(){var a=document.getElementById("pauseButton"),b=document.getElementById("continueButton"),c=document.getElementById("spinner");
a&&b&&c&&(Y.paused&&Y.nextStep===ab.RUN?(a.style.display="none",b.style.display="inline-block",c.style.visibility="hidden"):(a.style.display="inline-block",b.style.display="none",c.style.visibility="visible"))},Y.onStepOverButton=function(){Y.running&&(Y.paused=!0,Y.nextStep=ab.OVER,Y.updatePauseUIState())},Y.onStepInButton=function(){Y.running||(D.runButtonClick(),Y.onPauseContinueButton()),Y.paused=!0,Y.nextStep=ab.IN,Y.updatePauseUIState()},Y.onStepOutButton=function(){Y.running&&(Y.paused=!0,Y.nextStep=ab.OUT,Y.updatePauseUIState())},Y.feedbackImage="",Y.encodedFeedbackImage="",Y.onViewData=function(){window.open("//"+ub()+"/edit-csp-app/"+O.getChannelId(),"_blank")},Y.onDesignModeButton=function(){D.resetButtonClick(),Y.toggleDesignMode(!0)},Y.onCodeModeButton=function(){Y.toggleDesignMode(!1)},Y.onDesignModeClear=function(){document.getElementById("divApplab").innerHTML=Y.levelHtml=""},Y.toggleDesignMode=function(a){var b=document.getElementById("codeModeHeaders");b.style.display=a?"none":"block";var c=document.getElementById("designModeHeaders");c.style.display=a?"block":"none";var d=document.getElementById("codeTextbox");d.style.display=a?"none":"block";var e=document.getElementById("designModeBox");e.style.display=a?"block":"none";var f=document.getElementById("designModeButton");f.style.display=a?"none":"block";var g=document.getElementById("codeModeButton");g.style.display=a?"block":"none";var h=document.getElementById("debug-area");h.style.display=a?"none":"block";var i=$("#divApplab").children();a?Y.makeDraggable(i):i.data("uiDraggable")&&i.draggable("destroy")},Y.onPuzzleComplete=function(){if(Y.executionError?Y.result=W.ERROR:A.freePlay&&(Y.result=W.SUCCESS),Y.clearEventHandlersKillTickLoop(),A.freePlay)Y.testResults=X.FREE_PLAY;else{var a=Y.result===W.SUCCESS;Y.testResults=D.getTestResults(a)}D.playAudio(Y.testResults>=X.FREE_PLAY?"win":"failure");var b;if(A.editCode)b=D.editor.getValue();else{var c=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace);b=Blockly.Xml.domToText(c)}Y.waitingForReport=!0;var d=function(){D.report({app:"applab",level:A.id,result:Y.result===W.SUCCESS,testResult:Y.testResults,program:encodeURIComponent(b),image:Y.encodedFeedbackImage,onComplete:Y.onReportComplete})};"undefined"==typeof document.getElementById("divApplab").toDataURL?d():document.getElementById("divApplab").toDataURL("image/png",{callback:function(a){Y.feedbackImage=a,Y.encodedFeedbackImage=encodeURIComponent(Y.feedbackImage.split(",")[1]),d()}})},Y.executeCmd=function(a,b,c){var d={id:a,name:b,opts:c};return Y.callCmd(d)},Y.callCmd=function(a){var b=!1;return Y[a.name]instanceof Function&&(D.highlight(a.id),b=Y[a.name](a.opts)),b},Y.container=function(a){var b=document.getElementById("divApplab"),c=document.createElement("div");return"undefined"!=typeof a.elementId&&(c.id=a.elementId),c.innerHTML=a.html,Boolean(b.appendChild(c))},Y.write=function(a){return l(a,"write","html",a.html,"uistring"),Y.container(a)},Y.button=function(a){var b=document.getElementById("divApplab");o(b,a,"button","id",a.elementId,!1),l(a,"button","text",a.text,"uistring");var c=document.createElement("button"),d=document.createTextNode(a.text);return c.id=a.elementId,Boolean(c.appendChild(d)&&b.appendChild(c))},Y.image=function(a){l(a,"image","id",a.elementId,"string"),l(a,"image","src",a.src,"string");var b=document.getElementById("divApplab"),c=document.createElement("img");return c.src=a.src,c.id=a.elementId,Boolean(b.appendChild(c))},Y.imageUploadButton=function(a){var b=document.getElementById("divApplab"),c=document.createElement("label"),d=document.createTextNode(a.text);c.id=a.elementId,c.className="img-upload";var e=document.createElement("input");return e.type="file",e.accept="image/*",e.capture="camera",e.style.position="absolute",e.style.left="-9999px",Boolean(c.appendChild(e)&&c.appendChild(d)&&b.appendChild(c))};var qb=24,rb=24,sb=-45;Y.show=function(){w(!0)},Y.hide=function(){w(!1)},Y.moveTo=function(a){l(a,"moveTo","x",a.x,"number"),l(a,"moveTo","y",a.y,"number");var b=u();b&&(b.beginPath(),b.moveTo(Y.turtle.x,Y.turtle.y),Y.turtle.x=a.x,Y.turtle.y=a.y,b.lineTo(Y.turtle.x,Y.turtle.y),b.stroke(),v())},Y.move=function(a){l(a,"move","x",a.x,"number"),l(a,"move","y",a.y,"number"),a.x+=Y.turtle.x,a.y+=Y.turtle.y,Y.moveTo(a)},Y.moveForward=function(a){var b={},c=25;"undefined"!=typeof a.distance&&(l(a,"moveForward","pixels",a.distance,"number"),c=a.distance),b.x=Y.turtle.x+c*Math.sin(2*Math.PI*Y.turtle.heading/360),b.y=Y.turtle.y-c*Math.cos(2*Math.PI*Y.turtle.heading/360),Y.moveTo(b)},Y.moveBackward=function(a){var b=-25;"undefined"!=typeof a.distance&&(l(a,"moveBackward","pixels",a.distance,"number"),b=-a.distance),Y.moveForward({distance:b})},Y.turnRight=function(a){u();var b=90;"undefined"!=typeof a.degrees&&(l(a,"turnRight","degrees",a.degrees,"number"),b=a.degrees),Y.turtle.heading+=b,Y.turtle.heading=(Y.turtle.heading+360)%360,v()},Y.turnLeft=function(a){var b=-90;"undefined"!=typeof a.degrees&&(l(a,"turnLeft","degrees",a.degrees,"number"),b=-a.degrees),Y.turnRight({degrees:b})},Y.turnTo=function(a){l(a,"turnTo","degrees",a.direction,"number");var b=a.direction-Y.turtle.heading;Y.turnRight({degrees:b})},Y.arcRight=function(a){l(a,"arcRight","degrees",a.degrees,"number"),l(a,"arcRight","radius",a.radius,"number");var b=a.counterclockwise?-90:90,c=a.counterclockwise?-a.degrees:a.degrees,d=u();if(d){var e=Y.turtle.x+a.radius*Math.sin(2*Math.PI*(Y.turtle.heading+b)/360),f=Y.turtle.y-a.radius*Math.cos(2*Math.PI*(Y.turtle.heading+b)/360),g=2*Math.PI*(Y.turtle.heading+(a.counterclockwise?0:180))/360,h=g+2*Math.PI*c/360;d.beginPath(),d.arc(e,f,a.radius,g,h,a.counterclockwise),d.stroke(),Y.turtle.heading=(Y.turtle.heading+c+360)%360;var i=a.radius*Math.cos(2*Math.PI*Y.turtle.heading/360),j=a.radius*Math.sin(2*Math.PI*Y.turtle.heading/360);Y.turtle.x=e+(a.counterclockwise?i:-i),Y.turtle.y=f+(a.counterclockwise?j:-j),v()}},Y.arcLeft=function(a){l(a,"arcLeft","degrees",a.degrees,"number"),l(a,"arcLeft","radius",a.radius,"number"),a.counterclockwise=!0,Y.arcRight(a)},Y.getX=function(){u();return Y.turtle.x},Y.getY=function(){u();return Y.turtle.y},Y.getDirection=function(){u();return Y.turtle.heading},Y.dot=function(a){m(a,"dot","radius",a.radius,"number",1e-4);var b=u();if(b&&a.radius>0){b.beginPath(),Y.turtle.penUpColor&&(b.strokeStyle=Y.turtle.penUpColor);var c=b.lineWidth;return b.lineWidth=1,b.arc(Y.turtle.x,Y.turtle.y,a.radius,0,2*Math.PI),b.fill(),b.stroke(),Y.turtle.penUpColor&&(b.strokeStyle="rgba(255, 255, 255, 0)"),b.lineWidth=c,!0}},Y.penUp=function(){var a=u();a&&"rgba(255, 255, 255, 0)"!==a.strokeStyle&&(Y.turtle.penUpColor=a.strokeStyle,a.strokeStyle="rgba(255, 255, 255, 0)")},Y.penDown=function(){var a=u();a&&Y.turtle.penUpColor&&(a.strokeStyle=Y.turtle.penUpColor,delete Y.turtle.penUpColor)},Y.penWidth=function(a){m(a,"penWidth","width",a.width,"number",1e-4);var b=u();b&&(b.lineWidth=a.width)},Y.penColor=function(a){l(a,"penColor","color",a.color,"color");var b=u();b&&(Y.turtle.penUpColor?Y.turtle.penUpColor=a.color:b.strokeStyle=a.color,b.fillStyle=a.color)},Y.speed=function(a){if(m(a,"speed","percent",a.percent,"number",0,100),a.percent>=0&&a.percent<=100){var b=a.percent/100;Y.speedSlider&&Y.speedSlider.setValue(b),Y.scale.stepSpeed=f(b)}},Y.createCanvas=function(a){var b=document.getElementById("divApplab");o(b,a,"createCanvas","canvasId",a.elementId,!1);var c=document.createElement("canvas"),d=c.getContext("2d");if(c&&d){c.id=a.elementId;var e=a.width||Y.appWidth,f=a.height||Y.appHeight;return l(a,"createCanvas","width",e,"number"),l(a,"createCanvas","height",f,"number"),c.width=e,c.height=f,c.style.width=e+"px",c.style.height=f+"px",a.turtleCanvas||(d.fillStyle="rgba(255, 255, 255, 0)"),d.lineCap="round",Y.activeCanvas||a.turtleCanvas||(Y.activeCanvas=c),Boolean(b.appendChild(c))}return!1},Y.setActiveCanvas=function(a){var b=document.getElementById("divApplab");o(b,a,"setActiveCanvas","canvasId",a.elementId,!0);var c=document.getElementById(a.elementId);return b.contains(c)?(Y.activeCanvas=c,!0):!1},Y.line=function(a){n(a,"line"),l(a,"line","x1",a.x1,"number"),l(a,"line","x2",a.x2,"number"),l(a,"line","y1",a.y1,"number"),l(a,"line","y2",a.y2,"number");var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");return b?(b.beginPath(),b.moveTo(a.x1,a.y1),b.lineTo(a.x2,a.y2),b.stroke(),!0):!1},Y.circle=function(a){n(a,"circle"),l(a,"circle","centerX",a.x,"number"),l(a,"circle","centerY",a.y,"number"),l(a,"circle","radius",a.radius,"number");var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");return b?(b.beginPath(),b.arc(a.x,a.y,a.radius,0,2*Math.PI),b.fill(),b.stroke(),!0):!1},Y.rect=function(a){n(a,"rect"),l(a,"rect","upperLeftX",a.x,"number"),l(a,"rect","upperLeftY",a.y,"number"),l(a,"rect","width",a.width,"number"),l(a,"rect","height",a.height,"number");var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");return b?(b.beginPath(),b.rect(a.x,a.y,a.width,a.height),b.fill(),b.stroke(),!0):!1},Y.setStrokeWidth=function(a){n(a,"setStrokeWidth"),m(a,"setStrokeWidth","width",a.width,"number",1e-4);var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");return b?(b.lineWidth=a.width,!0):!1},Y.setStrokeColor=function(a){n(a,"setStrokeColor"),l(a,"setStrokeColor","color",a.color,"color");var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");return b?(b.strokeStyle=String(a.color),!0):!1},Y.setFillColor=function(a){n(a,"setFillColor"),l(a,"setFillColor","color",a.color,"color");var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");return b?(b.fillStyle=String(a.color),!0):!1},Y.clearCanvas=function(a){n(a,"clearCanvas");var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");return b?(b.clearRect(0,0,Y.activeCanvas.width,Y.activeCanvas.height),!0):!1},Y.drawImage=function(a){var b=document.getElementById("divApplab");n(a,"drawImage"),o(b,a,"drawImage","imageId",a.imageId,!0),l(a,"drawImage","x",a.x,"number"),l(a,"drawImage","y",a.y,"number");var c=document.getElementById(a.imageId),d=Y.activeCanvas&&Y.activeCanvas.getContext("2d");if(d&&b.contains(c)){var e,f;return e=f=1,"undefined"!=typeof a.width&&(l(a,"drawImage","width",a.width,"number"),e*=a.width/c.width),"undefined"!=typeof a.height&&(l(a,"drawImage","height",a.height,"number"),f*=a.height/c.height),d.save(),d.setTransform(e,0,0,f,a.x,a.y),d.drawImage(c,0,0),d.restore(),!0}return!1},Y.getImageData=function(a){n(a,"getImageData"),l(a,"getImageData","x",a.x,"number"),l(a,"getImageData","y",a.y,"number"),l(a,"getImageData","width",a.width,"number"),l(a,"getImageData","height",a.height,"number");var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");return b?b.getImageData(a.x,a.y,a.width,a.height):void 0},Y.putImageData=function(a){n(a,"putImageData"),l(a,"putImageData","imageData",a.imageData,"object"),l(a,"putImageData","x",a.x,"number"),l(a,"putImageData","y",a.y,"number");var b=Y.activeCanvas&&Y.activeCanvas.getContext("2d");if(b){var c=b.createImageData(a.imageData.width,a.imageData.height);return c.data.set(a.imageData.data),b.putImageData(c,a.x,a.y)}},Y.textInput=function(a){var b=document.getElementById("divApplab");o(b,a,"textInput","id",a.elementId,!1),l(a,"textInput","text",a.text,"uistring");var c=document.createElement("input");return c.value=a.text,c.id=a.elementId,Boolean(b.appendChild(c))},Y.textLabel=function(a){var b=document.getElementById("divApplab");o(b,a,"textLabel","id",a.elementId,!1),l(a,"textLabel","text",a.text,"uistring"),"undefined"!=typeof a.forId&&o(b,a,"textLabel","forId",a.forId,!1);var c=document.createElement("label"),d=document.createTextNode(a.text);c.id=a.elementId;var e=document.getElementById(a.forId);return e&&b.contains(e)&&c.setAttribute("for",a.forId),Boolean(c.appendChild(d)&&b.appendChild(c))},Y.checkbox=function(a){var b=document.getElementById("divApplab");o(b,a,"checkbox","id",a.elementId,!1);var c=document.createElement("input");return c.setAttribute("type","checkbox"),c.checked=a.checked,c.id=a.elementId,Boolean(b.appendChild(c))},Y.radioButton=function(a){var b=document.getElementById("divApplab");o(b,a,"radioButton","id",a.elementId,!1),l(a,"radioButton","group",a.name,"string",ib);var c=document.createElement("input");return c.setAttribute("type","radio"),c.name=a.name,c.checked=a.checked,c.id=a.elementId,Boolean(b.appendChild(c))},Y.dropdown=function(a){var b=document.getElementById("divApplab");o(b,a,"dropdown","id",a.elementId,!1);var c=document.createElement("select");if(a.optionsArray)for(var d=0;d<a.optionsArray.length;d++){var e=document.createElement("option");l(a,"dropdown","option_"+(d+1),a.optionsArray[d],"uistring"),e.text=a.optionsArray[d],c.add(e)}return c.id=a.elementId,Boolean(b.appendChild(c))},Y.getAttribute=function(a){var b=document.getElementById("divApplab"),c=document.getElementById(a.elementId),d=String(a.attribute);return b.contains(c)?c[d]:!1},Y.mutableAttributes=["innerHTML","scrollTop"],Y.setAttribute=function(a){var b=document.getElementById("divApplab"),c=document.getElementById(a.elementId),d=String(a.attribute);return b.contains(c)&&-1!==Y.mutableAttributes.indexOf(d)?(c[d]=a.value,!0):!1},Y.getText=function(a){var b=document.getElementById("divApplab");o(b,a,"getText","id",a.elementId,!0);var c=document.getElementById(a.elementId);return b.contains(c)?"INPUT"===c.tagName||"SELECT"===c.tagName?String(c.value):"IMG"===c.tagName?String(c.alt):c.innerText:!1},Y.setText=function(a){var b=document.getElementById("divApplab");o(b,a,"setText","id",a.elementId,!0),l(a,"setText","text",a.text,"uistring");var c=document.getElementById(a.elementId);return b.contains(c)?("INPUT"===c.tagName||"SELECT"===c.tagName?c.value=a.text:"IMG"===c.tagName?c.alt=a.text:c.innerText=a.text,!0):!1},Y.getChecked=function(a){var b=document.getElementById("divApplab");o(b,a,"getChecked","id",a.elementId,!0);var c=document.getElementById(a.elementId);return b.contains(c)&&"INPUT"===c.tagName?c.checked:!1},Y.setChecked=function(a){var b=document.getElementById("divApplab");o(b,a,"setChecked","id",a.elementId,!0);var c=document.getElementById(a.elementId);return b.contains(c)&&"INPUT"===c.tagName?(c.checked=a.checked,!0):!1},Y.getImageURL=function(a){var b=document.getElementById("divApplab");o(b,a,"getImageURL","id",a.elementId,!0);var c=document.getElementById(a.elementId);if(b.contains(c)){if("IMG"===c.tagName)return c.src;if("LABEL"===c.tagName&&"img-upload"===c.className){var d=c.children[0].files[0];if(d)return window.URL.createObjectURL(d)}}},Y.setImageURL=function(a){var b=document.getElementById("divApplab");o(b,a,"setImageURL","id",a.elementId,!0),l(a,"setImageURL","src",a.src,"string");var c=document.getElementById(a.elementId);return b.contains(c)&&"IMG"===c.tagName?(c.src=a.src,!0):!1},Y.playSound=function(a){l(a,"playSound","url",a.url,"string"),D.cdoSounds&&D.cdoSounds.playURL(a.url,{volume:1,forceHTML5:!0,allowHTML5Mobile:!0})},Y.innerHTML=function(a){var b=document.getElementById("divApplab"),c=document.getElementById(a.elementId);return b.contains(c)?(c.innerHTML=a.html,!0):!1},Y.deleteElement=function(a){var b=document.getElementById("divApplab");o(b,a,"deleteElement","id",a.elementId,!0);var c=document.getElementById(a.elementId);return b.contains(c)?((c==Y.activeCanvas||c.contains(Y.activeCanvas))&&delete Y.activeCanvas,Boolean(c.parentElement.removeChild(c))):!1},Y.showElement=function(a){var b=document.getElementById("divApplab");o(b,a,"showElement","id",a.elementId,!0);var c=document.getElementById(a.elementId);return b.contains(c)?(c.style.visibility="visible",!0):!1},Y.hideElement=function(a){var b=document.getElementById("divApplab");o(b,a,"hideElement","id",a.elementId,!0);var c=document.getElementById(a.elementId);return b.contains(c)?(c.style.visibility="hidden",!0):!1},Y.setStyle=function(a){var b=document.getElementById("divApplab"),c=document.getElementById(a.elementId);return b.contains(c)?(c.style.cssText+=a.style,!0):!1},Y.setParent=function(a){var b=document.getElementById("divApplab"),c=document.getElementById(a.elementId),d=document.getElementById(a.parentId);return b.contains(c)&&b.contains(d)?Boolean(c.parentElement.removeChild(c)&&d.appendChild(c)):!1},Y.setPosition=function(a){var b=document.getElementById("divApplab");o(b,a,"setPosition","id",a.elementId,!0),l(a,"setPosition","left",a.left,"number"),l(a,"setPosition","top",a.top,"number"),l(a,"setPosition","width",a.width,"number"),l(a,"setPosition","height",a.height,"number");var c=document.getElementById(a.elementId);return b.contains(c)?(c.style.position="absolute",c.style.left=String(a.left)+"px",c.style.top=String(a.top)+"px",c.style.width=String(a.width)+"px",c.style.height=String(a.height)+"px",!0):!1},Y.getXPosition=function(a){var b=document.getElementById("divApplab");o(b,a,"getXPosition","id",a.elementId,!0);var c=document.getElementById(a.elementId);if(b.contains(c)){for(var d=c.offsetLeft;c!==b;)c=c.offsetParent,d+=c.offsetLeft;return d}return 0},Y.getYPosition=function(a){var b=document.getElementById("divApplab");o(b,a,"getYPosition","id",a.elementId,!0);var c=document.getElementById(a.elementId);if(b.contains(c)){for(var d=c.offsetTop;c!==b;)c=c.offsetParent,d+=c.offsetTop;return d}return 0},Y.onEventFired=function(a,b){return Y.eventQueue.push("undefined"!=typeof b?{fn:a.func,arguments:[b].concat(a.extraArgs)}:{fn:a.func}),Y.interpreter?(Y.executeInterpreter(!0),Y.lastCallbackRetVal):void 0},Y.onEvent=function(a){var b=document.getElementById("divApplab");o(b,a,"onEvent","id",a.elementId,!0),l(a,"onEvent","event",a.eventName,"string"),l(a,"onEvent","function",a.func,"function"),"body"===a.elementId&&(a.elementId="divApplab");var c=document.getElementById(a.elementId);if(b.contains(c)){switch(a.eventName){case"pinch":case"pinchin":case"pinchout":var d=new S(b,{preventDefault:!0});d.on(a.eventName,Y.onEventFired.bind(this,a));break;default:c.addEventListener(a.eventName,Y.onEventFired.bind(this,a))}return!0}return!1},Y.onHttpRequestEvent=function(a){a.interpreter===Y.interpreter&&4===this.readyState&&Y.eventQueue.push({fn:a.func,arguments:[Number(this.status),String(this.getResponseHeader("content-type")),String(this.responseText)]})},Y.startWebRequest=function(a){l(a,"startWebRequest","url",a.url,"string"),l(a,"startWebRequest","function",a.func,"function"),a.interpreter=Y.interpreter;var b=new XMLHttpRequest;b.onreadystatechange=Y.onHttpRequestEvent.bind(b,a),b.open("GET",String(a.url),!0),b.send()},Y.onTimerFired=function(a){Y.eventQueue.push({fn:a.func}),Y.executeInterpreter(!0)},Y.setTimeout=function(a){return l(a,"setTimeout","function",a.func,"function"),l(a,"setTimeout","milliseconds",a.milliseconds,"number"),T.setTimeout(Y.onTimerFired.bind(this,a),a.milliseconds)},Y.clearTimeout=function(a){l(a,"clearTimeout","timeoutId",a.timeoutId,"number"),T.clearTimeout(a.timeoutId)},Y.setInterval=function(a){return l(a,"setInterval","function",a.func,"function"),l(a,"setInterval","milliseconds",a.milliseconds,"number"),T.setInterval(Y.onTimerFired.bind(this,a),a.milliseconds)},Y.clearInterval=function(a){l(a,"clearInterval","intervalId",a.intervalId,"number"),T.clearInterval(a.intervalId)},Y.createRecord=function(a){l(a,"createRecord","table",a.table,"string"),l(a,"createRecord","record",a.record,"object"),l(a,"createRecord","record.id",a.record.id,"undefined"),l(a,"createRecord","onSuccess",a.onSuccess,"function",ib),l(a,"createRecord","onError",a.onError,"function",ib);var b=Y.handleCreateRecord.bind(this,a.onSuccess),c=Y.handleError.bind(this,a.onError);O.createRecord(a.table,a.record,b,c)},Y.handleCreateRecord=function(a,b){a&&Y.eventQueue.push({fn:a,arguments:[b]})},Y.handleError=function(a,b){a?Y.eventQueue.push({fn:a,arguments:[b]}):i(b)},Y.getKeyValue=function(a){l(a,"getKeyValue","key",a.key,"string"),l(a,"getKeyValue","onSuccess",a.onSuccess,"function"),l(a,"getKeyValue","onError",a.onError,"function",ib);var b=Y.handleReadValue.bind(this,a.onSuccess),c=Y.handleError.bind(this,a.onError);O.getKeyValue(a.key,b,c)},Y.handleReadValue=function(a,b){a&&Y.eventQueue.push({fn:a,arguments:[b]})},Y.setKeyValue=function(a){l(a,"setKeyValue","key",a.key,"string"),l(a,"setKeyValue","value",a.value,"primitive"),l(a,"setKeyValue","onSuccess",a.onSuccess,"function",ib),l(a,"setKeyValue","onError",a.onError,"function",ib);var b=Y.handleSetKeyValue.bind(this,a.onSuccess),c=Y.handleError.bind(this,a.onError);O.setKeyValue(a.key,a.value,b,c)},Y.handleSetKeyValue=function(a){a&&Y.eventQueue.push({fn:a,arguments:[]})},Y.readRecords=function(a){l(a,"readRecords","table",a.table,"string"),l(a,"readRecords","searchParams",a.searchParams,"object"),l(a,"readRecords","onSuccess",a.onSuccess,"function"),l(a,"readRecords","onError",a.onError,"function",ib);var b=Y.handleReadRecords.bind(this,a.onSuccess),c=Y.handleError.bind(this,a.onError);O.readRecords(a.table,a.searchParams,b,c)},Y.handleReadRecords=function(a,b){a&&Y.eventQueue.push({fn:a,arguments:[b]})},Y.updateRecord=function(a){l(a,"updateRecord","table",a.table,"string"),l(a,"updateRecord","record",a.record,"object"),m(a,"updateRecord","record.id",a.record.id,"number",1,1/0),l(a,"updateRecord","onSuccess",a.onSuccess,"function",ib),l(a,"updateRecord","onError",a.onError,"function",ib);var b=Y.handleUpdateRecord.bind(this,a.onSuccess),c=Y.handleError.bind(this,a.onError);O.updateRecord(a.table,a.record,b,c)},Y.handleUpdateRecord=function(a,b){a&&Y.eventQueue.push({fn:a,arguments:[b]})},Y.deleteRecord=function(a){l(a,"deleteRecord","table",a.table,"string"),l(a,"deleteRecord","record",a.record,"object"),m(a,"deleteRecord","record.id",a.record.id,"number",1,1/0),l(a,"deleteRecord","onSuccess",a.onSuccess,"function",ib),l(a,"deleteRecord","onError",a.onError,"function",ib);var b=Y.handleDeleteRecord.bind(this,a.onSuccess),c=Y.handleError.bind(this,a.onError);O.deleteRecord(a.table,a.record,b,c)},Y.handleDeleteRecord=function(a){a&&Y.eventQueue.push({fn:a,arguments:[]})},Y.getUserId=function(){if(!C.applabUserId)throw new Error("User ID failed to load.");return C.applabUserId},Y.timedOut=function(){return Y.tickCount>Y.timeoutFailureTick};var tb=function(){return A.goal&&A.goal.successCondition&&A.goal.successCondition()?(Y.result=W.SUCCESS,!0):A.goal&&A.goal.failureCondition&&A.goal.failureCondition()?(Y.result=W.FAILURE,!0):Y.timedOut()?(Y.result=W.FAILURE,!0):!1},ub=function(){switch(window.location.hostname){case"studio.code.org":case"learn.code.org":return"code.org";default:var a=window.location.hostname.split(".")[0];switch(a){case"localhost":return"localhost.code.org:3000";case"development":case"staging":case"test":case"levelbuilder":return a+".code.org";default:return null}}},vb={not_string:/[^s]/,number:/[dief]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fiosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};x.format=function(a,b){var c,d,e,f,g,h,i,j=1,k=a.length,l="",m=[],n=!0,o="";for(d=0;k>d;d++)if(l=y(a[d]),"string"===l)m[m.length]=a[d];else if("array"===l){if(f=a[d],f[2])for(c=b[j],e=0;e<f[2].length;e++){if(!c.hasOwnProperty(f[2][e]))throw new Error(x("[sprintf] property '%s' does not exist",f[2][e]));c=c[f[2][e]]}else c=f[1]?b[f[1]]:b[j++];if("function"==y(c)&&(c=c()),vb.not_string.test(f[8])&&"number"!=y(c)&&isNaN(c))throw new TypeError(x("[sprintf] expecting number but found %s",y(c)));switch(vb.number.test(f[8])&&(n=c>=0),f[8]){case"b":c=c.toString(2);break;case"c":c=String.fromCharCode(c);break;case"d":case"i":c=parseInt(c,10);break;case"e":c=f[7]?c.toExponential(f[7]):c.toExponential();break;case"f":c=f[7]?parseFloat(c).toFixed(f[7]):parseFloat(c);break;case"o":c=c.toString(8);break;case"s":c=(c=String(c))&&f[7]?c.substring(0,f[7]):c;break;case"u":c>>>=0;break;case"x":c=c.toString(16);break;case"X":c=c.toString(16).toUpperCase()}!vb.number.test(f[8])||n&&!f[3]?o="":(o=n?"+":"-",c=c.toString().replace(vb.sign,"")),h=f[4]?"0"===f[4]?"0":f[4].charAt(1):" ",i=f[6]-(o+c).length,g=f[6]&&i>0?z(h,i):"",m[m.length]=f[5]?o+c+g:"0"===h?o+g+c:g+o+c}return m.join("")},x.cache={},x.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=vb.text.exec(b)))d[d.length]=c[0];else if(null!==(c=vb.modulo.exec(b)))d[d.length]="%";else{if(null===(c=vb.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=vb.key.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(f[f.length]=h[1];""!==(g=g.substring(h[0].length));)if(null!==(h=vb.key_access.exec(g)))f[f.length]=h[1];else{if(null===(h=vb.index_access.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");f[f.length]=h[1]}c[2]=f}else e|=2;if(3===e)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d[d.length]=c}b=b.substring(c[0].length)}return d};var wb=function(a,b,c){return c=(b||[]).slice(0),c.splice(0,0,a),x.apply(null,c)}},{"../../locale/current/applab":254,"../../locale/current/common":257,"../StudioApp":4,"../codegen":55,"../constants":57,"../dom":58,"../dropletUtils":59,"../skins":206,"../slider":207,"../templates/page.html.ejs":231,"../timeoutList":237,"../utils":252,"../xml":253,"./acemode/annotationList":6,"./acemode/mode-javascript_codeorg":8,"./api":9,"./appStorage":10,"./blocks":12,"./controls.html.ejs":13,"./designModeBox.html.ejs":14,"./designProperties.html.ejs":15,"./dontMarshalApi":16,"./dropletConfig":17,"./extraControlRows.html.ejs":18,"./rgbcolor.js":21,"./visualization.html.ejs":23}],23:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="divApplab" tabindex="1">\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:273}],21:[function(a,b){b.exports=function(a){this.ok=!1,"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var b={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var c in b)a==c&&(a=b[c]);for(var d=[{re:/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*((?:\d+(?:\.\d+)?)|(?:\.\d+))\s*\)$/,example:["rgba(123, 234, 45, .33)","rgba(255,234,245,1)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]}},{re:/^([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],e=0;e<d.length;e++){var f=d[e].re,g=d[e].process,h=f.exec(a);if(h){var i=g(h);this.r=i[0],this.g=i[1],this.b=i[2],this.a=i[3],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0?0:this.a>1||isNaN(this.a)?1:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c}}},{}],18:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");require("../../locale/current/common");buf.push("\n");var a=require("../../locale/current/applab");buf.push('\n\n<div id="debug-area">\n  '),debugButtons&&buf.push('\n  <div id="debugResizeBar">\n    <div id="debug-buttons" style="display:inline;">\n      <button id="pauseButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="pause-btn icon21">\n        ',escape(a.pause()),'\n      </button>\n      <button id="continueButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="continue-btn icon21">\n        ',escape(a["continue"]()),'\n      </button>\n      <button id="stepInButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="step-in-btn icon21">\n        ',escape(a.stepIn()),'\n      </button>\n      <button id="stepOverButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="step-over-btn icon21">\n        ',escape(a.stepOver()),'\n      </button>\n      <button id="stepOutButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="step-out-btn icon21">\n        ',escape(a.stepOut()),'\n      </button>\n      <button id="viewDataButton" class="debugger_button">\n        ',escape(a.viewData()),"\n      </button>\n    </div>\n  </div>\n  "),buf.push("\n\n  "),debugConsole&&buf.push('\n  <div id="debug-console" class="debug-console">\n    <div id="debug-output" class="debug-output"></div>\n    <span class="debug-input-prompt">\n      &gt;\n    </span>\n    <div contenteditable spellcheck="false" id="debug-input" class="debug-input"></div>\n  </div>\n  '),buf.push("\n</div>\n")
}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale/current/applab":254,"../../locale/current/common":257,ejs:273}],16:[function(a,b,c){var d=a("./applab");c.getRed=function(a,b,c){if(a.properties.data&&a.properties.width){var d=c*a.properties.width*4+4*b;return a.properties.data.properties[d].toNumber()}},c.getGreen=function(a,b,c){if(a.properties.data&&a.properties.width){var d=c*a.properties.width*4+4*b;return a.properties.data.properties[d+1].toNumber()}},c.getBlue=function(a,b,c){if(a.properties.data&&a.properties.width){var d=c*a.properties.width*4+4*b;return a.properties.data.properties[d+2].toNumber()}},c.getAlpha=function(a,b,c){if(a.properties.data&&a.properties.width){var d=c*a.properties.width*4+4*b;return a.properties.data.properties[d+3].toNumber()}},c.setRed=function(a,b,c,d){if(a.properties.data&&a.properties.width){var e=c*a.properties.width*4+4*b;a.properties.data.properties[e]=d}},c.setGreen=function(a,b,c,d){if(a.properties.data&&a.properties.width){var e=c*a.properties.width*4+4*b;a.properties.data.properties[e+1]=d}},c.setBlue=function(a,b,c,d){if(a.properties.data&&a.properties.width){var e=c*a.properties.width*4+4*b;a.properties.data.properties[e+2]=d}},c.setAlpha=function(a,b,c,d){if(a.properties.data&&a.properties.width){var e=c*a.properties.width*4+4*b;a.properties.data.properties[e+3]=d}},c.setRGB=function(a,b,c,e,f,g,h){if(a.properties.data&&a.properties.width){var i=c*a.properties.width*4+4*b;a.properties.data.properties[i]=e,a.properties.data.properties[i+1]=f,a.properties.data.properties[i+2]=g,a.properties.data.properties[i+3]="undefined"==typeof h?d.interpreter.createPrimitive(255):h}}},{"./applab":11}],15:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push(""),tagName?buf.push('\n<table>\n  <tr>\n    <th>name</th>\n    <th>value</th>\n  </tr>\n  <tr>\n    <td>id</td>\n    <td><input id="design-property-id" value="',escape(props.id),'"></td>\n  </tr>\n  <tr>\n    <td>x position</td>\n    <td><input id="design-property-left" value="',escape(props.left),'"></td>\n  </tr>\n  <tr>\n    <td>y position</td>\n    <td><input id="design-property-top" value="',escape(props.top),'"></td>\n  </tr>\n  <tr>\n    <td>width</td>\n    <td><input id="design-property-width" value="',escape(props.width),'"></td>\n  </tr>\n  <tr>\n    <td>height</td>\n    <td><input id="design-property-height" value="',escape(props.height),'"></td>\n  </tr>\n  <tr>\n    <td>text</td>\n    <td><input id="design-property-text" value="',escape(props.text),'"></td>\n  </tr>\n</table>\n<button id="savePropertiesButton" class="share">Save</button>\n<button id="deletePropertiesButton" class="share">Delete</button>\n'):buf.push("\n  Click on an element to edit its properties.\n"),buf.push("")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:273}],14:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="designModeBox" width="100%" style="display:none;">\n  '),buf.push('\n  Welcome to Design mode! Under construction.<br>\n  Drag the elements below into your app, then press \'Run\' to save. Press \'Clear\' to start over.<br>\n  <table width="100%">\n    <colgroup>\n      <col width="50%">\n      <col width="50%">\n    </colgroup>\n    <tr>\n      <td><h3>Elements</h3></td>\n      <td><h3>Properties</h3></td>\n    </tr>\n    <tr>\n      <td>\n        <div id="design-elements">\n          <div data-element-type="button" class="new-design-element">button</div>\n          <div data-element-type="label" class="new-design-element">label</div>\n          <div data-element-type="input" class="new-design-element">input</div>\n          <button id="designModeClear" class="share">Clear</button><br>\n        </div>\n      </td>\n      <td>\n        <div id="design-properties">\n          ',designProperties,"\n        </div>\n      </td>\n    </tr>\n  </table>\n\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:273}],13:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../../locale/current/common");buf.push("\n\n"),showSlider&&buf.push('\n  <div id="slider-cell">\n    <svg id="applab-slider"\n         xmlns="http://www.w3.org/2000/svg"\n         xmlns:svg="http://www.w3.org/2000/svg"\n         xmlns:xlink="http://www.w3.org/1999/xlink"\n         version="1.1"\n         width="150"\n         height="50">\n        <!-- Slow icon. -->\n        <clipPath id="slowClipPath">\n          <rect width=26 height=12 x=5 y=14 />\n        </clipPath>\n        <image xlink:href="',escape(assetUrl("media/applab/turtle_icons.png")),'" height=42 width=84 x=-21 y=-10\n            clip-path="url(#slowClipPath)" />\n        <!-- Fast icon. -->\n        <clipPath id="fastClipPath">\n          <rect width=26 height=16 x=120 y=10 />\n        </clipPath>\n        <image xlink:href="',escape(assetUrl("media/applab/turtle_icons.png")),'" height=42 width=84 x=120 y=-11\n            clip-path="url(#fastClipPath)" />\n    </svg>\n    <img id="spinner" style="visibility: hidden;" src="',escape(assetUrl("media/applab/loading.gif")),'" height=15 width=15>\n  </div>\n'),buf.push('\n\n<div id="soft-buttons" class="soft-buttons-none">\n  <button id="leftButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="left-btn icon21">\n  </button>\n  <button id="rightButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="right-btn icon21">\n  </button>\n  <button id="upButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="up-btn icon21">\n  </button>\n  <button id="downButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="down-btn icon21">\n  </button>\n</div>\n\n'),finishButton&&buf.push('\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n"),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale/current/common":257,ejs:273}],12:[function(a,b,c){"use strict";function d(a,b){a.Blocks.applab_container={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(e.container()),this.appendValueInput("ID"),this.appendValueInput("HTML"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(e.containerTooltip())}},b.applab_container=function(){var a=Blockly.JavaScript.valueToCode(this,"ID",Blockly.JavaScript.ORDER_NONE)||"",b=Blockly.JavaScript.valueToCode(this,"HTML",Blockly.JavaScript.ORDER_NONE)||"";return"Applab.container('block_id_"+this.id+"', "+a+", "+b+");\n"}}{var e=a("../../locale/current/applab"),f=(a("../../locale/current/common"),a("../codegen"),a("../utils"));f.getLodash()}c.install=function(a,b){var c=(b.skin,b.isK1,a.Generator.get("JavaScript"));a.JavaScript=c,c.applab_eventHandlerPrologue=function(){return"\n"},d(a,c,b)}},{"../../locale/current/applab":254,"../../locale/current/common":257,"../codegen":55,"../utils":252}],254:[function(a,b){b.exports=window.blockly.appLocale},{}],10:[function(a,b){"use strict";var c=b.exports;c.tempChannelId="localhost"===window.location.hostname.split(".")[0]?"SmwVmYVl1V5UCCw1Ec6Dtw==":"DvTw9X3pDcyDyil44S6qbw==",c.getChannelId=function(){var a=dashboard&&dashboard.currentApp&&dashboard.currentApp.id;return a||c.tempChannelId},c.getKeyValue=function(a,b,e){var f=new XMLHttpRequest;f.onreadystatechange=d.bind(f,b,e);var g="/v3/shared-properties/"+c.getChannelId()+"/"+a;f.open("GET",g,!0),f.send()};var d=function(a,b){var c=XMLHttpRequest.DONE||4;if(this.readyState===c){if(404===this.status)return void a(void 0);if(this.status<200||this.status>=300)return void b("error reading value: unexpected http status "+this.status);var d=JSON.parse(this.responseText);a(d)}};c.setKeyValue=function(a,b,d,f){var g=new XMLHttpRequest;g.onreadystatechange=e.bind(g,d,f);var h="/v3/shared-properties/"+c.getChannelId()+"/"+a;g.open("POST",h,!0),g.setRequestHeader("Content-Type","application/json; charset=UTF-8"),g.send(JSON.stringify(b))};var e=function(a,b){var c=XMLHttpRequest.DONE||4;if(this.readyState===c)return this.status<200||this.status>=300?void b("error writing value: unexpected http status "+this.status):void a()};c.createRecord=function(a,b,d,e){if(!a)return void e('error creating record: missing required parameter "tableName"');if(b.id)return void e('error creating record: record must not have an "id" property');var g=new XMLHttpRequest;g.onreadystatechange=f.bind(g,d,e);var h="/v3/shared-tables/"+c.getChannelId()+"/"+a;g.open("POST",h,!0),g.setRequestHeader("Content-Type","application/json; charset=UTF-8"),g.send(JSON.stringify(b))};var f=function(a,b){var c=XMLHttpRequest.DONE||4;if(this.readyState===c){if(this.status<200||this.status>=300)return void b("error creating record: unexpected http status "+this.status);var d=JSON.parse(this.responseText);a(d)}};c.readRecords=function(a,b,d,e){if(!a)return void e('error reading records: missing required parameter "tableName"');var f=new XMLHttpRequest;f.onreadystatechange=g.bind(f,b,d,e);var h="/v3/shared-tables/"+c.getChannelId()+"/"+a;f.open("GET",h,!0),f.send()};var g=function(a,b,c){var d=XMLHttpRequest.DONE||4;if(this.readyState===d){if(this.status<200||this.status>=300)return void c("error reading records: unexpected http status "+this.status);var e=JSON.parse(this.responseText);e=e.filter(function(b){for(var c in a)if(b[c]!==a[c])return!1;return!0}),b(e)}};c.updateRecord=function(a,b,d,e){if(!a)return void e('error updating record: missing required parameter "tableName"');var f=b.id;if(!f)return void e('error updating record: missing required property "id"');var g=new XMLHttpRequest;g.onreadystatechange=h.bind(g,a,b,d,e);var i="/v3/shared-tables/"+c.getChannelId()+"/"+a+"/"+f;g.open("POST",i,!0),g.setRequestHeader("Content-Type","application/json; charset=UTF-8"),g.send(JSON.stringify(b))};var h=function(a,b,c,d){var e=XMLHttpRequest.DONE||4;if(this.readyState===e)return 404===this.status?void d("error updating record: could not find record id "+b.id+" in table "+a):this.status<200||this.status>=300?void d("error updating record: unexpected http status "+this.status):void c(b)};c.deleteRecord=function(a,b,d,e){if(!a)return void e('error deleting record: missing required parameter "tableName"');var f=b.id;if(!f)return void e('error deleting record: missing required property "id"');var g=new XMLHttpRequest;g.onreadystatechange=i.bind(g,a,b,d,e);var h="/v3/shared-tables/"+c.getChannelId()+"/"+a+"/"+f+"/delete";g.open("POST",h,!0),g.setRequestHeader("Content-Type","application/json; charset=UTF-8"),g.send(JSON.stringify(b))};var i=function(a,b,c,d){var e=XMLHttpRequest.DONE||4;if(this.readyState===e)return 404===this.status?void d("error deleting record: could not find record id "+b.id+" in table "+a):this.status<200||this.status>=300?void d("error deleting record: unexpected http status "+this.status):void c()}},{}],9:[function(a,b,c){c.randomFromArray=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.container=function(a,b,c){return Applab.executeCmd(a,"container",{elementId:b,html:c})},c.write=function(a,b){return Applab.executeCmd(a,"write",{html:b})},c.innerHTML=function(a,b,c){return Applab.executeCmd(a,"innerHTML",{elementId:b,html:c})},c.deleteElement=function(a,b){return Applab.executeCmd(a,"deleteElement",{elementId:b})},c.showElement=function(a,b){return Applab.executeCmd(a,"showElement",{elementId:b})},c.hideElement=function(a,b){return Applab.executeCmd(a,"hideElement",{elementId:b})},c.button=function(a,b,c){return Applab.executeCmd(a,"button",{elementId:b,text:c})},c.image=function(a,b,c){return Applab.executeCmd(a,"image",{elementId:b,src:c})},c.setPosition=function(a,b,c,d,e,f){return Applab.executeCmd(a,"setPosition",{elementId:b,left:c,top:d,width:e,height:f})},c.getXPosition=function(a,b){return Applab.executeCmd(a,"getXPosition",{elementId:b})},c.getYPosition=function(a,b){return Applab.executeCmd(a,"getYPosition",{elementId:b})},c.createCanvas=function(a,b,c,d){return Applab.executeCmd(a,"createCanvas",{elementId:b,width:c,height:d})},c.setActiveCanvas=function(a,b){return Applab.executeCmd(a,"setActiveCanvas",{elementId:b})},c.line=function(a,b,c,d,e){return Applab.executeCmd(a,"line",{x1:b,y1:c,x2:d,y2:e})},c.circle=function(a,b,c,d){return Applab.executeCmd(a,"circle",{x:b,y:c,radius:d})},c.rect=function(a,b,c,d,e){return Applab.executeCmd(a,"rect",{x:b,y:c,width:d,height:e})},c.setStrokeWidth=function(a,b){return Applab.executeCmd(a,"setStrokeWidth",{width:b})},c.setStrokeColor=function(a,b){return Applab.executeCmd(a,"setStrokeColor",{color:b})},c.setFillColor=function(a,b){return Applab.executeCmd(a,"setFillColor",{color:b})},c.clearCanvas=function(a){return Applab.executeCmd(a,"clearCanvas")},c.drawImage=function(a,b,c,d,e,f){return Applab.executeCmd(a,"drawImage",{imageId:b,x:c,y:d,width:e,height:f})},c.getImageData=function(a,b,c,d,e){return Applab.executeCmd(a,"getImageData",{x:b,y:c,width:d,height:e})},c.putImageData=function(a,b,c,d){return Applab.executeCmd(a,"putImageData",{imageData:b,x:c,y:d})},c.textInput=function(a,b,c){return Applab.executeCmd(a,"textInput",{elementId:b,text:c})},c.textLabel=function(a,b,c,d){return Applab.executeCmd(a,"textLabel",{elementId:b,text:c,forId:d})},c.checkbox=function(a,b,c){return Applab.executeCmd(a,"checkbox",{elementId:b,checked:c})},c.radioButton=function(a,b,c,d){return Applab.executeCmd(a,"radioButton",{elementId:b,checked:c,name:d})},c.getChecked=function(a,b){return Applab.executeCmd(a,"getChecked",{elementId:b})},c.setChecked=function(a,b,c){return Applab.executeCmd(a,"setChecked",{elementId:b,checked:c})},c.dropdown=function(a,b){var c=Array.prototype.slice.call(arguments,2);return Applab.executeCmd(a,"dropdown",{elementId:b,optionsArray:c})},c.getAttribute=function(a,b,c){return Applab.executeCmd(a,"getAttribute",{elementId:b,attribute:c})},c.setAttribute=function(a,b,c,d){return Applab.executeCmd(a,"setAttribute",{elementId:b,attribute:c,value:d})},c.getText=function(a,b){return Applab.executeCmd(a,"getText",{elementId:b})},c.setText=function(a,b,c){return Applab.executeCmd(a,"setText",{elementId:b,text:c})},c.getImageURL=function(a,b){return Applab.executeCmd(a,"getImageURL",{elementId:b})},c.setImageURL=function(a,b,c){return Applab.executeCmd(a,"setImageURL",{elementId:b,src:c})},c.imageUploadButton=function(a,b,c){return Applab.executeCmd(a,"imageUploadButton",{elementId:b,text:c})},c.setParent=function(a,b,c){return Applab.executeCmd(a,"setParent",{elementId:b,parentId:c})},c.setStyle=function(a,b,c){return Applab.executeCmd(a,"setStyle",{elementId:b,style:c})},c.onEvent=function(a,b,c,d){var e=Array.prototype.slice.call(arguments).slice(4);return Applab.executeCmd(a,"onEvent",{elementId:b,eventName:c,func:d,extraArgs:e})},c.startWebRequest=function(a,b,c){return Applab.executeCmd(a,"startWebRequest",{url:b,func:c})},c.setTimeout=function(a,b,c){return Applab.executeCmd(a,"setTimeout",{func:b,milliseconds:c})},c.clearTimeout=function(a,b){return Applab.executeCmd(a,"clearTimeout",{timeoutId:b})},c.setInterval=function(a,b,c){return Applab.executeCmd(a,"setInterval",{func:b,milliseconds:c})},c.clearInterval=function(a,b){return Applab.executeCmd(a,"clearInterval",{intervalId:b})},c.playSound=function(a,b){return Applab.executeCmd(a,"playSound",{url:b})},c.getKeyValue=function(a,b,c,d){return Applab.executeCmd(a,"getKeyValue",{key:b,onSuccess:c,onError:d})},c.setKeyValue=function(a,b,c,d,e){return Applab.executeCmd(a,"setKeyValue",{key:b,value:c,onSuccess:d,onError:e})},c.createRecord=function(a,b,c,d,e){return Applab.executeCmd(a,"createRecord",{table:b,record:c,onSuccess:d,onError:e})},c.readRecords=function(a,b,c,d,e){return Applab.executeCmd(a,"readRecords",{table:b,searchParams:c,onSuccess:d,onError:e})},c.updateRecord=function(a,b,c,d,e){return Applab.executeCmd(a,"updateRecord",{table:b,record:c,onSuccess:d,onError:e})},c.deleteRecord=function(a,b,c,d,e){return Applab.executeCmd(a,"deleteRecord",{table:b,record:c,onSuccess:d,onError:e})},c.getUserId=function(a){return Applab.executeCmd(a,"getUserId",{})},c.moveForward=function(a,b){return Applab.executeCmd(a,"moveForward",{distance:b})},c.moveBackward=function(a,b){return Applab.executeCmd(a,"moveBackward",{distance:b})},c.move=function(a,b,c){return Applab.executeCmd(a,"move",{x:b,y:c})},c.moveTo=function(a,b,c){return Applab.executeCmd(a,"moveTo",{x:b,y:c})},c.turnRight=function(a,b){return Applab.executeCmd(a,"turnRight",{degrees:b})},c.turnLeft=function(a,b){return Applab.executeCmd(a,"turnLeft",{degrees:b})},c.turnTo=function(a,b){return Applab.executeCmd(a,"turnTo",{direction:b})},c.arcRight=function(a,b,c){return Applab.executeCmd(a,"arcRight",{degrees:b,radius:c})},c.arcLeft=function(a,b,c){return Applab.executeCmd(a,"arcLeft",{degrees:b,radius:c})},c.dot=function(a,b){return Applab.executeCmd(a,"dot",{radius:b})},c.getX=function(a){return Applab.executeCmd(a,"getX")},c.getY=function(a){return Applab.executeCmd(a,"getY")},c.getDirection=function(a){return Applab.executeCmd(a,"getDirection")},c.penUp=function(a){return Applab.executeCmd(a,"penUp")},c.penDown=function(a){return Applab.executeCmd(a,"penDown")},c.show=function(a){return Applab.executeCmd(a,"show")},c.hide=function(a){return Applab.executeCmd(a,"hide")},c.speed=function(a,b){return Applab.executeCmd(a,"speed",{percent:b})},c.penWidth=function(a,b){return Applab.executeCmd(a,"penWidth",{width:b})},c.penColor=function(a,b){return Applab.executeCmd(a,"penColor",{color:b})}},{}],8:[function(a){var b=a("../dropletConfig"),c=a("../../dropletUtils"),d=a("./annotationList");ace.define("ace/mode/javascript_codeorg",["require","exports","module","ace/lib/oop","ace/mode/javascript","ace/mode/javascript_highlight_rules","ace/worker/worker_client","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/config","ace/lib/net"],function(a,e){var f=a("ace/lib/oop"),g=a("ace/mode/javascript").Mode,h=a("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,i=a("../worker/worker_client").WorkerClient,j=a("./matching_brace_outdent").MatchingBraceOutdent,k=a("./behaviour/cstyle").CstyleBehaviour,l=a("./folding/cstyle").FoldMode,m=function(){this.HighlightRules=h,this.$outdent=new j,this.$behaviour=new k,this.foldingRules=new l};f.inherits(m,g),function(){var a=["ArrayBuffer","Collator","EvalError","Float32Array","Float64Array","Intl","Int16Array","Int32Array","Int8Array","Iterator","NumberFormat","Object","QName","RangeError","ReferenceError","StopIteration","SyntaxError","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArra","URIError"];this.$highlightRules=new h,a.forEach(function(a){var b=this.$highlightRules.$keywordList.indexOf(a);b>0&&this.$highlightRules.$keywordList.splice(b)},this),this.createWorker=function(a){var e=new i(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");e.attachToDocument(a.getDocument());var f={unused:!0,undef:!0,predef:{}};return c.getAllAvailableDropletBlocks(b).forEach(function(a){f.predef[a.func]=!1}),d.attachToSession(a),e.send("changeOptions",[f]),e.on("jslint",d.setJSLintAnnotations),e.on("terminate",function(){a.clearAnnotations()}),e}}.call(m.prototype),e.Mode=m})},{"../../dropletUtils":59,"../dropletConfig":17,"./annotationList":6}],17:[function(a,b){var c="#D3E965",d="#19C3E1",e="#F78183",f="#4DD0E1",g="#FFF176";b.exports.blocks=[{func:"onEvent",category:"UI controls",params:['"id"','"click"',"function(event) {\n  \n}"]},{func:"button",category:"UI controls",params:['"id"','"text"']},{func:"textInput",category:"UI controls",params:['"id"','"text"']},{func:"textLabel",category:"UI controls",params:['"id"','"text"','"forId"']},{func:"dropdown",category:"UI controls",params:['"id"','"option1"','"etc"']},{func:"getText",category:"UI controls",params:['"id"'],type:"value"},{func:"setText",category:"UI controls",params:['"id"','"text"']},{func:"checkbox",category:"UI controls",params:['"id"',"false"]},{func:"radioButton",category:"UI controls",params:['"id"',"false",'"group"']},{func:"getChecked",category:"UI controls",params:['"id"'],type:"value"},{func:"setChecked",category:"UI controls",params:['"id"',"true"]},{func:"image",category:"UI controls",params:['"id"','"http://code.org/images/logo.png"']},{func:"getImageURL",category:"UI controls",params:['"id"'],type:"value"},{func:"setImageURL",category:"UI controls",params:['"id"','"http://code.org/images/logo.png"']},{func:"playSound",category:"UI controls",params:['"http://soundbible.com/mp3/neck_snap-Vladimir-719669812.mp3"']},{func:"showElement",category:"UI controls",params:['"id"']},{func:"hideElement",category:"UI controls",params:['"id"']},{func:"deleteElement",category:"UI controls",params:['"id"']},{func:"setPosition",category:"UI controls",params:['"id"',"0","0","100","100"]},{func:"write",category:"UI controls",params:['"html"']},{func:"getXPosition",category:"UI controls",params:['"id"'],type:"value"},{func:"getYPosition",category:"UI controls",params:['"id"'],type:"value"},{func:"createCanvas",category:"Canvas",params:['"id"',"320","480"]},{func:"setActiveCanvas",category:"Canvas",params:['"id"']},{func:"line",category:"Canvas",params:["0","0","160","240"]},{func:"circle",category:"Canvas",params:["160","240","100"]},{func:"rect",category:"Canvas",params:["80","120","160","240"]},{func:"setStrokeWidth",category:"Canvas",params:["3"]},{func:"setStrokeColor",category:"Canvas",params:['"red"']},{func:"setFillColor",category:"Canvas",params:['"yellow"']},{func:"drawImage",category:"Canvas",params:['"imageId"',"0","0"]},{func:"getImageData",category:"Canvas",params:["0","0","320","480"],type:"value"},{func:"putImageData",category:"Canvas",params:["imageData","0","0"]},{func:"clearCanvas",category:"Canvas"},{func:"getRed",category:"Canvas",params:["imageData","0","0"],type:"value",dontAlias:!0,dontMarshal:!0},{func:"getGreen",category:"Canvas",params:["imageData","0","0"],type:"value",dontAlias:!0,dontMarshal:!0},{func:"getBlue",category:"Canvas",params:["imageData","0","0"],type:"value",dontAlias:!0,dontMarshal:!0},{func:"getAlpha",category:"Canvas",params:["imageData","0","0"],type:"value",dontAlias:!0,dontMarshal:!0},{func:"setRed",category:"Canvas",params:["imageData","0","0","255"],dontAlias:!0,dontMarshal:!0},{func:"setGreen",category:"Canvas",params:["imageData","0","0","255"],dontAlias:!0,dontMarshal:!0},{func:"setBlue",category:"Canvas",params:["imageData","0","0","255"],dontAlias:!0,dontMarshal:!0},{func:"setAlpha",category:"Canvas",params:["imageData","0","0","255"],dontAlias:!0,dontMarshal:!0},{func:"setRGB",category:"Canvas",params:["imageData","0","0","255","255","255"],dontAlias:!0,dontMarshal:!0},{func:"startWebRequest",category:"Data",params:['"http://api.openweathermap.org/data/2.5/weather?q=London,uk"',"function(status, type, content) {\n  \n}"]},{func:"setKeyValue",category:"Data",params:['"key"','"value"',"function () {\n  \n}"]},{func:"getKeyValue",category:"Data",params:['"key"',"function (value) {\n  \n}"]},{func:"createRecord",category:"Data",params:['"mytable"',"{name:'Alice'}","function(record) {\n  \n}"]},{func:"readRecords",category:"Data",params:['"mytable"',"{}","function(records) {\n  for (var i =0; i < records.length; i++) {\n    textLabel('id', records[i].id + ': ' + records[i].name);\n  }\n}"]},{func:"updateRecord",category:"Data",params:['"mytable"',"{id:1, name:'Bob'}","function(record) {\n  \n}"]},{func:"deleteRecord",category:"Data",params:['"mytable"',"{id:1}","function() {\n  \n}"]},{func:"getUserId",category:"Data",params:[],type:"value"},{func:"moveForward",category:"Turtle",params:["25"]},{func:"moveBackward",category:"Turtle",params:["25"]},{func:"move",category:"Turtle",params:["25","25"]},{func:"moveTo",category:"Turtle",params:["0","0"]},{func:"dot",category:"Turtle",params:["5"]},{func:"turnRight",category:"Turtle",params:["90"]},{func:"turnLeft",category:"Turtle",params:["90"]},{func:"turnTo",category:"Turtle",params:["0"]},{func:"arcRight",category:"Turtle",params:["90","25"]},{func:"arcLeft",category:"Turtle",params:["90","25"]},{func:"getX",category:"Turtle",type:"value"},{func:"getY",category:"Turtle",type:"value"},{func:"getDirection",category:"Turtle",type:"value"},{func:"penUp",category:"Turtle"},{func:"penDown",category:"Turtle"},{func:"penWidth",category:"Turtle",params:["3"]},{func:"penColor",category:"Turtle",params:['"red"']},{func:"show",category:"Turtle"},{func:"hide",category:"Turtle"},{func:"speed",category:"Turtle",params:["50"]},{func:"setTimeout",category:"Control",type:"either",params:["function() {\n  \n}","1000"]},{func:"clearTimeout",category:"Control",params:["0"]},{func:"setInterval",category:"Control",type:"either",params:["function() {\n  \n}","1000"]},{func:"clearInterval",category:"Control",params:["0"]},{func:"console.log",category:"Variables",params:['"Message"'],dontAlias:!0},{func:"imageUploadButton",category:"Advanced",params:['"id"','"text"']},{func:"container",category:"Advanced",params:['"id"','"html"']},{func:"innerHTML",category:"Advanced",params:['"id"','"html"']},{func:"setParent",category:"Advanced",params:['"id"','"parentId"']},{func:"setStyle",category:"Advanced",params:['"id"','"color:red;"']},{func:"getAttribute",category:"Advanced",params:['"id"','"scrollHeight"'],type:"value"},{func:"setAttribute",category:"Advanced",params:['"id"','"scrollHeight"',"200"]}],b.exports.categories={"UI controls":{color:"yellow",rgb:g,blocks:[]},Canvas:{color:"red",rgb:e,blocks:[]},Data:{color:"lightgreen",rgb:c,blocks:[]},Turtle:{color:"cyan",rgb:f,blocks:[]},Advanced:{color:"blue",rgb:d,blocks:[]}}},{}],6:[function(a,b){function c(){d&&d.setAnnotations(f)}var d,e=a("./errorMapper"),f=[];b.exports={attachToSession:function(a){if(d&&a!==d)throw new Error("Already attached to ace session");d=a},setJSLintAnnotations:function(a){e.processResults(a),f=a.data.slice(),c()},addRuntimeAnnotation:function(a,b,d){var e={row:b-1,col:0,raw:d,text:d,type:a.toLowerCase()};f.push(e),c()}}},{"./errorMapper":7}],7:[function(a,b){var c=[{original:/Assignment in conditional expression/,replacement:"For conditionals, use the comparison operator (===) to check if two things are equal."},{original:/(.*)\sis defined but never used./,replacement:"$1 is defined, but it's not called in your program."},{original:/(.*)\sis not defined./,replacement:"$1 hasn't been declared yet."}];b.exports.processResults=function(a){a.data.forEach(function(a){"info"===a.type&&(a.type="warning"),c.forEach(function(b){b.original.test(a.text)&&(a.text=a.text.replace(b.original,b.replacement))})})}},{}]},{},[20]);