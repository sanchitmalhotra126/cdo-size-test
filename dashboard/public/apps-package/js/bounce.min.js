require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/bounce/main.js":[function(a,b,c){(function(b){"use strict";var c=a("../appMain");window.Bounce=a("./bounce"),"undefined"!=typeof b&&(b.Bounce=window.Bounce);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.bounceMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Bounce,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","./blocks":"/home/ubuntu/staging/apps/build/js/bounce/blocks.js","./bounce":"/home/ubuntu/staging/apps/build/js/bounce/bounce.js","./levels":"/home/ubuntu/staging/apps/build/js/bounce/levels.js","./skins":"/home/ubuntu/staging/apps/build/js/bounce/skins.js"}],"/home/ubuntu/staging/apps/build/js/bounce/skins.js":[function(a,b,c){"use strict";var d=a("../skins"),e={bounce:{nonDisappearingPegmanHittingObstacle:!0,ballYOffset:10}};c.load=function(a,b){var c=d.load(a,b),f=e[c.id];if(c.retro={background:c.assetUrl("retro_background.png"),tiles:c.assetUrl("retro_tiles_wall.png"),goalTiles:c.assetUrl("retro_tiles_goal.png"),paddle:c.assetUrl("retro_paddle.png"),ball:c.assetUrl("retro_ball.png")},c.tiles=c.assetUrl("tiles_wall.png"),c.goalTiles=c.assetUrl("tiles_goal.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.ball=c.assetUrl("ball.png"),c.paddle=c.assetUrl("paddle.png"),c.obstacle=c.assetUrl("obstacle.png"),f.nonDisappearingPegmanHittingObstacle?c.nonDisappearingPegmanHittingObstacle=!0:c.nonDisappearingPegmanHittingObstacle=!1,c.obstacleScale=f.obstacleScale||1,c.largerObstacleAnimationTiles=c.assetUrl(f.largerObstacleAnimationTiles),c.hittingWallAnimation=c.assetUrl(f.hittingWallAnimation),c.approachingGoalAnimation=c.assetUrl(f.approachingGoalAnimation),c.rubberSound=[c.assetUrl("wall.mp3"),c.assetUrl("wall.ogg")],c.flagSound=[c.assetUrl("win_goal.mp3"),c.assetUrl("win_goal.ogg")],c.crunchSound=[c.assetUrl("wall0.mp3"),c.assetUrl("wall0.ogg")],c.ballStartSound=[c.assetUrl("ball_start.mp3"),c.assetUrl("ball_start.ogg")],c.winPointSound=[c.assetUrl("1_we_win.mp3"),c.assetUrl("1_we_win.ogg")],c.winPoint2Sound=[c.assetUrl("2_we_win.mp3"),c.assetUrl("2_we_win.ogg")],c.losePointSound=[c.assetUrl("1_we_lose.mp3"),c.assetUrl("1_we_lose.ogg")],c.losePoint2Sound=[c.assetUrl("2_we_lose.mp3"),c.assetUrl("2_we_lose.ogg")],c.goal1Sound=[c.assetUrl("1_goal.mp3"),c.assetUrl("1_goal.ogg")],c.goal2Sound=[c.assetUrl("2_goal.mp3"),c.assetUrl("2_goal.ogg")],c.woodSound=[c.assetUrl("1_paddle_bounce.mp3"),c.assetUrl("1_paddle_bounce.ogg")],c.retroSound=[c.assetUrl("2_paddle_bounce.mp3"),c.assetUrl("2_paddle_bounce.ogg")],c.slapSound=[c.assetUrl("1_wall_bounce.mp3"),c.assetUrl("1_wall_bounce.ogg")],c.hitSound=[c.assetUrl("2_wall_bounce.mp3"),c.assetUrl("2_wall_bounce.ogg")],void 0!==f.background){var g=Math.floor(Math.random()*f.background);c.background=c.assetUrl("background"+g+".png")}else c.background=c.assetUrl("background.png");return c.pegmanHeight=f.pegmanHeight||52,c.pegmanWidth=f.pegmanWidth||49,c.ballYOffset=f.ballYOffset||0,c.paddleYOffset=f.paddleYOffset||0,c}},{"../skins":"/home/ubuntu/staging/apps/build/js/skins.js"}],"/home/ubuntu/staging/apps/build/js/bounce/levels.js":[function(a,b,c){"use strict";var d=(a("./tiles").Direction,a("../block_utils").createToolbox);b.exports={1:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}]],scale:{snapRadius:2},softButtons:["leftButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>'},2:{ideal:5,requiredBlocks:[[{test:"moveRight",type:"bounce_moveRight"}],[{test:"moveLeft",type:"bounce_moveLeft"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,16,0,0,0,8],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>'},3:{requiredBlocks:[[{test:"moveUp",type:"bounce_moveUp"}]],scale:{snapRadius:2},softButtons:["upButton"],map:[[0,0,0,8,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_moveUp"></block>           <block type="bounce_moveDown"></block>'),startBlocks:'<block type="bounce_whenUp" deletable="false" x="20" y="20"></block>'},4:{requiredBlocks:[[{test:"moveRight",type:"bounce_moveRight"}],[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveUp",type:"bounce_moveUp"}],[{test:"moveDown",type:"bounce_moveDown"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,8,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,8],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,8,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_moveUp"></block>           <block type="bounce_moveDown"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenUp" deletable="false" x="20" y="120"></block>       <block type="bounce_whenDown" deletable="false" x="180" y="120"></block>'},5:{timeoutFailureTick:100,requiredBlocks:[[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},ballDirection:1.285*Math.PI,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[32,0,0,0,0,0,0,0],[0,0,0,0,0,0,4,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0]],toolbox:d('<block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenPaddleCollided" deletable="false" x="20" y="20"></block>'},6:{timeoutFailureTick:140,requiredBlocks:[[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},ballDirection:1.285*Math.PI,map:[[1,1,33,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,16,0,0,0,1]],toolbox:d('<block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenPaddleCollided" deletable="false" x="20" y="20"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="120"></block>'},7:{timeoutFailureTick:900,requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],failOnBallExit:!0,map:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,32,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="120"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="220"></block>'},10:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}],[{test:"incrementPlayerScore",type:"bounce_incrementPlayerScore"}],[{test:"incrementOpponentScore",type:"bounce_incrementOpponentScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],goal:{successCondition:function(){return Bounce.opponentScore>=2}},respawnBalls:!0,map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="100"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="180"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="260"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="340"></block>'},11:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}],[{test:"incrementPlayerScore",type:"bounce_incrementPlayerScore"}],[{test:"incrementOpponentScore",type:"bounce_incrementOpponentScore"}],[{test:"launchBall",type:"bounce_launchBall"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],minWorkspaceHeight:750,goal:{successCondition:function(){return Bounce.opponentScore>=2}},map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>           <block type="bounce_launchBall"></block>           <block type="bounce_setPaddleSpeed"></block>           <block type="bounce_setBallSpeed"></block>           <block type="bounce_setBackground"></block>           <block type="bounce_setBall"></block>           <block type="bounce_setPaddle"></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>       <block type="bounce_whenLeft" deletable="false" x="20" y="180"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="180"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="270"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="370"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="470"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="590"></block>'},12:{requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],minWorkspaceHeight:800,freePlay:!0,map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>           <block type="bounce_launchBall"></block>           <block type="bounce_setPaddleSpeed"></block>           <block type="bounce_setBallSpeed"></block>           <block type="bounce_setBackground"></block>           <block type="bounce_setBall"></block>           <block type="bounce_setPaddle"></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>       <block type="bounce_whenLeft" deletable="false" x="20" y="220"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="220"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="310"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="410"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="510"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="630"></block>'}}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js"}],"/home/ubuntu/staging/apps/build/js/bounce/bounce.js":[function(a,b,c){"use strict";var d=a("../StudioApp").singleton,e=(a("../locale"),a("./locale")),f=(a("../skins"),a("./tiles")),g=a("../codegen"),h=a("./api"),i=a("../templates/AppView.jsx"),j=a("../templates/codeWorkspace.html.ejs"),k=a("../templates/visualizationColumn.html.ejs"),l=a("../dom"),m=a("../hammer"),n=(a("../utils"),a("../dropletUtils")),o=a("../constants"),p=o.KeyCodes,q=(f.Direction,f.SquareType),r=d.ResultType,s=d.TestResults,t=b.exports;t.keyState={},t.gesturesObserved={},t.btnState={};var u={UP:0,DOWN:1};t.BallFlags={MISSED_PADDLE:1,IN_GOAL:2,LAUNCHING:4};var v,w,x={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"},y=25;d.setCheckForEmptyBlocks(!0);t.scale={snapRadius:1,stepSpeed:33};var z={text:e.shareBounceTwitter(),hashtag:"BounceCode"},A=function(){t.map=v.map,t.timeoutFailureTick=v.timeoutFailureTick||1/0,t.minWorkspaceHeight=v.minWorkspaceHeight,t.softButtons_=v.softButtons||[],t.respawnBalls=v.respawnBalls||!1,t.failOnBallExit=v.failOnBallExit||!1;for(var a in v.scale)t.scale[a]=v.scale[a];t.ROWS=t.map.length,t.COLS=t.map[0].length,B(),t.SQUARE_SIZE=50,t.PEGMAN_HEIGHT=w.pegmanHeight,t.PEGMAN_WIDTH=w.pegmanWidth,t.BALL_Y_OFFSET=w.ballYOffset,t.PADDLE_Y_OFFSET=w.paddleYOffset,t.MARKER_HEIGHT=43,t.MARKER_WIDTH=50,t.MAZE_WIDTH=t.SQUARE_SIZE*t.COLS,t.MAZE_HEIGHT=t.SQUARE_SIZE*t.ROWS,t.PATH_WIDTH=t.SQUARE_SIZE/3},B=function(){t.wallMap=new Array(t.ROWS);for(var a=0;a<t.ROWS;a++)t.wallMap[a]=new Array(t.COLS)},C=a("../timeoutList"),D={"1X101":[1,0],"11X10":[2,1],"11XX0":[2,1],"1XX11":[2,0],"1X001":[1,0],"1X100":[1,0],"1101X":[0,1],"110XX":[0,1],"1X11X":[0,0],null0:[1,1]},E={"1X101":[2,3],"1XX11":[3,3],"1X001":[3,3],"1X11X":[0,2],"1X100":[0,2],null0:[1,1]},F=function(a,b){return void 0===t.map[b]||void 0===t.map[b][a]?"X":t.map[b][a]&q.WALL?"1":"0"},G=function(a,b){return void 0===t.map[b]||void 0===t.map[b][a]?"X":t.map[b][a]&q.GOAL?"1":"0"};t.createBallElements=function(a){var b=document.getElementById("svgBounce"),c=document.createElementNS(Blockly.SVG_NS,"clipPath");c.setAttribute("id","ballClipPath"+a);var d=document.createElementNS(Blockly.SVG_NS,"rect");d.setAttribute("id","ballClipRect"+a),d.setAttribute("width",t.PEGMAN_WIDTH),d.setAttribute("height",t.PEGMAN_HEIGHT),c.appendChild(d),b.appendChild(c);var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttribute("id","ball"+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.ballImage),e.setAttribute("height",t.PEGMAN_HEIGHT),e.setAttribute("width",t.PEGMAN_WIDTH),e.setAttribute("clip-path","url(#ballClipPath"+a+")"),b.appendChild(e)},t.deleteBallElements=function(a){var b=document.getElementById("ballClipPath"+a);b.parentNode.removeChild(b);var c=document.getElementById("ball"+a);c.parentNode.removeChild(c)};var H=function(){var a,b,c,d,e=document.getElementById("svgBounce");e.setAttribute("width",t.MAZE_WIDTH),e.setAttribute("height",t.MAZE_HEIGHT);var f=new m(e);f.on("drag",t.onSvgDrag);var g=document.getElementById("visualizationColumn");g.style.width=t.MAZE_WIDTH+"px",w.background&&(d=document.createElementNS(Blockly.SVG_NS,"image"),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.background),d.setAttribute("id","background"),d.setAttribute("height",t.MAZE_HEIGHT),d.setAttribute("width",t.MAZE_WIDTH),d.setAttribute("x",0),d.setAttribute("y",0),e.appendChild(d));var h=0;for(c=0;c<t.ROWS;c++)for(b=0;b<t.COLS;b++){var i,j,k;if(d=F(b,c)+F(b,c-1)+F(b+1,c)+F(b,c+1)+F(b-1,c),D[d]?(i=D[d][0],j=D[d][1],k=w.tiles):(d=G(b,c)+G(b,c-1)+G(b+1,c)+G(b,c+1)+G(b-1,c),E[d]||(d="null0"),i=E[d][0],j=E[d][1],k=w.goalTiles),"null0"!=d){var l=document.createElementNS(Blockly.SVG_NS,"clipPath");l.setAttribute("id","tileClipPath"+h);var n=document.createElementNS(Blockly.SVG_NS,"rect");n.setAttribute("width",t.SQUARE_SIZE),n.setAttribute("height",t.SQUARE_SIZE),n.setAttribute("x",b*t.SQUARE_SIZE),n.setAttribute("y",c*t.SQUARE_SIZE),l.appendChild(n),e.appendChild(l);var o=document.createElementNS(Blockly.SVG_NS,"image");o.setAttribute("id","tileElement"+h),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",k),o.setAttribute("height",4*t.SQUARE_SIZE),o.setAttribute("width",5*t.SQUARE_SIZE),o.setAttribute("clip-path","url(#tileClipPath"+h+")"),o.setAttribute("x",(b-i)*t.SQUARE_SIZE),o.setAttribute("y",(c-j)*t.SQUARE_SIZE),e.appendChild(o);var p=document.createElementNS(Blockly.SVG_NS,"animate");p.setAttribute("id","tileAnimation"+h),p.setAttribute("attributeType","CSS"),p.setAttribute("attributeName","opacity"),p.setAttribute("from",1),p.setAttribute("to",0),p.setAttribute("dur","1s"),p.setAttribute("begin","indefinite"),o.appendChild(p)}h++}for(t.ballImage=w.ball,a=0;a<t.ballCount;a++)t.createBallElements(a);if(t.paddleStart_){var r=document.createElementNS(Blockly.SVG_NS,"clipPath");r.setAttribute("id","paddleClipPath");var s=document.createElementNS(Blockly.SVG_NS,"rect");s.setAttribute("id","paddleClipRect"),s.setAttribute("width",t.PEGMAN_WIDTH),s.setAttribute("height",t.PEGMAN_HEIGHT),r.appendChild(s),e.appendChild(r);var u=document.createElementNS(Blockly.SVG_NS,"image");u.setAttribute("id","paddle"),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.paddle),u.setAttribute("height",t.PEGMAN_HEIGHT),u.setAttribute("width",t.PEGMAN_WIDTH),u.setAttribute("clip-path","url(#paddleClipPath)"),e.appendChild(u)}if(t.paddleFinish_)for(a=0;a<t.paddleFinishCount;a++){var v=document.createElementNS(Blockly.SVG_NS,"image");v.setAttribute("id","paddlefinish"+a),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goal),v.setAttribute("height",t.MARKER_HEIGHT),v.setAttribute("width",t.MARKER_WIDTH),e.appendChild(v)}if(t.ballFinish_){var x=document.createElementNS(Blockly.SVG_NS,"image");x.setAttribute("id","ballfinish"),x.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goal),x.setAttribute("height",t.MARKER_HEIGHT),x.setAttribute("width",t.MARKER_WIDTH),e.appendChild(x)}var y=document.createElementNS(Blockly.SVG_NS,"text");if(y.setAttribute("id","score"),y.setAttribute("class","bounce-score"),y.setAttribute("x",t.MAZE_WIDTH/2),y.setAttribute("y",60),y.appendChild(document.createTextNode("0")),y.setAttribute("visibility","hidden"),e.appendChild(y),w.hittingWallAnimation){var z=document.createElementNS(Blockly.SVG_NS,"image");z.setAttribute("id","wallAnimation"),z.setAttribute("height",t.SQUARE_SIZE),z.setAttribute("width",t.SQUARE_SIZE),z.setAttribute("visibility","hidden"),e.appendChild(z)}var A=0;for(c=0;c<t.ROWS;c++)for(b=0;b<t.COLS;b++){if(t.map[c][b]==q.OBSTACLE){var B=document.createElementNS(Blockly.SVG_NS,"image");B.setAttribute("id","obstacle"+A),B.setAttribute("height",t.MARKER_HEIGHT*w.obstacleScale),B.setAttribute("width",t.MARKER_WIDTH*w.obstacleScale),B.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.obstacle),B.setAttribute("x",t.SQUARE_SIZE*(b+.5)-B.getAttribute("width")/2),B.setAttribute("y",t.SQUARE_SIZE*(c+.9)-B.getAttribute("height")),e.appendChild(B)}++A}};t.calcDistance=function(a,b){return Math.sqrt(a*a+b*b)};var I=function(a,b,c){var d=c||.01;return Math.abs(a-b)<d};t.isBallOutOfBounds=function(a){return t.ballX[a]<0?!0:t.ballX[a]>t.COLS-1?!0:t.ballY[a]<f.Y_TOP_BOUNDARY?!0:t.ballY[a]>t.ROWS-1?!0:!1};var J=function(a,b,c){return function(){var d=Array.prototype.slice.apply(arguments).concat(c);b.apply(a,d)}};t.callUserGeneratedCode=function(a){try{a.call(t,d,h)}catch(b){console&&console.log(b)}},t.onTick=function(){t.tickCount++,1===t.tickCount&&t.callUserGeneratedCode(t.whenGameStarts);for(var a in p)if(t.keyState[p[a]]&&"keydown"==t.keyState[p[a]])switch(p[a]){case p.LEFT:t.callUserGeneratedCode(t.whenLeft);break;case p.UP:t.callUserGeneratedCode(t.whenUp);break;case p.RIGHT:t.callUserGeneratedCode(t.whenRight);break;case p.DOWN:t.callUserGeneratedCode(t.whenDown)}for(var b in x)if(t.btnState[x[b]]&&t.btnState[x[b]]==u.DOWN)switch(x[b]){case x.LEFT:t.callUserGeneratedCode(t.whenLeft);break;case x.UP:t.callUserGeneratedCode(t.whenUp);break;case x.RIGHT:t.callUserGeneratedCode(t.whenRight);break;case x.DOWN:t.callUserGeneratedCode(t.whenDown)}for(var c in t.gesturesObserved){switch(c){case"left":t.callUserGeneratedCode(t.whenLeft);break;case"up":t.callUserGeneratedCode(t.whenUp);break;case"right":t.callUserGeneratedCode(t.whenRight);break;case"down":t.callUserGeneratedCode(t.whenDown)}0===t.gesturesObserved[c]--&&delete t.gesturesObserved[c]}for(var d=0;d<t.ballCount;d++){var e=t.ballSpeed[d]*Math.sin(t.ballDir[d]),g=-t.ballSpeed[d]*Math.cos(t.ballDir[d]),h=t.ballX[d]>=0&&t.ballX[d]<=t.COLS-1,i=t.ballY[d]>=f.Y_TOP_BOUNDARY,j=t.ballY[d]<=t.ROWS-1;if(t.ballX[d]+=e,t.ballY[d]+=g,0===(t.ballFlags[d]&(t.BallFlags.MISSED_PADDLE|t.BallFlags.IN_GOAL))){var k=t.ballX[d]>=0&&t.ballX[d]<=t.COLS-1,l=t.ballY[d]>=f.Y_TOP_BOUNDARY,m=t.ballY[d]<=t.ROWS-1;i&&h&&!k&&t.callUserGeneratedCode(t.whenWallCollided),h&&i&&!l&&(t.map[0][Math.round(t.ballX[d])]&q.GOAL?(t.callUserGeneratedCode(t.whenBallInGoal),t.ballFlags[d]|=t.BallFlags.IN_GOAL,C.setTimeout(J(this,t.moveBallOffscreen,d),1e3),t.respawnBalls&&t.launchBall(d)):t.callUserGeneratedCode(t.whenWallCollided));var n=t.ballX[d]-t.paddleX,o=t.ballY[d]-t.paddleY,s=t.calcDistance(n,o);s<f.PADDLE_BALL_COLLIDE_DISTANCE?t.callUserGeneratedCode(t.whenPaddleCollided):j&&!m&&(t.callUserGeneratedCode(t.whenBallMissesPaddle),t.ballFlags[d]|=t.BallFlags.MISSED_PADDLE,C.setTimeout(J(this,t.moveBallOffscreen,d),1e3),t.respawnBalls?t.launchBall(d):t.failOnBallExit&&(t.result=r.FAILURE,t.onPuzzleComplete()))}t.displayBall(d,t.ballX[d],t.ballY[d])}t.displayPaddle(t.paddleX,t.paddleY),M()&&t.onPuzzleComplete()},t.onSvgDrag=function(a){t.intervalId&&(t.gesturesObserved[a.gesture.direction]=Math.round(a.gesture.distance/y),a.gesture.preventDefault())},t.onKey=function(a){t.keyState[a.keyCode]=a.type,t.intervalId&&a.keyCode>=p.LEFT&&a.keyCode<=p.DOWN&&a.preventDefault()},t.onArrowButtonDown=function(a,b){t.btnState[b]=u.DOWN,a.preventDefault()},t.onArrowButtonUp=function(a,b){t.btnState[b]=u.UP},t.onMouseUp=function(a){t.btnState={}},t.init=function(b){d.reset=this.reset.bind(this),d.runButtonClick=this.runButtonClick.bind(this),t.clearEventHandlersKillTickLoop(),w=b.skin,v=b.level,A(),window.addEventListener("keydown",t.onKey,!1),window.addEventListener("keyup",t.onKey,!1),b.loadAudio=function(){d.loadAudio(w.winSound,"win"),d.loadAudio(w.startSound,"start"),d.loadAudio(w.ballStartSound,"ballstart"),d.loadAudio(w.failureSound,"failure"),d.loadAudio(w.rubberSound,"rubber"),d.loadAudio(w.crunchSound,"crunch"),d.loadAudio(w.flagSound,"flag"),d.loadAudio(w.winPointSound,"winpoint"),d.loadAudio(w.winPoint2Sound,"winpoint2"),d.loadAudio(w.losePointSound,"losepoint"),d.loadAudio(w.losePoint2Sound,"losepoint2"),d.loadAudio(w.goal1Sound,"goal1"),d.loadAudio(w.goal2Sound,"goal2"),d.loadAudio(w.woodSound,"wood"),d.loadAudio(w.retroSound,"retro"),d.loadAudio(w.slapSound,"slap"),d.loadAudio(w.hitSound,"hit")},b.afterInject=function(){for(var a in x)l.addMouseUpTouchEvent(document.getElementById(x[a]),J(this,t.onArrowButtonUp,x[a])),l.addMouseDownTouchEvent(document.getElementById(x[a]),J(this,t.onArrowButtonDown,x[a]));document.addEventListener("mouseup",t.onMouseUp,!1),Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=t.scale.snapRadius,t.ballStart_=[],t.ballX=[],t.ballY=[],t.ballDir=[],t.ballSpeed=[],t.ballFlags=[],t.ballCount=0,t.originalBallCount=0,t.paddleFinishCount=0,t.defaultBallSpeed=v.ballSpeed||f.DEFAULT_BALL_SPEED,t.defaultBallDir=v.ballDirection||f.DEFAULT_BALL_DIRECTION;for(var b=0;b<t.ROWS;b++)for(var c=0;c<t.COLS;c++)t.map[b][c]&q.PADDLEFINISH?(0===t.paddleFinishCount&&(t.paddleFinish_=[]),t.paddleFinish_[t.paddleFinishCount]={x:c,y:b},t.paddleFinishCount++):t.map[b][c]&q.BALLSTART?(t.ballStart_[t.ballCount]={x:c,y:b},t.ballCount++):t.map[b][c]&q.PADDLESTART?t.paddleStart_={x:c,y:b}:t.map[b][c]&q.BALLFINISH?t.ballFinish_={x:c,y:b}:t.map[b][c]&q.GOAL&&(t.goalLocated_=!0);t.originalBallCount=t.ballCount,H()},b.blockArrangement={when_run:{x:20,y:20},bounce_whenLeft:{x:20,y:220},bounce_whenRight:{x:180,y:220},bounce_whenPaddleCollided:{x:20,y:310},bounce_whenWallCollided:{x:20,y:410},bounce_whenBallInGoal:{x:20,y:510},bounce_whenBallMissesPaddle:{x:20,y:630}},b.twitter=z,b.makeYourOwn=b.share,b.makeString=e.makeYourOwn(),b.makeUrl="http://code.org/bounce",b.makeImage=d.assetUrl("media/promo.png"),b.enableShowCode=!1,b.enableShowBlockCount=!1;var c=function(){return j({assetUrl:d.assetUrl,data:{localeDirection:d.localeDirection(),blockUsed:void 0,idealBlockNumber:void 0,editCode:v.editCode,blockCounterClass:"block-counter-default",readonlyWorkspace:b.readonlyWorkspace}})},g=function(){return k({assetUrl:d.assetUrl,data:{visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:d.assetUrl})}})},h=function(){d.init(b);var a=document.getElementById("finishButton");l.addClickTouchEvent(a,t.onPuzzleComplete)};ReactDOM.render(React.createElement(i,{assetUrl:d.assetUrl,isEmbedView:!!b.embed,isShareView:!!b.share,renderCodeWorkspace:c,renderVisualizationColumn:g,onMount:h}),document.getElementById(b.containerId))},t.clearEventHandlersKillTickLoop=function(){t.whenWallCollided=null,t.whenBallInGoal=null,t.whenBallMissesPaddle=null,t.whenPaddleCollided=null,t.whenDown=null,t.whenLeft=null,t.whenRight=null,t.whenUp=null,t.whenGameStarts=null,t.intervalId&&window.clearInterval(t.intervalId),t.intervalId=0,C.clearTimeouts()},t.moveBallOffscreen=function(a){t.ballX[a]=100,t.ballY[a]=100,t.ballDir[a]=0,t.ballSpeed[a]=0},t.playSoundAndResetBall=function(a){t.resetBall(a,{randomPosition:!0}),d.playAudio("ballstart")},t.launchBall=function(a){t.ballFlags[a]|=t.BallFlags.LAUNCHING,C.setTimeout(J(this,t.playSoundAndResetBall,a),3e3)},t.resetBall=function(a,b){var c=b.randomPosition||"undefined"==typeof t.ballStart_[a];t.ballX[a]=c?Math.floor(Math.random()*t.COLS):t.ballStart_[a].x,t.ballY[a]=c?f.DEFAULT_BALL_START_Y:t.ballStart_[a].y,t.ballDir[a]=c?Math.random()*Math.PI/2+.75*Math.PI:t.defaultBallDir,t.ballSpeed[a]=t.currentBallSpeed,t.ballFlags[a]=0,t.displayBall(a,t.ballX[a],t.ballY[a])},t.reset=function(a){var b;t.clearEventHandlersKillTickLoop();var c=0;for(b=0;b<t.softButtons_.length;b++)document.getElementById(t.softButtons_[b]).style.display="inline",c++;if(c){var d=document.getElementById("soft-buttons");d.className="soft-buttons-"+c}for(t.gesturesObserved={},t.playerScore=0,t.opponentScore=0,document.getElementById("score").setAttribute("visibility","hidden"),t.setBackground("hardcourt"),t.setBall("hardcourt"),t.setPaddle("hardcourt"),t.currentBallSpeed=t.defaultBallSpeed,b=t.originalBallCount;b<t.ballCount;b++)t.deleteBallElements(b);for(t.ballCount=t.originalBallCount,b=0;b<t.ballCount;b++)t.resetBall(b,{});t.paddleX=t.paddleStart_.x,t.paddleY=t.paddleStart_.y,t.paddleSpeed=f.DEFAULT_PADDLE_SPEED,t.displayPaddle(t.paddleX,t.paddleY);document.getElementById("svgBounce");if(t.paddleFinish_)for(b=0;b<t.paddleFinishCount;b++){t.paddleFinish_[b].finished=!1;var e=document.getElementById("paddlefinish"+b);e.setAttribute("x",t.SQUARE_SIZE*(t.paddleFinish_[b].x+.5)-e.getAttribute("width")/2),e.setAttribute("y",t.SQUARE_SIZE*(t.paddleFinish_[b].y+.9)-e.getAttribute("height")),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goal)}if(t.ballFinish_){var g=document.getElementById("ballfinish");g.setAttribute("x",t.SQUARE_SIZE*(t.ballFinish_.x+.5)-g.getAttribute("width")/2),g.setAttribute("y",t.SQUARE_SIZE*(t.ballFinish_.y+.9)-g.getAttribute("height")),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goal)}var h,i,j=0;for(i=0;i<t.ROWS;i++)for(h=0;h<t.COLS;h++){var k=document.getElementById("obstacle"+j);k&&k.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.obstacle),++j}var l=0;for(i=0;i<t.ROWS;i++)for(h=0;h<t.COLS;h++){var m=document.getElementById("tileClipPath"+l);m&&m.setAttribute("visibility","visible");var n=document.getElementById("tileElement"+l);n&&n.setAttribute("opacity",1),l++}},t.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),d.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),d.reset(!1),d.attempts++,t.execute(),v.freePlay&&!d.hideSource){var c=document.getElementById("share-cell");c.className="share-cell-enabled"}t.goalLocated_&&(document.getElementById("score").setAttribute("visibility","visible"),t.displayScore())};var K=function(){t.waitingForReport||d.displayFeedback({app:"bounce",skin:w.id,feedbackType:t.testResults,response:t.response,level:v,showingSharing:v.freePlay,twitter:z,appStrings:{reinfFeedbackMsg:e.reinfFeedbackMsg(),sharingText:e.shareGame()}})};t.onReportComplete=function(a){t.response=a,t.waitingForReport=!1,d.onReportComplete(a),K()},t.execute=function(){var a=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenRun");t.result=r.UNSET,t.testResults=s.NO_TESTS_RUN,t.waitingForReport=!1,t.response=null,v.editCode&&(a=n.generateCodeAliases(null,"Bounce"),a+=d.editor.getValue());var b=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenWallCollided"),c=g.functionFromCode(b,{StudioApp:d,Bounce:h}),e=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenBallInGoal"),f=g.functionFromCode(e,{StudioApp:d,Bounce:h}),i=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenBallMissesPaddle"),j=g.functionFromCode(i,{StudioApp:d,Bounce:h}),k=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenPaddleCollided"),l=g.functionFromCode(k,{StudioApp:d,Bounce:h}),m=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenLeft"),o=g.functionFromCode(m,{StudioApp:d,Bounce:h}),p=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenRight"),q=g.functionFromCode(p,{StudioApp:d,Bounce:h}),u=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenUp"),w=g.functionFromCode(u,{StudioApp:d,Bounce:h}),x=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenDown"),y=g.functionFromCode(x,{StudioApp:d,Bounce:h}),z=Blockly.Generator.blockSpaceToCode("JavaScript","when_run"),A=g.functionFromCode(z,{StudioApp:d,Bounce:h});d.playAudio(t.ballCount>0?"ballstart":"start"),d.reset(!1),t.whenWallCollided=c,t.whenBallInGoal=f,t.whenBallMissesPaddle=j,t.whenPaddleCollided=l,t.whenLeft=o,t.whenRight=q,t.whenUp=w,t.whenDown=y,t.whenGameStarts=A,t.tickCount=0,t.intervalId=window.setInterval(t.onTick,t.scale.stepSpeed)},t.onPuzzleComplete=function(){v.freePlay&&(t.result=r.SUCCESS),t.clearEventHandlersKillTickLoop();var a=t.result==r.SUCCESS;v.freePlay?t.testResults=s.FREE_PLAY:t.testResults=d.getTestResults(a),t.testResults>=s.FREE_PLAY?d.playAudio("win"):d.playAudio("failure"),v.editCode&&(t.testResults=a?s.ALL_PASS:s.TOO_FEW_BLOCKS_FAIL);
var b=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),c=Blockly.Xml.domToText(b);t.waitingForReport=!0,d.report({app:"bounce",level:v.id,result:t.result===r.SUCCESS,testResult:t.testResults,program:encodeURIComponent(c),onComplete:t.onReportComplete})},t.setTileTransparent=function(){for(var a=0,b=0;b<t.ROWS;b++)for(var c=0;c<t.COLS;c++){var d=document.getElementById("tileElement"+a),e=document.getElementById("tileAnimation"+a);d&&d.setAttribute("opacity",0),e&&e.beginElement(),a++}},t.displayBall=function(a,b,c){var d=document.getElementById("ball"+a);d.setAttribute("x",b*t.SQUARE_SIZE),d.setAttribute("y",c*t.SQUARE_SIZE+t.BALL_Y_OFFSET);var e=document.getElementById("ballClipRect"+a);e.setAttribute("x",b*t.SQUARE_SIZE),e.setAttribute("y",d.getAttribute("y"))},t.displayPaddle=function(a,b){var c=document.getElementById("paddle");c.setAttribute("x",a*t.SQUARE_SIZE),c.setAttribute("y",b*t.SQUARE_SIZE+t.PADDLE_Y_OFFSET);var d=document.getElementById("paddleClipRect");d.setAttribute("x",a*t.SQUARE_SIZE),d.setAttribute("y",c.getAttribute("y"))},t.displayScore=function(){var a=document.getElementById("score");a.textContent=e.scoreText({playerScore:t.playerScore,opponentScore:t.opponentScore})};var L=function(a){return"hardcourt"===a?w:w[a]};t.setBackground=function(a){var b=document.getElementById("background");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",L(a).background);for(var c=0,d=0;d<t.ROWS;d++)for(var e=0;e<t.COLS;e++){var f,g=!1,h=F(e,d)+F(e,d-1)+F(e+1,d)+F(e,d+1)+F(e-1,d);D[h]?f=L(a).tiles:(h=G(e,d)+G(e,d-1)+G(e+1,d)+G(e,d+1)+G(e-1,d),E[h]||(g=!0),f=L(a).goalTiles),g||(b=document.getElementById("tileElement"+c),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f)),c++}},t.setBall=function(a){t.ballImage=L(a).ball;for(var b=0;b<t.ballCount;b++){var c=document.getElementById("ball"+b);c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.ballImage)}},t.setPaddle=function(a){var b=document.getElementById("paddle");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",L(a).paddle)},t.timedOut=function(){return t.tickCount>t.timeoutFailureTick},t.allFinishesComplete=function(){var a;if(t.paddleFinish_){var b,c;for(a=0,b=0;a<t.paddleFinishCount;a++)if(t.paddleFinish_[a].finished)b++;else if(I(t.paddleX,t.paddleFinish_[a].x,f.FINISH_COLLIDE_DISTANCE)&&I(t.paddleY,t.paddleFinish_[a].y,f.FINISH_COLLIDE_DISTANCE)){t.paddleFinish_[a].finished=!0,b++,c=!0;var e=document.getElementById("paddlefinish"+a);e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goalSuccess)}return c&&b!=t.paddleFinishCount&&d.playAudio("flag"),b==t.paddleFinishCount}if(t.ballFinish_)for(a=0;a<t.ballCount;a++)if(I(t.ballX[a],t.ballFinish_.x,f.FINISH_COLLIDE_DISTANCE)&&I(t.ballY[a],t.ballFinish_.y,f.FINISH_COLLIDE_DISTANCE)){var g=document.getElementById("ballfinish");return g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goalSuccess),!0}return!1};var M=function(){return v.goal&&v.goal.successCondition&&v.goal.successCondition()?(t.result=r.SUCCESS,!0):v.goal&&v.goal.failureCondition&&v.goal.failureCondition()?(t.result=r.FAILURE,!0):t.allFinishesComplete()?(t.result=r.SUCCESS,!0):t.timedOut()?(t.result=r.FAILURE,!0):!1}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","../hammer":"/home/ubuntu/staging/apps/build/js/hammer.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../templates/AppView.jsx":"/home/ubuntu/staging/apps/build/js/templates/AppView.jsx","../templates/codeWorkspace.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/codeWorkspace.html.ejs","../templates/visualizationColumn.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/visualizationColumn.html.ejs","../timeoutList":"/home/ubuntu/staging/apps/build/js/timeoutList.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./api":"/home/ubuntu/staging/apps/build/js/bounce/api.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/bounce/controls.html.ejs","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/bounce/visualization.html.ejs"}],"/home/ubuntu/staging/apps/build/js/bounce/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgBounce">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/bounce/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=(require("./locale"),require("../locale"));buf.push('\n\n<div id="soft-buttons" class="soft-buttons-none">\n  <button id="leftButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="left-btn icon21">\n  </button>\n  <button id="rightButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="right-btn icon21">\n  </button>\n  <button id="upButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="up-btn icon21">\n  </button>\n  <button id="downButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="down-btn icon21">\n  </button>\n</div>\n<div id="share-cell-wrapper">\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/bounce/blocks.js":[function(a,b,c){"use strict";var d=a("./locale"),e=(a("../codegen"),function(a,b){var c=a.getTitleValue("VALUE");if("random"===c){var d=a.VALUES.slice(1).map(function(a){return a[1]});c="Bounce.random(["+d+"])"}return"Bounce."+b+"('block_id_"+a.id+"', "+c+");\n"});c.install=function(a,b){var c=a.Generator.get("JavaScript");a.JavaScript=c,a.Blocks.bounce_whenLeft={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenLeft()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenLeftTooltip())}},c.bounce_whenLeft=function(){return"\n"},a.Blocks.bounce_whenRight={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenRight()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenRightTooltip())}},c.bounce_whenRight=function(){return"\n"},a.Blocks.bounce_whenUp={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenUp()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenUpTooltip())}},c.bounce_whenUp=function(){return"\n"},a.Blocks.bounce_whenDown={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenDown()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenDownTooltip())}},c.bounce_whenDown=function(){return"\n"},a.Blocks.bounce_whenWallCollided={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenWallCollided()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenWallCollidedTooltip())}},c.bounce_whenWallCollided=function(){return"\n"},a.Blocks.bounce_whenBallInGoal={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenBallInGoal()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenBallInGoalTooltip())}},c.bounce_whenBallInGoal=function(){return"\n"},a.Blocks.bounce_whenBallMissesPaddle={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenBallMissesPaddle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenBallMissesPaddleTooltip())}},c.bounce_whenBallMissesPaddle=function(){return"\n"},a.Blocks.bounce_whenPaddleCollided={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenPaddleCollided()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenPaddleCollidedTooltip())}},c.bounce_whenPaddleCollided=function(){return"\n"},a.Blocks.bounce_moveLeft={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveLeft()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveLeftTooltip())}},c.bounce_moveLeft=function(){return"Bounce.moveLeft('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveRight={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveRight()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveRightTooltip())}},c.bounce_moveRight=function(){return"Bounce.moveRight('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveUp={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveUp()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveUpTooltip())}},c.bounce_moveUp=function(){return"Bounce.moveUp('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveDown={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveDown()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveDownTooltip())}},c.bounce_moveDown=function(){return"Bounce.moveDown('block_id_"+this.id+"');\n"},a.Blocks.bounce_playSound={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.SOUNDS),"SOUND"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.playSoundTooltip())}},a.Blocks.bounce_playSound.SOUNDS=[[d.playSoundHit(),"hit"],[d.playSoundWood(),"wood"],[d.playSoundRetro(),"retro"],[d.playSoundSlap(),"slap"],[d.playSoundRubber(),"rubber"],[d.playSoundCrunch(),"crunch"],[d.playSoundWinPoint(),"winpoint"],[d.playSoundWinPoint2(),"winpoint2"],[d.playSoundLosePoint(),"losepoint"],[d.playSoundLosePoint2(),"losepoint2"],[d.playSoundGoal1(),"goal1"],[d.playSoundGoal2(),"goal2"]],c.bounce_playSound=function(){return"Bounce.playSound('block_id_"+this.id+"', '"+this.getTitleValue("SOUND")+"');\n"},a.Blocks.bounce_incrementPlayerScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.incrementPlayerScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementPlayerScoreTooltip())}},c.bounce_incrementPlayerScore=function(){return"Bounce.incrementPlayerScore('block_id_"+this.id+"');\n"},a.Blocks.bounce_incrementOpponentScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.incrementOpponentScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementOpponentScoreTooltip())}},c.bounce_incrementOpponentScore=function(){return"Bounce.incrementOpponentScore('block_id_"+this.id+"');\n"},a.Blocks.bounce_bounceBall={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.bounceBall()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.bounceBallTooltip())}},c.bounce_bounceBall=function(){return"Bounce.bounceBall('block_id_"+this.id+"');\n"},a.Blocks.bounce_launchBall={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.launchBall()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.launchBallTooltip())}},c.bounce_launchBall=function(){return"Bounce.launchBall('block_id_"+this.id+"');\n"},a.Blocks.bounce_setBallSpeed={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBallSpeedTooltip())}},a.Blocks.bounce_setBallSpeed.VALUES=[[d.setBallSpeedRandom(),"random"],[d.setBallSpeedVerySlow(),"Bounce.BallSpeed.VERY_SLOW"],[d.setBallSpeedSlow(),"Bounce.BallSpeed.SLOW"],[d.setBallSpeedNormal(),"Bounce.BallSpeed.NORMAL"],[d.setBallSpeedFast(),"Bounce.BallSpeed.FAST"],[d.setBallSpeedVeryFast(),"Bounce.BallSpeed.VERY_FAST"]],c.bounce_setBallSpeed=function(a){return e(this,"setBallSpeed")},a.Blocks.bounce_setPaddleSpeed={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPaddleSpeedTooltip())}},a.Blocks.bounce_setPaddleSpeed.VALUES=[[d.setPaddleSpeedRandom(),"random"],[d.setPaddleSpeedVerySlow(),"Bounce.PaddleSpeed.VERY_SLOW"],[d.setPaddleSpeedSlow(),"Bounce.PaddleSpeed.SLOW"],[d.setPaddleSpeedNormal(),"Bounce.PaddleSpeed.NORMAL"],[d.setPaddleSpeedFast(),"Bounce.PaddleSpeed.FAST"],[d.setPaddleSpeedVeryFast(),"Bounce.PaddleSpeed.VERY_FAST"]],c.bounce_setPaddleSpeed=function(a){return e(this,"setPaddleSpeed")},a.Blocks.bounce_setBackground={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBackgroundTooltip())}},a.Blocks.bounce_setBackground.VALUES=[[d.setBackgroundRandom(),"random"],[d.setBackgroundHardcourt(),'"hardcourt"'],[d.setBackgroundRetro(),'"retro"']],c.bounce_setBackground=function(){return e(this,"setBackground")},a.Blocks.bounce_setBall={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBallTooltip())}},a.Blocks.bounce_setBall.VALUES=[[d.setBallRandom(),"random"],[d.setBallHardcourt(),'"hardcourt"'],[d.setBallRetro(),'"retro"']],c.bounce_setBall=function(){return e(this,"setBall")},a.Blocks.bounce_setPaddle={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPaddleTooltip())}},a.Blocks.bounce_setPaddle.VALUES=[[d.setPaddleRandom(),"random"],[d.setPaddleHardcourt(),'"hardcourt"'],[d.setPaddleRetro(),'"retro"']],c.bounce_setPaddle=function(){return e(this,"setPaddle")},delete a.Blocks.procedures_defreturn,delete a.Blocks.procedures_ifreturn}},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js"}],"/home/ubuntu/staging/apps/build/js/bounce/locale.js":[function(a,b,c){"use strict";b.exports=window.blockly.bounce_locale},{}],"/home/ubuntu/staging/apps/build/js/bounce/api.js":[function(a,b,c){"use strict";var d=a("./tiles"),e=(d.Direction,d.SquareType,a("../StudioApp").singleton);c.PaddleSpeed={VERY_SLOW:.04,SLOW:.06,NORMAL:.1,FAST:.15,VERY_FAST:.23},c.BallSpeed={VERY_SLOW:.04,SLOW:.06,NORMAL:.1,FAST:.15,VERY_FAST:.23},c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setBallSpeed=function(a,b){e.highlight(a),Bounce.currentBallSpeed=b;for(var c=0;c<Bounce.ballCount;c++)Bounce.ballSpeed[c]=b},c.setBackground=function(a,b){e.highlight(a),Bounce.setBackground(b)},c.setBall=function(a,b){e.highlight(a),Bounce.setBall(b)},c.setPaddle=function(a,b){e.highlight(a),Bounce.setPaddle(b)},c.setBackground=function(a,b){e.highlight(a),Bounce.setBackground(b)},c.setPaddleSpeed=function(a,b){e.highlight(a),Bounce.paddleSpeed=b},c.playSound=function(a,b){e.highlight(a),e.playAudio(b)},c.moveLeft=function(a){e.highlight(a),Bounce.paddleX-=Bounce.paddleSpeed,Bounce.paddleX<0&&(Bounce.paddleX=0)},c.moveRight=function(a){e.highlight(a),Bounce.paddleX+=Bounce.paddleSpeed,Bounce.paddleX>Bounce.COLS-1&&(Bounce.paddleX=Bounce.COLS-1)},c.moveUp=function(a){e.highlight(a),Bounce.paddleY-=Bounce.paddleSpeed,Bounce.paddleY<0&&(Bounce.paddleY=0)},c.moveDown=function(a){e.highlight(a),Bounce.paddleY+=Bounce.paddleSpeed,Bounce.paddleY>Bounce.ROWS-1&&(Bounce.paddleY=Bounce.ROWS-1)},c.incrementOpponentScore=function(a){e.highlight(a),Bounce.opponentScore++,Bounce.displayScore()},c.incrementPlayerScore=function(a){e.highlight(a),Bounce.playerScore++,Bounce.displayScore()},c.launchBall=function(a){e.highlight(a);for(var b=0;b<Bounce.ballCount;b++)if(Bounce.isBallOutOfBounds(b)&&0===(Bounce.ballFlags[b]&Bounce.BallFlags.LAUNCHING))return void Bounce.launchBall(b);b=Bounce.ballCount,Bounce.ballCount++,Bounce.createBallElements(b),Bounce.playSoundAndResetBall(b)},c.bounceBall=function(a){e.highlight(a);var b;for(b=0;b<Bounce.ballCount;b++)if(0===(Bounce.ballFlags[b]&(Bounce.BallFlags.MISSED_PADDLE|Bounce.BallFlags.IN_GOAL))){Bounce.ballX[b]<0?(Bounce.ballX[b]=0,Bounce.ballDir[b]=2*Math.PI-Bounce.ballDir[b]):Bounce.ballX[b]>Bounce.COLS-1&&(Bounce.ballX[b]=Bounce.COLS-1,Bounce.ballDir[b]=2*Math.PI-Bounce.ballDir[b]),Bounce.ballY[b]<d.Y_TOP_BOUNDARY&&(Bounce.ballY[b]=d.Y_TOP_BOUNDARY,Bounce.ballDir[b]=Math.PI-Bounce.ballDir[b]);var c=Bounce.ballX[b]-Bounce.paddleX,f=Bounce.ballY[b]-Bounce.paddleY,g=Bounce.calcDistance(c,f);if(g<d.PADDLE_BALL_COLLIDE_DISTANCE&&Math.cos(Bounce.ballDir[b])<0){var h=3*Math.PI/8*(c/d.PADDLE_BALL_COLLIDE_DISTANCE);Bounce.ballDir[b]=(5*Math.PI+h-Bounce.ballDir[b])%(2*Math.PI),Bounce.ballDir[b]=Bounce.ballDir[b]<Math.PI?Math.min(Math.PI/2-.2,Bounce.ballDir[b]):Math.max(3*Math.PI/2+.2,Bounce.ballDir[b])}}}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js"}],"/home/ubuntu/staging/apps/build/js/bounce/tiles.js":[function(a,b,c){"use strict";c.Direction={NORTH:0,EAST:1,SOUTH:2,WEST:3},c.PADDLE_BALL_COLLIDE_DISTANCE=.7,c.FINISH_COLLIDE_DISTANCE=.5,c.DEFAULT_BALL_SPEED=.1,c.DEFAULT_BALL_DIRECTION=1.25*Math.PI,c.DEFAULT_PADDLE_SPEED=.1,c.DEFAULT_BALL_START_Y=2,c.Y_TOP_BOUNDARY=-.2,c.SquareType={OPEN:0,WALL:1,GOAL:2,BALLSTART:4,PADDLEFINISH:8,PADDLESTART:16,BALLFINISH:32,OBSTACLE:64}},{}]},{},["/home/ubuntu/staging/apps/build/js/bounce/main.js"]);