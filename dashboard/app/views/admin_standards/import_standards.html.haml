%h2
  Import Standards from Curriculum Builder

%p
  Standards and their associations with lessons are stored in Curriculum Builder and used to show standards alignment by course. For example:
%a{href: 'curriculum.code.org/csf-19/standards/'}
  CSF Standards Alignment

%br
%br

%p
  Information about standards alignment is also used on the standards view of the progress tab of the Teacher Dashboard on Code Studio.
  Click the button to sync the standards and their associations with lessons to Code Studio.

%button.primary.padded-button#import-standards="Import Standards"

= form_tag url_for(action: 'update_standards'), id: 'standards-form', method: 'post', class: 'form-inline', enforce_utf8: false do
  %input#cb-response{type: "hidden", name: "cb_standards_data"}
  #update-standards{style: 'display: none'}
    = submit_tag

:javascript
  $(document).ready(function() {
    $('#import-standards').click(function (e) {
      $.ajax({
            url: 'http://curriculumbuilder.herokuapp.com/metadata/coursef/standards.json',
            type: "get",
          }).done(function(data) {
            $('#cb-response').val(JSON.stringify(data))
            $("#standards-form").submit();
          }).fail(function () {
            alert("Whoops! There was a problem with the import.");
          });
      });
    })
