#terms-modal.modal.fade{'data-backdrop' => 'static', 'data-keyboard' => 'false', display: 'none'}
  .modal-dialog
    .modal-content.no-modal-icon{style: 'margin: 0 20px; padding: 0 15px;'}
      %h2 Updated Terms of Service and Privacy Policy
      We updated our Terms of Service and Privacy Policy, as shown below. The changes are effective as of August 22, 2016.  The biggest change: we will
      %i no longer store email addresses for student accounts on Code Studio.
      This is a big deal for us, and we hope it sets a new standard for student privacy in education technology. We’ve sent you a summary of the other changes via email.

      %br
      %br
      You’ll need to accept these new terms for students under the age of 13 in your classroom to have full access to all the latest features in Code Studio.  When registering an account for a student under 13, you will be asked to confirm that your school has parental consent for the collection of the student’s personal information for the use and benefit of the school, including educational programs such as Code Studio.

      %br
      %br
      .scroll-box
        %h1.no-top-margin Terms of Service
        = render partial: 'home/tos'
        %hr
        %h1 Privacy Policy
        = render partial: 'home/privacy'

      %br
      .left
        = form_for(current_user, url: registration_url('user'), html: {id: 'edit_user'}) do |f|
          .form-group
            = f.label :terms_of_service_version do
              = f.check_box :terms_of_service_version, {class: 'terms-checkbox'}, current_user.latest_terms_version
              = t('terms_interstitial.accept_label', tos_url: CDO.code_org_url('/tos'), privacy_url: CDO.code_org_url('/privacy')).html_safe
          .form-group{style: 'margin-top: 10px;'}
            = f.submit t('terms_interstitial.accept'), id: 'accept-terms-submit', class: 'btn primary-button disabled-button', disabled: true
            &nbsp;
            %button#print-button.secondary
              %i.fa.fa-print.right-margin-5
              Print

      .right
        %a#later-link.dismiss-link{href: '#'} Later

%iframe#print-frame{src: '/terms-and-privacy', style: 'display:none;'}

%br
%br

:javascript
  $(document).ready(function() {
    $("#terms-modal").modal('show');

    $("#user_terms_of_service_version").on('change', function(event) {
      if ($(this).is(':checked')) {
        $("#accept-terms-submit").prop('disabled', false).removeClass("disabled-button");
      } else {
        $("#accept-terms-submit").prop('disabled', true).addClass("disabled-button");
      }
    });

    $( "#edit_user" ).submit(function( event ) {
      event.preventDefault();
      $.ajax({
        type: 'POST',
        url: $(this).attr('action'),
        data: $(this).serialize(),
        dataType: 'json',
        success: function(data) {$("#terms-modal").modal('hide'); location.reload();}
      });
    });

    $('#later-link').click(function () {
      $("#terms-modal").modal('hide');
    });
  });

  $(document).ready(function () {
    var printButton = $('#print-button');
    if (printButton) {
      printButton.click(function () {
        var item = $("#print-frame")[0];
        item.contentWindow.document.getElementsByTagName("img")[0].style.width="100%";
        if (item.contentWindow.document.execCommand('print', false, null)) {
        } else {
          item.contentWindow.print();
        }
      });
    }
  });
