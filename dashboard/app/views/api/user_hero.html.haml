- if current_user
  - script = current_user.primary_script
  - script_level = current_user.next_unpassed_progression_level(script)
  - role_class = current_user.user_type

  #contents
    #welcome{class: role_class}
      = t('welcome_back', name: current_user.name)
      - if current_user.teacher?
        = link_to teacher_dashboard_url do
          %button.primary{style: "margin-left: 20px;"}= t('teacher.students.dashboard')

    #body{class: role_class}
      - if current_user.primary_script && script_level
        #student
          #currentprogress
            = t("data.script.name.#{current_user.primary_script.name}.title")
            %br
            .smalltext= script_level.stage.localized_title
          #coursebuttons
            = link_to build_script_level_url(script_level) do
              %button.primary= t('continue')
            = link_to script_url(current_user.primary_script) do
              %button.primary= t('home.view_course')
      - elsif all_advertised_scripts_completed?(advertised_scripts)
        = t('home.student_finished', online_link: link_to(t('home.online'), 'http://code.org/learn/beyond'), local_school_link: link_to(t('home.local_school'), 'http://code.org/learn/local'))
      - else
        = link_to t('home.no_primary_course'), root_url
      
    #clearboth{ style: 'clear:both;' }
