---
layout: none
template: none
---
- authentication_required!
- forbidden! unless have_permission?('facilitator') || dashboard_user[:admin]

%a{href:'/ops-dashboard'}
  Dashboard
>
%a{href:'/ops-dashboard/workshops'}
  PD Workshops
>
%span
  {{workshop.name}}

%h1
  Attendance for {{workshop.name}}

%div.jumbotron{'ng-show' => 'teachers.length <= 0'}
  No teachers registered for this workshop.
%a.btn.btn-white{'ng-click' => 'teacherAddition = true', 'ng-hide' => 'teacherAddition == true'}
  Add a new teacher to this workshop
%form{'ng-show' => 'teacherAddition == true', style:'width:30%'}
  %h2
    New teacher information
  %input.form-control{type:'text', placeholder:'First Name', 'ng-model' => 'newTeacher.firstName'}
  %br
  %input.form-control{type:'text', placeholder:'Last Name', 'ng-model' => 'newTeacher.lastName'}
  %br
  %input.form-control{type:'text', placeholder:'Email', 'ng-model' => 'newTeacher.email'}
  %br
  %input.form-control{type:'text', placeholder:'District', 'ng-model' => 'newTeacher.district'}
  %br
  %select.form-control{'ng-model' => 'newTeacher.gender'}
    %option{value:'', disabled:'true', selected:'true'}
      Gender
    %option
      Male
    %option
      Female
  %br
  %input.form-control{type:'text', placeholder:'School', 'ng-model' => 'newTeacher.school'}
  %br
  %a.btn.btn-success.btn-xs{'ng-click' =>''}
    Save
  %a.btn.btn-white.btn-xs{'ng-click' => 'teacherAddition = false'}
    Cancel
%div.table-wrapper{style:"width:970px; overflow-x:scroll; margin-top:10px"}
  %table.table-wrapper{'ng-show' => 'teachers.length > 0'}
    %tr
      %th
      %th.manage-th{'ng-repeat' => 'segment in workshop.segments'}
        {{segment.start | date:'shortDate'}}
        %br
        {{segment.start | date:'shortTime'}} - {{segment.end | date:'shortTime'}}

    %tr{'ng-repeat' => 'teacher in teachers | orderBy:"ops_last_name"'}
      %td{'ng-model' => 'workshop_attendance.teacher_id'}
        {{teacher.ops_last_name}}, {{teacher.ops_first_name}}
      %td{'ng-repeat' => 'segment in attendances.segments'}
        %form
          %label
            Attended
            %input{type:'radio', 'ng-model' => 'workshop_attendance.status', value:'present'}
          %label
            Absent
            %input{type:'radio', 'ng-model' => 'workshop_attendance.status', value:'absent'}
          %label
            Excused absence
            %input{type:'radio', 'ng-model' => 'workshop_attendance.status', value:'excused'}
            %input{style:'display:none', 'ng-model' => 'workshop_attendance.teacher_id', type:'text'}
          %br
          %textarea{placeholder:'Additional notes', cols:'20', rows:'3'}
          %br
          %a.btn.btn-white.btn-xs
            Save