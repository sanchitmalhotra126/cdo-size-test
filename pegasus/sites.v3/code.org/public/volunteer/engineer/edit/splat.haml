---
title: Update Email Preferences
nav: blank
rightbar: blank
---
%script{type: "text/javascript", src: "/js/volunteer-unsubscribe.js"}

- dont_cache
- secret = File.basename(request.path_info)
- pass unless form = Form2.from_row(DB[:forms].where(kind:'VolunteerEngineerSubmission2015', secret:secret).first)
- unsubscribed = form.data['unsubscribed_s']

%h1 Update email preferences

%form#unsubscribe-volunteer-form{role: "form", onsubmit: "event.preventDefault(); unsubscribeVolunteerList();"}
  #error-message{style: 'display: none'}
  - if unsubscribed == 'until2016'
    %p You've unsubscribed from teacher requests this year. To update your preference, select below and click confirm.
  - elsif unsubscribed == 'forever'
    %p You've unsubscribed from teacher requests forever. To update your preference, select below and click confirm.
  - else
    %p You are currently subscribed to teacher requests. To update your preference, select below and click confirm.

  .form-group
    .radio-row
      %label.radio-inline
        %input#unsubscribe-volunteer-annual{name: "unsubscribed_s", type: "radio", required: true, value: "until2016"}/
        Stop sending me teacher requests for the rest of the year
      %label.radio-inline
        %input#unsubscribe-volunteer-annual{name: "unsubscribed_s", type: "radio", required: true, value: "forever"}/
        Stop sending me teacher requests forever
      %label.radio-inline
        %input#unsubscribe-volunteer-annual{name: "unsubscribed_s", type: "radio", required: true, value: "resubscribe"}/
        Send me teacher requests again

  %input#unsubscribe-volunteer-name{name:'name_s', type:'hidden', required: true, value: form.data['name_s']}
  %input#unsubscribe-volunteer-company{name:'company_s', type:'hidden', required: true, value: form.data['company_s']}
  %input#unsubscribe-volunteer-experience{name:'experience_s', type:'hidden', required: true, value: form.data['experience_s']}
  %input#unsubscribe-volunteer-location{name:'location_s', type:'hidden', required: true, value: form.data['location_s']}
  %input#unsubscribe-volunteer-location-flexibility{name:'location_flexibility_ss', type:'hidden', required: true, value: form.data['location_flexibility_ss']}
  %input#unsubscribe-volunteer-volunteer-after-hoc{name:'volunteer_after_hoc_b', type:'hidden', required: true, value: form.data['volunteer_after_hoc_b']}
  %input#unsubscribe-volunteer-time-commitment{name:'time_commitment_s', type:'hidden', required: true, value: form.data['time_commitment_s']}
  %input#unsubscribe-volunteer-linkedin{name:'linkedin_s', type:'hidden', required: true, value: form.data['linkedin_s']}
  %input#unsubscribe-volunteer-facebook{name:'facebook_s', type:'hidden', required: true, value: form.data['facebook_s']}
  %input#unsubscribe-volunteer-description{name:'description_s', type:'hidden', required: true, value: form.data['description_s']}
  %input#unsubscribe-volunteer-email{name:'email_s', type:'hidden', required: true, value: form.data['email_s']}
  %input#unsubscribe-volunteer-allow-contact{name:'allow_contact_b', type:'hidden', required: true, value: form.data['allow_contact_b']}
  #volunteer-secret{style: 'display: none'}= secret

  %button.btn-submit Confirm

#thanks{:style=>"display: none;"} You have successfully updated your email preferences.
