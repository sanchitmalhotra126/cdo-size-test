---
title: Update Email Preferences
nav: blank
rightbar: blank
---
%script{type: "text/javascript", src: "/js/volunteer-unsubscribe.js"}

- dont_cache
- secret = File.basename(request.path_info)
- pass unless form = Form2.from_row(DB[:forms].where(kind:'VolunteerEngineerSubmission2015', secret:secret).first)
- unsubscribed = form.data['unsubscribed_s']

%h1 Update email preferences

%form#unsubscribe-volunteer-form{role: "form", onsubmit: "event.preventDefault(); unsubscribeVolunteerList();"}
  #error-message{style: 'display: none'}
  - if unsubscribed == 'until2016'
    %p You've unsubscribed from teacher requests this year. To update your preference, select below and click confirm.
  - elsif unsubscribed == 'forever'
    %p You've unsubscribed from teacher requests forever. To update your preference, select below and click confirm.
  - else
    %p You are currently subscribed to teacher requests. To update your preference, select below and click confirm.

  .form-group
    .radio-row
      %label.radio-inline
        %input#unsubscribe-volunteer-annual{name: "unsubscribed_s", type: "radio", required: true, value: "until2016"}/
        Stop sending me teacher requests for the rest of the year
      %label.radio-inline
        %input#unsubscribe-volunteer-annual{name: "unsubscribed_s", type: "radio", required: true, value: "forever"}/
        Stop sending me teacher requests forever
      %label.radio-inline
        %input#unsubscribe-volunteer-annual{name: "unsubscribed_s", type: "radio", required: true, value: "resubscribe"}/
        Send me teacher requests again

  #volunteer-secret{style: 'display: none'}= secret
  %button.btn-submit Confirm

#thanks{:style=>"display: none;"} You have successfully updated your email preferences.
