---
theme: responsive_wide
banner: null
layout: wide
<%
  if request.site == 'csedweek.org'
%>
social:
  "og:title": "The Hour of Code is here"
  "og:description": "The Hour of Code is a global movement reaching tens of millions of students in 180+ countries and over 30 languages. Ages 4 to 104."
  "og:image": "http://csedweek.org/images/hoc-video-thumbnail.jpg"
  "og:image:width": "1200"
  "og:image:height": "627"
  "og:video:url": "http://youtubeeducation.com/v/FC5FbmsH4fw"
  "og:video:secure_url": "https://youtubeeducation.com/v/FC5FbmsH4fw"
  "og:video:type": "application/x-shockwave-flash"
  "og:video:width": "640"
  "og:video:height": "360"
  "twitter:card": "player"
  "twitter:site": "@codeorg"
  "twitter:url": "http://code.org/"
  "twitter:title": "The Hour of Code is here"
  "twitter:description": "The Hour of Code is a global movement reaching tens of millions of students in 180+ countries and over 30 languages. Ages 4 to 104."
  "twitter:image:src": "http://csedweek.org/images/hoc-video-thumbnail.jpg"
  "twitter:player": "https://youtubeeducation.com/v/FC5FbmsH4fw"
  "twitter:player:width": "640"
  "twitter:player:height": "360"
<%
  else
%>
social:
  "og:title": "Every child deserves opportunity"
  "og:description": "Every student in every school deserves the opportunity to study computer science."
  "og:image": "http://code.org/images/code-video-thumbnail.jpg"
  "og:image:width": "1440"
  "og:image:height": "810"
  "og:video:url": "http://youtubeeducation.com/v/nKIu9yen5nc"
  "og:video:secure_url": "https://youtubeeducation.com/v/nKIu9yen5nc"
  "og:video:type": "application/x-shockwave-flash"
  "og:video:width": "640"
  "og:video:height": "360"
<%
  end
%>

---

:css

  a.underscorehover:hover
  {
    text-decoration: underline;
    color: white;
  }

  @media screen and (max-width: 512px)
  {
    .same-height-column {width:100%}
  }
  @media screen and (min-width: 513px)
  {
    .same-height-column {float:none !important; width:50%}
  }

  body.modal-open .supreme-container{
    -webkit-filter: blur(2px);
    -moz-filter: blur(2px);
    -o-filter: blur(2px);
    -ms-filter: blur(2px);
    filter: blur(2px);
  }

.supreme-container

  = view :homepage_hero

  -#### Hero slots

  - if request.site == 'csedweek.org'

    #heroslots{style: "text-align:center"}
      - DB[:cdo_homepage].where(type_s: "slot", active_s: ["show","hide"], site_s: [request.site,"both"]).all do |entry|
        - display = entry[:active_s] == "hide" ? "none" : "block"
        .slot{style: "display: #{display}"}
          = view :homepage_quarterslot, entry: entry

  .clear{style: "clear:both"}

  

  -if request.site != 'csedweek.org'
    
    -#.container_responsive
      %h1#mission{style: "font-size: 22px; margin-top:40px; margin-bottom:5px; text-align:center; color: rgb(102,102,102); padding:10px; /*background-color: rgb(239, 239, 239) */; font-family: 'Gotham 4r', sans-serif"}
        Learn computer science for free online or bring it to your school.

  -#### Below the fold

  -#%h1#audienceheader{style: "font-size: 24px; margin-top:80px; margin-bottom:40px; text-align:center; color: rgb(102,102,102)"}
    Code.org offers something for everybody

  -if request.site != 'csedweek.org'
    #audienceslots{style: "text-align:center; margin-top:0px"}
      - audienceslots = []

      - slot = {name:"Hour of Code", bgc: "0, 173, 188", bgc_body1: "242, 251, 252", bgc_head: "0, 173, 188", bgc_body: "89, 202, 211",links: [], url: "/learn", sentence: "Anybody can learn. Start today"}
      -   slot[:links] << {img: "/shared/images/courses/logo_tall_hoc.jpg"}
      -   slot[:links] << {text: "Try the Hour of Code", url: "/learn"}
      -   slot[:links] << {text: "Host an Hour of Code", url: "/educate/hoc"}
      -   slot[:links] << {text: "100,303,030 served", url: "/leaderboards", priority: 2} #p2
      -#   slot[:links] << {text: "Other learning options ", priority: 2} #p2
      - audienceslots << slot

      - slot = {name:"Students", bgc: "118, 101, 160", bgc_body1: "248, 247, 250", bgc_head: "118, 101, 160", bgc_body: "166, 155, 193", links: [], url: "http://studio.code.org", sentence: "Explore all of our tutorials"}
      -   slot[:links] << {img: "/shared/images/courses/logo_tall_elementary.jpg"}
      -   slot[:links] << {text: "Try Code Studio", url: "http://studio.code.org"}
      -   slot[:links] << {text: "Find a local class", url: "/learn/local"}
      -   slot[:links] << {text: "Other online courses", url: "/learn/beyond"}
      -#   slot[:links] << {text: "Host an Hour of Code", priority: 2} # p2
      - audienceslots << slot

      - slot = {name:"Educators", bgc: "185, 191, 21", bgc_body1: "252, 252, 243", bgc_head: "0, 148, 202",  bgc_body: "89, 185, 220",links: [], url: "/educate", sentence: "Teach your students"}
      -   slot[:links] << {img: "/shared/images/courses/logo_tall_teacher2.jpg"}
      -   slot[:links] << {text: "Courses for grades K-5", url: "/educate/k5"}
      -   slot[:links] << {text: "See our full curriculum", url: "/educate/curriculum"}
      -   slot[:links] << {text: "Professional development", url: "/educate/professional-development", priority: 2} # p2
      -#   slot[:links] << {text: "Advocacy tools  ", priority: 2} # p2
      - audienceslots << slot

      - slot = {name:"Advocates", bgc: "255, 184, 29", bgc_body1: "230, 230, 230", bgc_head: "185, 191, 21",  bgc_body: "209, 213, 103",links: [], url: "/promote", sentence: "Support our work"}
      -   slot[:links] << {img: "/shared/images/courses/logo_tall_map.jpg"}
      -   slot[:links] << {text: "See the stats", url: "/promote"}
      -   slot[:links] << {text: "Buy a t-shirt or hat", url: "/shop"}
      -   slot[:links] << {text: "Make a donation", url: "/donate"}
      - audienceslots << slot

      - audienceslots.each_with_index do |row, rowindex|
        -# display = entry[:active_s] == "hide" ? "none" : "block"
        .slot{style: "display: #{display}"}
          = view :homepage_linkslot_tall_quarter_white, entry: row, bgc_head: row[:bgc_head], bgc_body: row[:bgc_body], bgc_body1: row[:bgc_body1]

  .clear{style: "clear:both"}


  -#### User hero for signed-in users

  - if request.site == 'code.org'
    .container_responsive{style: "margin-top:40px; margin-bottom: 40px"}
      #user_hero

    %div{style: 'clear:both;'}

  %script{:src=>"/js/jquery.placeholder.js"}

 
  -#### News & gallery

  -#%h1#newsheader{style: "font-size: 24px; margin-top:80px; margin-bottom:40px; text-align:center; color: rgb(102,102,102)"}
    Code.org news and updates

  -if request.site != 'csedweek.org'

    #newsandgallery{style: "overflow:hidden; display: table; margin-top:20px"}

      - bgc_head =  "255, 198, 74"  # "255,184,29" * 0.8
      - bgc_body =  "255, 251, 244"  # "255,184,29" * 0.05

      -#.col-50#newscolumn.same-height-column{:style=>"margin-bottom:20px; margin-top:20px; background-color: rgb(#{bgc_body}); display: table-cell; border: 5px solid white;"}     
        .headingbox{style: "background-color: rgb(#{bgc_head}); left:0px;color:white; width:100%; padding:10px; font-size:20px; text-align:left; font-family: 'Gotham 4r', sans-serif; text-align:center"}
          Latest Highlights
        .thelinks{style: "padding: 10px; height:100% "}
          -count = 0
          -DB[:cdo_news_items].where(site_s:'all').or(site_s:request.site).limit(4).each do |value|
            -unless count == 0
              -#%hr.narrow_hr
              %div{style: "height:10px"}
            %a{:href=>value[:url_s], :target=>'_blank'}
              =value[:heading_s]
            %br
            = value[:date_dt]
            -#= '//'
            = value[:publication_s]
            -count += 1
          %br
          %br
          %a{:href=>'/about/news'} See all news

      - bgc_head =  "51, 169, 213"  # "0,148,202" * 0.8
      - bgc_body = "255, 164, 0"        # "0,148,202" * 0.05

      .col-100#gallerycolumn.same-height-column{:style=>"margin-bottom:20px;  margin-top:20px; display: table-cell; border: 5px solid white; /*background-color: rgb(#{bgc_body}); */ "}
        %a.underscorehover{href: "http://studio.code.org"}
          .thebox{style: "/*background-color: rgb(#{bgc_body});*/ "}
            .headingbox{style: "background-color: rgb(#{bgc_body}); left:0px;color:white; width:100%; padding:10px; font-size:20px; text-align:left; font-family: 'Gotham 4r', sans-serif; text-align:center"}
              Code Studio student creations
            %a{href: "http://studio.code.org", style: "text-decoration:none"}
              .thelinks{style: "padding: 10px; height:100% "}
                %img{style: "float:left; width:50%", src:"/shared/images/gallery/artist_gallery_thumbnails.png"}
                %img{style: "float:left; width:50%", src:"/shared/images/gallery/playlab_gallery_thumbnails.png"}


  -if request.site != 'csedweek.org'
    = view :donor_slider2

= view 'popup_window.js'


- video_code = nil
- download_filename = nil
- facebook = nil
- twitter = nil

- video_actions = DB[:cdo_homepage].where(type_s: "action", param1_s: "video", active_s: ["show","hide"], site_s: [request.site,"both"]).all
- video_actions.each_with_index do |entry, index|
  - video_code = entry[:param2_s]
  - if video_code == "nKIu9yen5nc"
    - download_filename = 'HoC-video-15mb.mp4'
    - facebook = {:u=>"http://#{request.site}/"}
    - if request.site == 'csedweek.org'
      - twitter = {:related=>'codeorg', :hashtags=>'', :text=>I18n.t(:hoc_is_here)}
      - twitter[:hashtags] = 'HourOfCode' unless I18n.t(:hoc_is_here).include? '#HourOfCode'
    - else
      - twitter = {:related=>'codeorg', :hashtags=>'', :text=>I18n.t(:twitter_teach_cs)}
    - twitter[:url] = "http://#{request.site}/" unless twitter[:text].include? "http://#{request.site}/" || "#{twitter[:text]} http://#{request.site}/".length > 140

- unless video_code.nil_or_empty?
  #videofullwidth{style: "position:absolute; left: 0; top: 0; width: 100%"}
    = view :display_video_lightbox, id: "mainvideo", video_code: video_code, download_filename: download_filename, facebook:facebook, twitter:twitter


:javascript
  var petition;

  $(document).ready()
  {
    petition = new Petition();
  }
  
  $(document).ready()
  {
    showQuote(null, 0);
  }

  function showQuote(lastImage, nextImage)
  {
    if (lastImage !== null)
    {
      var lastImageId = "#captionarea" + lastImage;
      //console.log("hiding", lastImageId);
      $(lastImageId + " .caption1").animate({left: "50px", opacity:0}, { duration: 2000 });
      $(lastImageId + " .caption2").animate({left: "30px", opacity:0}, { duration: 2000 });
      $(lastImageId + " .caption3").animate({opacity:0}, { duration: 2000 });
    }

    if (nextImageId !== null) 
    {
      var nextImageId = "#captionarea" + nextImage;
      //console.log("showing", nextImageId);
      $(nextImageId + " .caption1").delay(1500).animate({ left: "0px", opacity: 0.8 }, { duration: 2000 });
      $(nextImageId + " .caption2").delay(2000).animate({ left: "60px", opacity: 0.8 }, { duration: 2000 });
      $(nextImageId + " .caption3").delay(4500).animate({ opacity: 0.6 }, { duration: 2000 });
    }

    $(".action").delay(4000).animate({ opacity: 1 }, { duration: 2000 });
  }

- if request.site == 'code.org'
  :javascript
    $(document).ready(function() {
      $.ajax({
        type: "GET",
        url: '/dashboardapi/user_hero',
        //data: "id=" + id, // appears as $_GET['id'] @ ur backend side
        success: function(data) {
          // data is ur summary
          $('#user_hero').html(data);
        }
      });
    });

:javascript

  function adjustScroll(destination)
  {
    $('html, body').animate({
      scrollTop: $("#" + destination).offset().top
    }, 1000);
  }

  var currentImage = 0;
  var timerId;
  var videoStarted = false;

  function cycleImage()
  {
    var numWideHeroes = $(".widehero").length;

    var lastImage = currentImage;
    var nextImage = (currentImage + 1) % numWideHeroes;
    $("#fullwidth" + currentImage).fadeTo(4000, 0);
    $("#fullwidth" + nextImage).fadeTo(4000, videoStarted ? 0.3 : 1);
    currentImage = nextImage;

    showQuote(lastImage, currentImage);
  }

  $.ready()
  {
    timerId = setInterval(cycleImage, 13000);
  }

